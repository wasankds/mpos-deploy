<!DOCTYPE html>
<html lang="en">
<head>
  <%- include('partials/meta',{ time:time}) %>
  <title><%= title %></title>
  <!-- Font Awesome -->   
  <link rel="stylesheet" href="/cdn/fontawesome/css/all.min.css">
  <% if(!IS_PRODUCTION) { %>
  <link rel="stylesheet" href="/css/utils.css?v=<%= time %>">
  <link rel="stylesheet" href="/css/fonts.css?v=<%= time %>">
  <link rel="stylesheet" href="/css/alink.css?v=<%= time %>">
  <link rel="stylesheet" href="/css/toast.css?v=<%= time %>">
  <link rel="stylesheet" href="/css/flexNew.css?v=<%= time %>">
  <link rel="stylesheet" href="/css/footer.css?v=<%= time %>">
  <link rel="stylesheet" href="/css/input.css?v=<%= time %>">
  <link rel="stylesheet" href="/css/nav.css?v=<%= time %>">
  <link rel="stylesheet" href="/css/same.css?v=<%= time %>">
  <link rel="stylesheet" href="/css/passwordReset.css?v=<%= time %>">        
  <% } else { %>
  <link rel="stylesheet" href="/css-min/passwordReset.min.css?v=<%= time %>">
  <% }  %>
</head>

<body>

  <!-- header -->
  <%- include('partials/notify.ejs', {msg:msg}) %>

  <%  
    const isFlash = passwordFlash && passwordFlash != null && passwordFlash.length > 0
    const flash = isFlash ? passwordFlash[0] : {}
  %>

  <nav class="d-flex justify-content-between align-items-center ">
    <div> 
      <a class="nav-link" 
          href="<%= PATH_LOGIN %>">
        <i class="fas fa-sign-in-alt mg-r-m"></i>เข้าสู่ระบบ
      </a>      
    </div>
    <div>
      <span class="fc-white"><%= SYS_NAME %></span>
      <span class="fc-white"><%= SYS_NAME2 %></span>
      <small class="fc-ligray mg-l-m"><%= SYS_VERSION %></small>
    </div>  
  </nav>    

  <header class="header-title">
    <p class="al-c fc-white">
      <i class="fas fa-rotate-right mg-r-l"></i>
      <span><%= title %></span>
    </p>
  </header>

  <main>

    <!-- ลืมรหัสผ่าน -->
    <form action="<%= PATH_RESET %>" method="POST"  autocomplete="off">

      <!--  -->
      <div class="flex-row mg-t-xxl">
        <label class="col-sm-f" style="word-break: break-word; white-space: normal;">   
          <span class="pd-r-s">✍</span> <span class="fc-blue">หากท่านได้รับลิงค์รีเซ็ตพาสเวิร์ด</span> แต่ท่านไม่ได้เป็นผู้กด <span class="fc-gray">(ส่งคำร้องขอให้รีเซ็ตพาสเวิร์ด)</span> <span class="fc-red">ขอให้ท่านไม่ต้องสนใจ</span>
        </label>
      </div>

      <!--  -->
      <input type="hidden" name="change_id" value="<%= change_id %>">

      <!-- #1 -->
      <div class="flex-row mg-t-xl pd-l-xxl pd-r-xxl">
        <div class="col-sm-f input-group">
          <label class="pd-r-s">
            <span>อิเมล์</span>
            <span class="fc-lime">*</span>
          </label>
          <input class="pd-l-m" type="email" name="userEmail" 
                  placeholder="อิเมล์" 
                  required readonly
                  value="<%= userEmail %>" >
        </div>
      </div>

      <!-- #2 -->
      <div class="flex-row mg-t-l pd-l-xxl pd-r-xxl">

        <!--  -->
        <div class="col-sm-5 input-group">
          <label class="pd-r-s">
            <span>รหัสผ่านใหม่</span>
            <span class="fc-lime">*</span>
          </label>
          <input class="pd-l-m" type="password" 
                  id="newPassword"  name="newPassword" 
                  placeholder="รหัสผ่านใหม่" 
                  required 
                  title="<%= PASSWORD_DESCRIPTION %>"
                  pattern="<%= PASSWORD_PATTERN %>"
                  value="<%= flash ? flash.newPassword : '' %>" >
        </div>

        <!-- #3 -->
        <div class="col-sm-5 input-group">
          <label class="pd-r-s">
            <span>ยืนยันรหัสผ่านใหม่</span>
            <span class="fc-lime">*</span>
          </label>
          <input class="pd-l-m" type="password" 
                  id="confirmPassword"  name="confirmPassword" 
                  placeholder="ยืนยันรหัสผ่านใหม่" 
                  required 
                  title="<%= PASSWORD_DESCRIPTION %>"
                  pattern="<%= PASSWORD_PATTERN %>"
                  value="<%= flash ? flash.confirmPassword : '' %>" >
        </div>
      </div>

      <!-- #4 -->
      <div class="flex-row mg-t-xxl pd-l-xxl pd-r-xxl">

        <div class="col-sm-1 input-group">
          <button class="bg-view lh-label" id="btnViewPassword" title="ดูรหัสผ่าน">
            <i class="fa fa-eye pd-r-s"></i>
          </button>
        </div>

        <div class="col-sm-4 input-group">
          <label class="">&nbsp;</label>
        </div>

        <div class="col-sm-5 input-group">
          <button class="bg-reset lh-label" type="submit">
            <i class="fa fa-rotate-right pd-r-s"></i> รีเซ็ตรหัสผ่าน
          </button>
        </div>            
      </div>

    </form>

  </main>

  <%- include('partials/footer') %>
  
  <% if(!IS_PRODUCTION) { %>
  <script type="text/javascript" src="/js/script_all.js?v=<%= time %>"></script>
  <script type="text/javascript" src="/js/notify.js"></script>
  <script type="text/javascript" src="/js/passwordReset.js?v=<%= time %>"></script>
  <% } else { %>
  <script type="text/javascript" src="/js-min/passwordReset.obf.js?v=<%= time %>"></script>
  <% }  %>

</body>
</html>