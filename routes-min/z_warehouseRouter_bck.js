const _0x3f98da=_0x56da;(function(_0x1afe2e,_0x45eaa2){const _0x477d4a=_0x56da,_0x2e17ab=_0x1afe2e();while(!![]){try{const _0x591124=parseInt(_0x477d4a(0x220))/0x1+parseInt(_0x477d4a(0x1b4))/0x2+-parseInt(_0x477d4a(0x147))/0x3+-parseInt(_0x477d4a(0x226))/0x4+parseInt(_0x477d4a(0x125))/0x5*(parseInt(_0x477d4a(0x25f))/0x6)+parseInt(_0x477d4a(0x1ed))/0x7*(-parseInt(_0x477d4a(0x157))/0x8)+parseInt(_0x477d4a(0x1d8))/0x9*(parseInt(_0x477d4a(0x1f9))/0xa);if(_0x591124===_0x45eaa2)break;else _0x2e17ab['push'](_0x2e17ab['shift']());}catch(_0x16d06e){_0x2e17ab['push'](_0x2e17ab['shift']());}}}(_0x103d,0xe55a5));const _0x3821e6=(function(){const _0x45dd07=_0x56da,_0x1f623f={'UMFEU':function(_0x29a416,_0x148482){return _0x29a416!==_0x148482;},'YKhwN':_0x45dd07(0x261),'TLorf':_0x45dd07(0x20e),'yNoeA':_0x45dd07(0x25e),'PriIm':function(_0x173d4f,_0x14407b){return _0x173d4f(_0x14407b);},'CYUiv':function(_0x587b31,_0xb2b7f5){return _0x587b31!==_0xb2b7f5;},'fWvFv':_0x45dd07(0x188),'spfDi':_0x45dd07(0x1bc)};let _0x1f69bf=!![];return function(_0x5ef3b7,_0x43f821){const _0x15d6e5=_0x45dd07,_0x2132ac={'WZTfN':function(_0x5c298c,_0x30feb1){const _0xba4e59=_0x56da;return _0x1f623f[_0xba4e59(0x23d)](_0x5c298c,_0x30feb1);},'DqnzW':_0x1f623f[_0x15d6e5(0x170)],'aMEPE':_0x1f623f[_0x15d6e5(0x202)],'rpnpy':function(_0xa87a29,_0x49e380){const _0x44d260=_0x15d6e5;return _0x1f623f[_0x44d260(0x23d)](_0xa87a29,_0x49e380);},'zVXXY':_0x1f623f[_0x15d6e5(0x132)],'sJSLA':function(_0x4be18b,_0x27e62c){return _0x1f623f['PriIm'](_0x4be18b,_0x27e62c);}};if(_0x1f623f['CYUiv'](_0x1f623f[_0x15d6e5(0x12c)],_0x1f623f[_0x15d6e5(0x224)])){const _0x478592=_0x1f69bf?function(){const _0x2892a4=_0x15d6e5;if(_0x2132ac[_0x2892a4(0x19a)](_0x2132ac[_0x2892a4(0x1ba)],_0x2132ac[_0x2892a4(0x142)])){if(_0x43f821){if(_0x2132ac[_0x2892a4(0x109)](_0x2132ac[_0x2892a4(0x144)],_0x2132ac['zVXXY']))return![];else{const _0x296723=_0x43f821[_0x2892a4(0x204)](_0x5ef3b7,arguments);return _0x43f821=null,_0x296723;}}}else{const _0x190ad8=_0x1781db['constructor'][_0x2892a4(0x1d1)][_0x2892a4(0x22a)](_0x4c481a),_0x1c8712=_0x2dc6fc[_0x2bd7e7],_0x2d3baa=_0xed065c[_0x1c8712]||_0x190ad8;_0x190ad8['__proto__']=_0x12ae15[_0x2892a4(0x22a)](_0x126ee1),_0x190ad8[_0x2892a4(0x18a)]=_0x2d3baa[_0x2892a4(0x18a)][_0x2892a4(0x22a)](_0x2d3baa),_0x5a0606[_0x1c8712]=_0x190ad8;}}:function(){};return _0x1f69bf=![],_0x478592;}else _0x2132ac[_0x15d6e5(0x24c)](_0x11f3a2,0x0);};}());(function(){const _0xeaf299=_0x56da,_0x346426={'ENbdG':_0xeaf299(0x176),'YwSSm':_0xeaf299(0x21d),'osDcY':function(_0x59567a,_0x2f9a8c){return _0x59567a(_0x2f9a8c);},'FHWvY':_0xeaf299(0x177),'nAKdw':function(_0x4d569f,_0x4ad896){return _0x4d569f+_0x4ad896;},'uWHbi':_0xeaf299(0x1bf),'gZIUP':function(_0x1267f8,_0x1d6484){return _0x1267f8+_0x1d6484;},'MIfta':_0xeaf299(0x127),'NQEpW':function(_0x3386fc,_0xdd2a6e){return _0x3386fc(_0xdd2a6e);},'cFgZG':function(_0x3f0378){return _0x3f0378();},'bipPv':function(_0x23d631,_0x33c8e0){return _0x23d631+_0x33c8e0;},'EbGrD':_0xeaf299(0x230),'hFZaj':_0xeaf299(0x155),'CJIdo':_0xeaf299(0x112),'TtiOL':function(_0x3991b6,_0xc43db5){return _0x3991b6(_0xc43db5);},'zStYw':function(_0x6e48ce,_0x45c156){return _0x6e48ce!==_0x45c156;},'mdtwP':'oDQnt','mHCyo':_0xeaf299(0x219),'dpTmj':function(_0x1bb684,_0xf1c58a){return _0x1bb684+_0xf1c58a;},'IZbSY':function(_0x1dae95,_0x264c5f){return _0x1dae95===_0x264c5f;},'KOHlC':'zDVKT','SbBiV':function(_0x2f0518,_0x28f339){return _0x2f0518(_0x28f339);},'komZR':'GGnvI','luEzf':'mMMby','YGgTS':function(_0x418148){return _0x418148();},'mVncy':function(_0xa31e84,_0x2323f7,_0x4de165){return _0xa31e84(_0x2323f7,_0x4de165);}};_0x346426[_0xeaf299(0x1b1)](_0x3821e6,this,function(){const _0x506c29=_0xeaf299,_0x2efa9b={'JLIsz':function(_0x5953c6,_0x106ef2){const _0x7d3582=_0x56da;return _0x346426[_0x7d3582(0x165)](_0x5953c6,_0x106ef2);}};if(_0x346426[_0x506c29(0x1e2)](_0x346426[_0x506c29(0x118)],_0x346426[_0x506c29(0x12a)])){const _0x3073eb=new RegExp(_0x346426['ENbdG']),_0x19d5c8=new RegExp(_0x346426['YwSSm'],'i'),_0x22deb9=_0x346426[_0x506c29(0x164)](_0x553102,_0x346426[_0x506c29(0x14d)]);if(!_0x3073eb[_0x506c29(0x1d2)](_0x346426[_0x506c29(0x1dc)](_0x22deb9,_0x346426[_0x506c29(0x163)]))||!_0x19d5c8[_0x506c29(0x1d2)](_0x346426['dpTmj'](_0x22deb9,_0x346426[_0x506c29(0x187)]))){if(_0x346426[_0x506c29(0x1fd)](_0x346426[_0x506c29(0x251)],_0x346426['KOHlC']))_0x346426[_0x506c29(0x260)](_0x22deb9,'0');else{const _0x5419dc=new _0x4cfa4b(_0x346426[_0x506c29(0x1fc)]),_0x2f6ce7=new _0x29a97f(_0x346426[_0x506c29(0x1be)],'i'),_0x59d9b8=_0x346426['osDcY'](_0x13c60c,_0x346426[_0x506c29(0x14d)]);!_0x5419dc[_0x506c29(0x1d2)](_0x346426[_0x506c29(0x249)](_0x59d9b8,_0x346426[_0x506c29(0x163)]))||!_0x2f6ce7[_0x506c29(0x1d2)](_0x346426['gZIUP'](_0x59d9b8,_0x346426[_0x506c29(0x187)]))?_0x346426[_0x506c29(0x1f7)](_0x59d9b8,'0'):_0x346426[_0x506c29(0x1b6)](_0x698ec6);}}else{if(_0x346426[_0x506c29(0x1e2)](_0x346426[_0x506c29(0x1fb)],_0x346426[_0x506c29(0x105)]))_0x346426[_0x506c29(0x156)](_0x553102);else{if(_0xfbdf5d)return _0x2867a2;else _0x2efa9b[_0x506c29(0x1ef)](_0x1009f1,0x0);}}}else(function(){return!![];}[_0x506c29(0x167)](_0x346426[_0x506c29(0x1dc)](_0x346426[_0x506c29(0x113)],_0x346426['hFZaj']))['call'](_0x346426[_0x506c29(0x241)]));})();}());const _0x1b79fb=(function(){const _0x1eae02=_0x56da,_0x5bb33b={'HeItH':_0x1eae02(0x176),'lclJX':_0x1eae02(0x21d),'VHTAz':function(_0x259315,_0x205f33){return _0x259315(_0x205f33);},'PtICW':'init','YTaeq':function(_0x4d27d9,_0x3209d3){return _0x4d27d9+_0x3209d3;},'BgRAn':_0x1eae02(0x1bf),'ISLrX':_0x1eae02(0x127),'NBsse':function(_0x3e50ed){return _0x3e50ed();},'UKTFF':function(_0x3cea84,_0xc6e157,_0x2ed300){return _0x3cea84(_0xc6e157,_0x2ed300);},'zfwzL':function(_0x1abbe6,_0xa447b9){return _0x1abbe6===_0xa447b9;},'CtXgx':_0x1eae02(0x1e5),'OOZnb':_0x1eae02(0x1e1),'inEtX':_0x1eae02(0x181),'RwFhJ':'UyByA','gSosY':function(_0x4f57fd,_0x5f3cdf){return _0x4f57fd!==_0x5f3cdf;},'hMSww':_0x1eae02(0x137)};let _0x3386f5=!![];return function(_0x3251c6,_0x1ec0da){const _0x3dd531=_0x1eae02,_0x6b8e90={'HWWwA':function(_0x1759df){return _0x5bb33b['NBsse'](_0x1759df);}};if(_0x5bb33b[_0x3dd531(0x1da)](_0x5bb33b['hMSww'],_0x5bb33b[_0x3dd531(0x1ce)])){if(_0x12a95e){const _0x55638e=_0xce6461[_0x3dd531(0x204)](_0x38fce1,arguments);return _0x899c3a=null,_0x55638e;}}else{const _0xca69f9=_0x3386f5?function(){const _0x169d87=_0x3dd531,_0x364764={'EuVUd':_0x5bb33b[_0x169d87(0x19b)],'Oqpjn':_0x5bb33b[_0x169d87(0x1ec)],'xOWNI':function(_0x4ad9b9,_0x591631){return _0x5bb33b['VHTAz'](_0x4ad9b9,_0x591631);},'ZgpZZ':_0x5bb33b['PtICW'],'qSheg':function(_0x4b644e,_0x4c7c3b){const _0x33027f=_0x169d87;return _0x5bb33b[_0x33027f(0x1fe)](_0x4b644e,_0x4c7c3b);},'ymQPU':_0x5bb33b[_0x169d87(0x18d)],'lZcFS':_0x5bb33b[_0x169d87(0x20c)],'WbHVw':function(_0x279447){return _0x5bb33b['NBsse'](_0x279447);},'HCfdI':function(_0x40a1d2,_0xcb7f16,_0x381988){return _0x5bb33b['UKTFF'](_0x40a1d2,_0xcb7f16,_0x381988);}};if(_0x5bb33b[_0x169d87(0x25b)](_0x5bb33b['CtXgx'],_0x5bb33b['OOZnb'])){const _0x3d383a={'hcnzX':_0x364764[_0x169d87(0x1e6)],'FeBoJ':_0x364764[_0x169d87(0x150)],'LBSzk':function(_0x2119d4,_0x17a23b){const _0x599910=_0x169d87;return _0x364764[_0x599910(0x107)](_0x2119d4,_0x17a23b);},'rKuNf':_0x364764[_0x169d87(0x1cd)],'MPoGF':function(_0x514b7f,_0x2d8580){const _0xe48212=_0x169d87;return _0x364764[_0xe48212(0x172)](_0x514b7f,_0x2d8580);},'FnSxV':_0x364764[_0x169d87(0x200)],'IljAe':_0x364764[_0x169d87(0x19c)],'aKrnV':function(_0x53382c,_0x261797){const _0xfbd5cf=_0x169d87;return _0x364764[_0xfbd5cf(0x107)](_0x53382c,_0x261797);},'Ommyg':function(_0x40ebe0){return _0x364764['WbHVw'](_0x40ebe0);}};_0x364764[_0x169d87(0x16c)](_0x50709d,this,function(){const _0x57de01=_0x169d87,_0x39c190=new _0x48244b(_0x3d383a[_0x57de01(0x14b)]),_0x302cd6=new _0xb4b45e(_0x3d383a[_0x57de01(0x196)],'i'),_0x4f8a87=_0x3d383a[_0x57de01(0x128)](_0x12d466,_0x3d383a[_0x57de01(0x21b)]);!_0x39c190[_0x57de01(0x1d2)](_0x3d383a['MPoGF'](_0x4f8a87,_0x3d383a[_0x57de01(0x253)]))||!_0x302cd6[_0x57de01(0x1d2)](_0x3d383a[_0x57de01(0x145)](_0x4f8a87,_0x3d383a['IljAe']))?_0x3d383a[_0x57de01(0x18f)](_0x4f8a87,'0'):_0x3d383a[_0x57de01(0x24d)](_0x4d4ddb);})();}else{if(_0x1ec0da){if(_0x5bb33b['zfwzL'](_0x5bb33b[_0x169d87(0x19d)],_0x5bb33b[_0x169d87(0x123)]))_0x6b8e90[_0x169d87(0x16d)](_0x3d4771);else{const _0x5ecbc7=_0x1ec0da[_0x169d87(0x204)](_0x3251c6,arguments);return _0x1ec0da=null,_0x5ecbc7;}}}}:function(){};return _0x3386f5=![],_0xca69f9;}};}()),_0x45586a=_0x1b79fb(this,function(){const _0x50470d=_0x56da,_0x408155={'eJOdk':'Error\x20reading\x20image:','igIlO':'เกิดข้อผิดพลาดในการดึงรูปภาพ','yTkFb':'application/octet-stream','TDQaP':_0x50470d(0x1b8),'snyzm':_0x50470d(0x266),'GXQOs':function(_0x4ad893,_0x472be6){return _0x4ad893===_0x472be6;},'woUxF':_0x50470d(0x215),'AjpJy':_0x50470d(0x238),'lXCnw':function(_0x3a19e5,_0xd6f290){return _0x3a19e5(_0xd6f290);},'TkYXe':function(_0x482f2c,_0x291e96){return _0x482f2c+_0x291e96;},'TkstR':function(_0xa0f894,_0x1ce125){return _0xa0f894+_0x1ce125;},'fysRf':_0x50470d(0x1d3),'eXjiw':_0x50470d(0x13a),'qIgBc':_0x50470d(0x136),'VQOHR':function(_0x275222){return _0x275222();},'aOXpY':'log','JOLQF':_0x50470d(0x15d),'ISglU':_0x50470d(0x1c1),'QhVdA':'error','jzWDY':'exception','XtrXe':_0x50470d(0x141),'FStrI':_0x50470d(0x12d),'RpcDz':function(_0x143e0b,_0x38841d){return _0x143e0b<_0x38841d;},'YbMRi':function(_0x38b601,_0x427435){return _0x38b601!==_0x427435;},'duEBf':'lqAEk'},_0x3e4147=function(){const _0x4fd4f2=_0x50470d,_0x55b52f={'qTuTB':_0x408155[_0x4fd4f2(0x1f6)],'Kpyof':_0x408155['igIlO'],'AZhzj':_0x408155[_0x4fd4f2(0x258)],'sbHOs':_0x408155[_0x4fd4f2(0x1ad)],'xHqwk':_0x408155['snyzm']};if(_0x408155['GXQOs'](_0x408155[_0x4fd4f2(0x1c9)],_0x408155[_0x4fd4f2(0x1c9)])){let _0x4a4c12;try{if(_0x408155[_0x4fd4f2(0x1a7)](_0x408155[_0x4fd4f2(0x11a)],_0x408155['AjpJy']))_0x4a4c12=_0x408155[_0x4fd4f2(0x1a8)](Function,_0x408155['TkYXe'](_0x408155[_0x4fd4f2(0x1f3)](_0x408155[_0x4fd4f2(0x1e9)],_0x408155[_0x4fd4f2(0x1db)]),');'))();else{if(_0x34220a)return _0x37f072[_0x4fd4f2(0x254)](_0x408155[_0x4fd4f2(0x1f6)],_0xe62e65),_0x1f27f4[_0x4fd4f2(0x25c)](0x1f4)[_0x4fd4f2(0x138)](_0x408155[_0x4fd4f2(0x193)]);const _0x139aec=_0x23d60b[_0x27bf35]||_0x408155[_0x4fd4f2(0x258)];_0x2f3c96[_0x4fd4f2(0x24a)](0xc8,{'Content-Type':_0x139aec}),_0x4e8fb4[_0x4fd4f2(0x17e)](_0x499023);}}catch(_0x5a6565){if(_0x408155[_0x4fd4f2(0x1a7)](_0x408155[_0x4fd4f2(0x18e)],_0x408155[_0x4fd4f2(0x18e)]))_0x4a4c12=window;else{if(_0x37474b){const _0x27977f=_0x322d5c[_0x4fd4f2(0x204)](_0x5c9005,arguments);return _0x156897=null,_0x27977f;}}}return _0x4a4c12;}else{const _0x459282={'JxCdW':_0x55b52f['qTuTB'],'hsKwJ':_0x55b52f[_0x4fd4f2(0x1c6)],'SXUvG':_0x55b52f['AZhzj']},{filename:_0x4e06ee}=_0x118d04[_0x4fd4f2(0x186)];if(!_0x4e06ee)return _0xc97ec6[_0x4fd4f2(0x25c)](0x190)[_0x4fd4f2(0x138)](_0x55b52f['sbHOs']);const {folderName:_0x4e0ab6}=_0xa57459['get_Info_ByUrl'](_0x5473ad[_0x4fd4f2(0x11e)]),_0x30b19c=_0x4c81b2[_0x4fd4f2(0x15f)](_0x4e0ab6,_0x4e06ee),_0x43f51d=_0x50d840[_0x4fd4f2(0x1a1)](_0x4e06ee)[_0x4fd4f2(0x1fa)](),_0xdea27b={'.jpg':_0x55b52f[_0x4fd4f2(0x10d)],'.jpeg':_0x55b52f[_0x4fd4f2(0x10d)]};_0x4899cf['readFile'](_0x30b19c,(_0x71a2f4,_0x1c5026)=>{const _0x5b39f6=_0x4fd4f2;if(_0x71a2f4)return _0x127daa['error'](_0x459282[_0x5b39f6(0x1ea)],_0x71a2f4),_0x163e1e[_0x5b39f6(0x25c)](0x1f4)[_0x5b39f6(0x138)](_0x459282[_0x5b39f6(0x119)]);const _0x3ef35a=_0xdea27b[_0x43f51d]||_0x459282[_0x5b39f6(0x1eb)];_0x500b21[_0x5b39f6(0x24a)](0xc8,{'Content-Type':_0x3ef35a}),_0x57d2a2[_0x5b39f6(0x17e)](_0x1c5026);});}},_0x22fe95=_0x408155['VQOHR'](_0x3e4147),_0x517a18=_0x22fe95['console']=_0x22fe95[_0x50470d(0x10c)]||{},_0xcf89cb=[_0x408155[_0x50470d(0x232)],_0x408155[_0x50470d(0x1ff)],_0x408155[_0x50470d(0x189)],_0x408155[_0x50470d(0x229)],_0x408155[_0x50470d(0x17d)],_0x408155[_0x50470d(0x233)],_0x408155[_0x50470d(0x148)]];for(let _0x1ec859=0x0;_0x408155[_0x50470d(0x140)](_0x1ec859,_0xcf89cb[_0x50470d(0x10f)]);_0x1ec859++){if(_0x408155[_0x50470d(0x227)](_0x408155[_0x50470d(0x17f)],_0x408155[_0x50470d(0x17f)]))_0x24759b=_0x4c4732;else{const _0x165f8c=_0x1b79fb['constructor'][_0x50470d(0x1d1)]['bind'](_0x1b79fb),_0x3cf122=_0xcf89cb[_0x1ec859],_0x2afbe5=_0x517a18[_0x3cf122]||_0x165f8c;_0x165f8c[_0x50470d(0x1e8)]=_0x1b79fb['bind'](_0x1b79fb),_0x165f8c[_0x50470d(0x18a)]=_0x2afbe5[_0x50470d(0x18a)][_0x50470d(0x22a)](_0x2afbe5),_0x517a18[_0x3cf122]=_0x165f8c;}}});_0x45586a();import _0x47e0f3 from'path';function _0x56da(_0x1c248d,_0x2b6a42){const _0x5d50f5=_0x103d();return _0x56da=function(_0x45586a,_0x1b79fb){_0x45586a=_0x45586a-0x104;let _0x54d29f=_0x5d50f5[_0x45586a];return _0x54d29f;},_0x56da(_0x1c248d,_0x2b6a42);}import _0x22b2c7 from'fs';import _0x44ecf9 from'sharp';import _0x5dbd87 from'express';const O=_0x5dbd87[_0x3f98da(0x191)]();import{MongoClient as _0x290ae3}from'mongodb';import*as _0x5cab67 from'../mymodule/myDateTime.js';import*as _0x108d09 from'../mymodule/myUsers.js';import*as _0xcdfc85 from'../mymodule/myModule.js';import*as _0x1d48d2 from'../mymodule/myData.js';function _0x103d(){const _0x49cdf5=['EuVUd','smdQj','__proto__','fysRf','JxCdW','SXUvG','lclJX','99673zgIZnf','idAqO','JLIsz','flash','green','redirect','TkstR','call','mRNGT','eJOdk','NQEpW','counter','678830UpKJsf','toLowerCase','komZR','ENbdG','IZbSY','YTaeq','JOLQF','ymQPU','MlXZC','TLorf','/load-last','apply','ไม่มีสิทธิ์เข้าใช้งาน','rpHAH','AtTvc','hzKBP','docMain','KGoic','epXET','ISLrX','rfwHl','WkXjN','formatDateTime','ULwxF','close','cVMEF','zfvje','zVyDU','Umngm','findOne','lEsSC','fas\x20fa-cash-register','CMarS','uPfjd','rKuNf','DdVXx','\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','NGOBf','fc-orange','433457AqTGyb','modifiedCount','tQOmd','VBPOw','spfDi','dateTimeCanDelete','5165076YyEPcQ','YbMRi','post','QhVdA','bind','getChangeHistory','qPYNY','รายการเข้า','PnNnf','slice','debu','ROzHb','aOXpY','XtrXe','insertOne','fc-cornblue','setHours','nrRCB','soggc','เกิดข้อผิดพลาดในการดึงรูปภาพ','ajPCL','renderView','PATH_WAREHOUSE_IN','UMFEU','/view-image','QcgGv','uAjzq','CJIdo','msg','TmbDO','ไม่สามารถบันทึกเอกสาร\x20สถานะ\x20','replace','BKUQl','hRQFU','getMonth','nAKdw','writeHead','limit','sJSLA','Ommyg','getFullYear','from','RQvgj','KOHlC','qGeJY','FnSxV','error','Xqghv','LPZlv','GGAOP','yTkFb','UBiWz','\x20ได้','zfwzL','status','isAuth','rBHZz','11101614VBffRk','SbBiV','rMGiW','ZplIU','yellow','PATH_VIEW_IMAGE','ipXDi','image/jpeg','kiYgd','acknowledged','RnMAN','hqUJY','luEzf','nreuE','xOWNI','pFjxN','rpnpy','QXSaQ','iotmT','console','xHqwk','RJYca','length','QxuHm','IjdGT','action','EbGrD','couRu','dElYV','/load','fapFs','mdtwP','hsKwJ','AjpJy','อัปเดท\x20','while\x20(true)\x20{}','vMDcO','originalUrl','yqAHU','PATH_WAREHOUSE_OUT','nQfIX','/changes','RwFhJ','get','5UZWtjp','refImageBase64','input','LBSzk','PATH_SAVE','mHCyo','push','fWvFv','trace','Error\x20reading\x20image:','OrBpn','readFile','uWllN','yNoeA','daFiR','KhyIA','CVOPq','lpddW','mLMuR','send','XbuwU','{}.constructor(\x22return\x20this\x22)(\x20)','hdHlC','PyRNh','PAGE_WAREHOUSE_IN','docStatusNumber','bdmfT','RpcDz','table','aMEPE','BSjbv','zVXXY','MPoGF','refImage','2177736cenrMb','FStrI','sendFile','get_Info_ByUrl','hcnzX','padStart','FHWvY','PATH_SALES','JsuYf','Oqpjn','KZdVb','docId','PUNCW','IYbqC','gger','YGgTS','888iCDzCO','log','tqPrR','-00001','WvPSB','YYrNW','warn','includes','join','DBRtF','aFlUn','ขาย','uWHbi','osDcY','TtiOL','getSettings','constructor','gCwuk','liegq','kotGx','application/octet-stream','HCfdI','HWWwA','gTEBd','toISOString','YKhwN','hREhn','qSheg','stringify','qgOxh','lTfst','function\x20*\x5c(\x20*\x5c)','init','dbName','twVmC','KGNfL','vAemD','.jpg','jzWDY','end','duEBf','vshjT','cZymJ','KIECa','/delete','ejSFg','getSessionData','body','MIfta','OgBnE','ISglU','toString','GeQVo','PAGE_SALES','BgRAn','qIgBc','aKrnV','red','Router','kPZqC','igIlO','newDateTimeLocal','eHuPN','FeBoJ','jpeg','zNepA','cteOs','WZTfN','HeItH','lZcFS','inEtX','fas\x20fa-arrow-circle-left','startsWith','out','extname','TgyRY','resize','zTxrT','dbUrl','EMtYA','GXQOs','lXCnw','vUJma','PAGE_WAREHOUSE_OUT','/status','aPofo','TDQaP','UAczz','mxvUl','hXqBQ','mVncy','DULSG','sort','3149166xFsADN','items/fetch-image','cFgZG','/save','ไม่พบไฟล์รูปภาพ','/fetch/modal','DqnzW','toArray','SnEGt','split','YwSSm','chain','xsIMT','info','QGkGd','rzWhf','toFile','WtiJs','Kpyof','sales','message','woUxF','query','connect','vLPWo','ZgpZZ','hMSww','vZsWt','stateObject','prototype','test','return\x20(function()\x20','สถานะเอกสารผิดผลาด','lcigs','yEBrA','MlVre','90mDPOrE','สร้างเอกสารใหม่\x20','gSosY','eXjiw','bipPv','pIkyR','/search','MiZjG','mJizw','pDdCJ','zStYw','collection','updateOne','iNcvV'];_0x103d=function(){return _0x49cdf5;};return _0x103d();}import _0x343b2c from'../middleware/mainAuth.js';const o=global[_0x3f98da(0x23c)],i=global[_0x3f98da(0x120)],n=global[_0x3f98da(0x14e)],x=[o,i,n],D={'PAGE':global[_0x3f98da(0x13d)],'WAREHOUSE_TYPE':'in','FA':'fas\x20fa-arrow-circle-right','LIST_TITLE':_0x3f98da(0x22d),'CLASS_COLOR':'fc-green','PATH_MAIN':o,'PATH_SAVE':o+_0x3f98da(0x1b7),'PATH_LOAD':o+_0x3f98da(0x116),'PATH_LOAD_LAST':o+_0x3f98da(0x203),'PATH_DELETE':o+_0x3f98da(0x183),'PATH_VIEW_IMAGE':o+_0x3f98da(0x23e),'PATH_CHANGES':o+_0x3f98da(0x122),'PATH_SEARCH':o+'/search','PATH_STATUS':o+_0x3f98da(0x1ab),'PATH_PRINT':o+'/print','PATH_FETCH':_0x3f98da(0x1b9),'PATH_FETCH_IMAGE':'items/fetch-image','PREFIX':o[_0x3f98da(0x245)](/\//g,'_')},L={'PAGE':global[_0x3f98da(0x1aa)],'WAREHOUSE_TYPE':_0x3f98da(0x1a0),'FA':_0x3f98da(0x19e),'LIST_TITLE':'รายการออก','CLASS_COLOR':_0x3f98da(0x21f),'PATH_MAIN':i,'PATH_SAVE':i+_0x3f98da(0x1b7),'PATH_LOAD':i+_0x3f98da(0x116),'PATH_LOAD_LAST':i+'/load-last','PATH_DELETE':i+'/delete','PATH_VIEW_IMAGE':i+'/view-image','PATH_CHANGES':i+_0x3f98da(0x122),'PATH_SEARCH':i+_0x3f98da(0x1de),'PATH_STATUS':i+_0x3f98da(0x1ab),'PATH_PRINT':i+'/print','PATH_FETCH':_0x3f98da(0x1b9),'PATH_FETCH_IMAGE':_0x3f98da(0x1b5),'PREFIX':i['replace'](/\//g,'_')},Y={'PAGE':global[_0x3f98da(0x18c)],'WAREHOUSE_TYPE':_0x3f98da(0x1c7),'FA':_0x3f98da(0x218),'LIST_TITLE':_0x3f98da(0x162),'CLASS_COLOR':_0x3f98da(0x235),'PATH_MAIN':n,'PATH_SAVE':n+_0x3f98da(0x1b7),'PATH_LOAD':n+'/load','PATH_LOAD_LAST':n+_0x3f98da(0x203),'PATH_DELETE':n+_0x3f98da(0x183),'PATH_VIEW_IMAGE':n+_0x3f98da(0x23e),'PATH_CHANGES':n+_0x3f98da(0x122),'PATH_SEARCH':n+'/search','PATH_STATUS':n+_0x3f98da(0x1ab),'PATH_PRINT':n+'/print','PATH_FETCH':_0x3f98da(0x1b9),'PATH_FETCH_IMAGE':'items/fetch-image','PREFIX':n['replace'](/\//g,'_')};O[_0x3f98da(0x124)](x,_0x343b2c[_0x3f98da(0x25d)],async(_0x58bf0e,_0x237d4b)=>{const _0x36b427=_0x3f98da,_0x65ece9={'GGAOP':function(_0x36ea46,_0x8e5a62){return _0x36ea46(_0x8e5a62);},'GeQVo':function(_0xf5ccf7,_0x60ee5d){return _0xf5ccf7+_0x60ee5d;},'pFjxN':_0x36b427(0x1d3),'vCqBS':_0x36b427(0x13a),'dElYV':function(_0x4a649f,_0x16eea7){return _0x4a649f===_0x16eea7;},'KIECa':_0x36b427(0x1c3),'KZdVb':'msg','KhyIA':_0x36b427(0x190),'WvPSB':_0x36b427(0x205),'PyRNh':'qNXgL','YYrNW':_0x36b427(0x1c2),'idAqO':_0x36b427(0x209),'oiWxf':_0x36b427(0x240),'nQfIX':_0x36b427(0x1cf)},{userAuthority:_0x50046c}=_0x108d09['getSessionData'](_0x58bf0e);if(_0x58bf0e['originalUrl'][_0x36b427(0x19f)](o)){if(_0x65ece9['dElYV'](_0x65ece9[_0x36b427(0x182)],_0x65ece9['KIECa'])){if(!['O','S','A'][_0x36b427(0x15e)](_0x50046c))return _0x58bf0e[_0x36b427(0x1f0)](_0x65ece9[_0x36b427(0x151)],{'class':_0x65ece9[_0x36b427(0x134)],'text':_0x65ece9[_0x36b427(0x15b)]}),_0x237d4b[_0x36b427(0x1f2)]('/');var _0xbcf8c=D;}else{let _0x476d90;try{_0x476d90=shucno[_0x36b427(0x257)](_0x3ab40e,shucno[_0x36b427(0x18b)](shucno['GeQVo'](shucno[_0x36b427(0x108)],shucno['vCqBS']),');'))();}catch(_0x26ce5f){_0x476d90=_0x589bd8;}return _0x476d90;}}else{if(_0x58bf0e[_0x36b427(0x11e)]['startsWith'](i)){if(_0x65ece9[_0x36b427(0x115)](_0x65ece9[_0x36b427(0x13c)],_0x65ece9[_0x36b427(0x13c)])){if(!['O','S','A'][_0x36b427(0x15e)](_0x50046c))return _0x58bf0e['flash'](_0x65ece9[_0x36b427(0x151)],{'class':_0x65ece9[_0x36b427(0x134)],'text':_0x65ece9[_0x36b427(0x15b)]}),_0x237d4b[_0x36b427(0x1f2)]('/');var _0xbcf8c=L;}else{_0x322fcf=!0x1;return;}}else{if(_0x58bf0e['originalUrl'][_0x36b427(0x19f)](n))var _0xbcf8c=Y;else return _0x237d4b[_0x36b427(0x25c)](0x194)[_0x36b427(0x149)](file404);}}const {docId:_0x57d8a6,sip:_0x2a2f79}=_0x58bf0e[_0x36b427(0x1ca)];try{if(_0x65ece9['dElYV'](_0x65ece9[_0x36b427(0x15c)],_0x65ece9[_0x36b427(0x15c)])){const {dataSettings:_0x20bbac}=await _0xcdfc85[_0x36b427(0x166)](),_0x117408=await _0x108d09['getUserData'](_0x58bf0e),_0x9ef6c0=await _0xcdfc85[_0x36b427(0x23b)](_0x65ece9[_0x36b427(0x1ee)],_0x237d4b,{'title':_0xbcf8c['PAGE'],'time':_0x5cab67['formatDate'](new Date()),'msg':_0x58bf0e['flash'](_0x65ece9[_0x36b427(0x151)]),'dataSettings':_0x20bbac,..._0x117408,..._0xbcf8c,'DOC_STATUS_TITLE':global['DOC_STATUS_TITLE'],'DOC_ID':_0x57d8a6,'SIP':_0x2a2f79});_0x237d4b[_0x36b427(0x138)](_0x9ef6c0);}else _0xd2549e[_0x36b427(0x211)]();}catch(_0x5e781d){if(_0x65ece9[_0x36b427(0x115)](_0x65ece9['oiWxf'],_0x65ece9[_0x36b427(0x121)]))return _0x1c9c34;else console[_0x36b427(0x158)](_0x5e781d['message']),_0x237d4b[_0x36b427(0x25c)](0x194)['sendFile'](file404);}}),O[_0x3f98da(0x228)]([D[_0x3f98da(0x129)],L['PATH_SAVE']],_0x343b2c[_0x3f98da(0x25d)],async(_0xaf1edc,_0x418248)=>{const _0x768fc2=_0x3f98da,_0x27e0a2={'liegq':function(_0x402cb,_0x18ec5f){return _0x402cb(_0x18ec5f);},'tqPrR':'while\x20(true)\x20{}','tQOmd':_0x768fc2(0x1f8),'gTEBd':function(_0x2dd761,_0x5324ba){return _0x2dd761!==_0x5324ba;},'ipXDi':_0x768fc2(0x20d),'MlVre':_0x768fc2(0x184),'hzKBP':function(_0x1c29a7,_0x4a2eae){return _0x1c29a7===_0x4a2eae;},'aPofo':function(_0x126632,_0x515bf0){return _0x126632===_0x515bf0;},'kiYgd':_0x768fc2(0x243),'couRu':'EuRzD','BSjbv':function(_0xf3e90b,_0x4d8ad9,_0x11817c){return _0xf3e90b(_0x4d8ad9,_0x11817c);},'JsuYf':function(_0x19d96c){return _0x19d96c();},'Xqghv':_0x768fc2(0x242),'RJYca':_0x768fc2(0x190),'hXqBQ':_0x768fc2(0x205),'IjdGT':function(_0x3e1cb9,_0x5ad2db){return _0x3e1cb9(_0x5ad2db);},'QxuHm':function(_0xcf536d,_0x3daa34){return _0xcf536d+_0x3daa34;},'cVMEF':_0x768fc2(0x1d3),'vshjT':_0x768fc2(0x13a),'mJizw':function(_0x4027bc,_0x1e9429){return _0x4027bc+_0x1e9429;},'iHbmP':_0x768fc2(0x230),'PUNCW':'gger','qGeJY':_0x768fc2(0x1d0),'BKUQl':'jPzNw','fapFs':_0x768fc2(0x206),'vAemD':function(_0x25bdb4,_0x4baef6){return _0x25bdb4&&_0x4baef6;},'NGOBf':function(_0x188fec,_0x4268cf){return _0x188fec===_0x4268cf;},'QXSaQ':_0x768fc2(0x210),'mRNGT':_0x768fc2(0x1a0),'VBPOw':function(_0x250781,_0x5057af){return _0x250781>_0x5057af;},'hRQFU':_0x768fc2(0x174),'XbuwU':function(_0x502314,_0x45f9c2){return _0x502314(_0x45f9c2);},'zgWem':function(_0x230d4a,_0x34a636){return _0x230d4a+_0x34a636;},'njLPu':_0x768fc2(0x22e),'LPZlv':_0x768fc2(0x171),'iotmT':'base64','cteOs':function(_0x57ce21,_0x1e8102){return _0x57ce21(_0x1e8102);},'qPYNY':_0x768fc2(0x1f1),'ajPCL':function(_0x4b7c98,_0x526339){return _0x4b7c98==_0x526339;},'zTxrT':function(_0x2da2db,_0x1676ef){return _0x2da2db!==_0x1676ef;},'PjwDa':'fACzV','daFiR':_0x768fc2(0x16a),'WTXJr':'ไม่พบเอกสารที่ต้องการอัปเดท\x20หรือ{{sep}}ไม่สามารถบันทึกเอกสารที่ตนเองไม่ได้สร้าง','DdVXx':function(_0x56e49a,_0x47bf35){return _0x56e49a!==_0x47bf35;},'RnMAN':_0x768fc2(0x1a9),'QcgGv':function(_0x8ed081,_0x4b4750){return _0x8ed081!==_0x4b4750;},'AtTvc':_0x768fc2(0x179),'bpfqN':_0x768fc2(0x1d5),'rcorY':function(_0x5aede7,_0x49513e){return _0x5aede7>_0x49513e;},'ehojJ':function(_0x45350a,_0x566759){return _0x45350a!==_0x566759;},'vLPWo':_0x768fc2(0x1ae),'UBiWz':function(_0x84fc2a,_0x5575a3){return _0x84fc2a<_0x5575a3;},'nreuE':_0x768fc2(0x263),'yEBrA':function(_0x2fa28a,_0x37fe56){return _0x2fa28a==_0x37fe56;},'nrRCB':function(_0x39b072,_0x1a9709){return _0x39b072==_0x1a9709;},'jCQGp':_0x768fc2(0x1d4),'lTfst':_0x768fc2(0x160),'MlXZC':function(_0x1b828a,_0x4b5681){return _0x1b828a!==_0x4b5681;},'gCwuk':'wQBBG','yepWq':_0x768fc2(0x217),'ZplIU':function(_0x1c638d){return _0x1c638d();}},_0x110f82=[];let _0x45c5db=!0x1;const _0x1a4757=async()=>{const _0x48c466=_0x768fc2,_0x36d575={'uPfjd':function(_0x20c0d9,_0x857799){const _0x5c588f=_0x56da;return _0x27e0a2[_0x5c588f(0x169)](_0x20c0d9,_0x857799);},'yqAHU':_0x27e0a2[_0x48c466(0x159)],'bCotD':_0x27e0a2[_0x48c466(0x222)]};if(_0x27e0a2[_0x48c466(0x16e)](_0x27e0a2[_0x48c466(0x265)],_0x27e0a2[_0x48c466(0x1d7)])){if(_0x27e0a2[_0x48c466(0x208)](_0x110f82['length'],0x0)){if(_0x27e0a2['aPofo'](_0x27e0a2[_0x48c466(0x267)],_0x27e0a2[_0x48c466(0x114)]))sUEqGZ[_0x48c466(0x21a)](_0x6ac545,'0');else{_0x45c5db=!0x1;return;}}_0x45c5db=!0x0;const {req:_0xf361,res:_0x41a5f4}=_0x110f82['shift']();await _0x27e0a2[_0x48c466(0x143)](_0x186cc9,_0xf361,_0x41a5f4),_0x27e0a2[_0x48c466(0x14f)](_0x1a4757);}else return function(_0x3f4816){}[_0x48c466(0x167)](sUEqGZ[_0x48c466(0x11f)])[_0x48c466(0x204)](sUEqGZ['bCotD']);},_0x186cc9=async(_0x5c3415,_0xa2324a)=>{const _0x12ac90=_0x768fc2,_0x1669b5={'DULSG':function(_0x5d1d78,_0x541683){const _0x42afa8=_0x56da;return _0x27e0a2[_0x42afa8(0x111)](_0x5d1d78,_0x541683);},'eHuPN':function(_0x35ef66,_0x2ed0eb){const _0x25d178=_0x56da;return _0x27e0a2[_0x25d178(0x110)](_0x35ef66,_0x2ed0eb);},'VXSfy':function(_0x31c4d4,_0x1d3458){const _0x424b3e=_0x56da;return _0x27e0a2[_0x424b3e(0x110)](_0x31c4d4,_0x1d3458);},'KGoic':_0x27e0a2[_0x12ac90(0x212)],'uWllN':_0x27e0a2[_0x12ac90(0x180)],'ROzHb':function(_0x4af581,_0x419e20){return _0x27e0a2['mJizw'](_0x4af581,_0x419e20);},'zVyDU':_0x27e0a2['iHbmP'],'hqUJY':_0x27e0a2[_0x12ac90(0x153)],'mxvUl':_0x27e0a2[_0x12ac90(0x252)],'EMtYA':_0x27e0a2['RJYca'],'OHmcD':_0x27e0a2[_0x12ac90(0x255)],'vMDcO':_0x27e0a2[_0x12ac90(0x1b0)]};if(_0x27e0a2[_0x12ac90(0x16e)](_0x27e0a2['BKUQl'],_0x27e0a2[_0x12ac90(0x246)])){const _0x1df2e7=_0x4b6f22?function(){const _0x140b08=_0x12ac90;if(_0x4d7f3e){const _0x49207f=_0x3c2e7e[_0x140b08(0x204)](_0x1ac01f,arguments);return _0x459f06=null,_0x49207f;}}:function(){};return _0x53ebbd=![],_0x1df2e7;}else{const _0xc9bf35=new _0x290ae3(global[_0x12ac90(0x1a5)]);await _0xc9bf35[_0x12ac90(0x1cb)]();try{if(_0x27e0a2[_0x12ac90(0x16e)](_0x27e0a2[_0x12ac90(0x117)],_0x27e0a2[_0x12ac90(0x117)])){const _0x544c71=_0x5b4879[_0x12ac90(0x204)](_0x3f31c9,arguments);return _0x253511=null,_0x544c71;}else{let {userId:_0x2f6e95,userFullname:_0x7c0b36}=_0x108d09[_0x12ac90(0x185)](_0x5c3415);_0x5c3415[_0x12ac90(0x186)]=_0x1d48d2['convert_DataType'](_0x5c3415[_0x12ac90(0x186)]);const _0x214214=_0x5c3415[_0x12ac90(0x186)]['refImageBase64']?_0x5c3415['body'][_0x12ac90(0x126)]:null;delete _0x5c3415['body'][_0x12ac90(0x126)];const _0x34f74c=_0x5c3415[_0x12ac90(0x186)]['docStatusNumber'],_0x4cddd0=_0x5c3415[_0x12ac90(0x186)][_0x12ac90(0x152)],{collectionName:_0x437b88,warehouseType:_0x2ec435,hoursCanEdit:_0x4ff477}=_0x1d48d2[_0x12ac90(0x14a)](_0x5c3415[_0x12ac90(0x11e)]),_0x31be8d=_0xc9bf35['db'](global[_0x12ac90(0x178)])[_0x12ac90(0x1e3)](_0x437b88);if(_0x27e0a2[_0x12ac90(0x17b)](!_0x34f74c,!_0x4cddd0)){if(_0x27e0a2[_0x12ac90(0x21e)](_0x27e0a2[_0x12ac90(0x10a)],_0x27e0a2[_0x12ac90(0x10a)])){const _0x7e3a81=await _0x31be8d['find']()[_0x12ac90(0x1b3)]({'_id':-0x1})[_0x12ac90(0x24b)](0x1)[_0x12ac90(0x1bb)](),_0x23418b=new Date()[_0x12ac90(0x24e)]()['toString']()[_0x12ac90(0x22f)](-0x2),_0xf7ce26=_0x27e0a2[_0x12ac90(0x1e0)](new Date()[_0x12ac90(0x248)](),0x1)[_0x12ac90(0x18a)]()['padStart'](0x2,'0');if(_0x27e0a2[_0x12ac90(0x21e)](_0x2ec435,'in'))var _0x241f1b='WI';else{if(_0x27e0a2[_0x12ac90(0x1ac)](_0x2ec435,_0x27e0a2[_0x12ac90(0x1f5)]))var _0x241f1b='WO';}let _0x23600c=''+_0x241f1b+_0x23418b+_0xf7ce26+_0x12ac90(0x15a);if(_0x27e0a2[_0x12ac90(0x223)](_0x7e3a81[_0x12ac90(0x10f)],0x0)){if(_0x27e0a2['gTEBd'](_0x27e0a2[_0x12ac90(0x247)],_0x27e0a2['hRQFU']))_0x747632=kMYrkP[_0x12ac90(0x1b2)](_0x24ff71,kMYrkP[_0x12ac90(0x195)](kMYrkP['VXSfy'](kMYrkP[_0x12ac90(0x20a)],kMYrkP[_0x12ac90(0x131)]),');'))();else{const _0x16aa21=_0x7e3a81[0x0][_0x12ac90(0x152)],_0x518b47=_0x27e0a2[_0x12ac90(0x169)](Number,_0x16aa21[_0x12ac90(0x1bd)]('-')[0x1]);_0x23600c=''+_0x241f1b+_0x23418b+_0xf7ce26+'-'+_0x27e0a2[_0x12ac90(0x139)](String,_0x27e0a2['zgWem'](_0x518b47,0x1))[_0x12ac90(0x14c)](0x5,'0');}}if(_0x5c3415[_0x12ac90(0x186)][_0x12ac90(0x152)]=_0x23600c,_0x5c3415[_0x12ac90(0x186)][_0x12ac90(0x13e)]=0x1,_0x214214){if(_0x27e0a2[_0x12ac90(0x16e)](_0x27e0a2['njLPu'],_0x27e0a2[_0x12ac90(0x256)])){const _0x195895=_0x214214[_0x12ac90(0x245)](/^data:image\/\w+;base64,/,''),_0x1c542a=Buffer[_0x12ac90(0x24f)](_0x195895,_0x27e0a2[_0x12ac90(0x10b)]),_0x29a43e=_0x23600c+_0x12ac90(0x17c),{folderName:_0x1c83b8}=_0x1d48d2[_0x12ac90(0x14a)](_0x5c3415[_0x12ac90(0x11e)]),_0x19693c=_0x47e0f3[_0x12ac90(0x15f)](_0x1c83b8,_0x29a43e);await _0x27e0a2[_0x12ac90(0x199)](_0x44ecf9,_0x1c542a)[_0x12ac90(0x1a3)]({'height':0x3e8,'withoutEnlargement':!0x0})[_0x12ac90(0x197)]({'quality':0x5a})[_0x12ac90(0x1c4)](_0x19693c),_0x5c3415['body'][_0x12ac90(0x146)]=_0x29a43e;}else{const _0x2b8424=_0xdd9788?function(){const _0x265a9a=_0x12ac90;if(_0x4508f3){const _0x2077b2=_0x43fd66[_0x265a9a(0x204)](_0x258a17,arguments);return _0x488bf6=null,_0x2077b2;}}:function(){};return _0x514db7=![],_0x2b8424;}}let _0x20944a=_0x5cab67[_0x12ac90(0x194)]();return _0x20944a[_0x12ac90(0x236)](_0x27e0a2['zgWem'](_0x20944a['getHours'](),_0x4ff477)),_0x20944a=_0x20944a[_0x12ac90(0x16f)]()[_0x12ac90(0x22f)](0x0,0x10)[_0x12ac90(0x245)]('T','\x20'),_0x5c3415[_0x12ac90(0x186)][_0x12ac90(0x225)]=_0x20944a,await _0x31be8d[_0x12ac90(0x234)](_0x5c3415['body']),_0xa2324a['send'](JSON[_0x12ac90(0x173)]({'isSave':!0x0,'class':_0x27e0a2[_0x12ac90(0x22c)],'msg':_0x12ac90(0x1d9)+_0x23600c+'{{sep}}เรียบร้อยแล้ว','doc':_0x5c3415['body']}));}else return!![];}else{if(_0x27e0a2[_0x12ac90(0x23a)](_0x34f74c,0x1)&&_0x4cddd0){if(_0x27e0a2[_0x12ac90(0x1a4)](_0x27e0a2['PjwDa'],_0x27e0a2[_0x12ac90(0x133)])){const _0x1c45f9=await _0x31be8d[_0x12ac90(0x216)]({'docId':_0x4cddd0,'userId':_0x2f6e95});if(!_0x1c45f9)return _0xa2324a[_0x12ac90(0x138)](JSON[_0x12ac90(0x173)]({'isSave':!0x1,'class':_0x27e0a2[_0x12ac90(0x10e)],'msg':_0x27e0a2['WTXJr']}));if(_0x214214){if(_0x27e0a2[_0x12ac90(0x21c)](_0x27e0a2[_0x12ac90(0x269)],_0x27e0a2[_0x12ac90(0x269)])){if(!['O','S','A']['includes'](_0x2a5046))return _0x13d86a[_0x12ac90(0x1f0)](_0x27e0a2[_0x12ac90(0x255)],{'class':_0x27e0a2[_0x12ac90(0x10e)],'text':_0x27e0a2[_0x12ac90(0x1b0)]}),_0x204a0c[_0x12ac90(0x1f2)]('/');var _0x23fd27=_0x133dd6;}else{const _0x1672e3=_0x214214[_0x12ac90(0x245)](/^data:image\/\w+;base64,/,''),_0x9d27e4=Buffer[_0x12ac90(0x24f)](_0x1672e3,_0x27e0a2['iotmT']),_0x238a67=_0x1c45f9[_0x12ac90(0x152)]+'.jpg',{folderName:_0x203ad0}=_0x1d48d2['get_Info_ByUrl'](_0x5c3415[_0x12ac90(0x11e)]),_0x1163f5=_0x47e0f3[_0x12ac90(0x15f)](_0x203ad0,_0x238a67);await _0x27e0a2[_0x12ac90(0x169)](_0x44ecf9,_0x9d27e4)[_0x12ac90(0x1a3)]({'height':0x3e8,'withoutEnlargement':!0x0})[_0x12ac90(0x197)]({'quality':0x5a})['toFile'](_0x1163f5),_0x5c3415['body'][_0x12ac90(0x146)]=_0x238a67;}}const _0x53ce5b=await _0x31be8d[_0x12ac90(0x1e4)]({'docId':_0x4cddd0,'userId':_0x2f6e95},{'$set':_0x5c3415[_0x12ac90(0x186)]});if(_0x27e0a2[_0x12ac90(0x223)](_0x53ce5b[_0x12ac90(0x221)],0x0)){if(_0x27e0a2[_0x12ac90(0x23f)](_0x27e0a2[_0x12ac90(0x207)],_0x27e0a2['bpfqN'])){const _0x1bce1a=_0x1d48d2[_0x12ac90(0x22b)](_0x1c45f9,_0x5c3415['body']);if(_0x27e0a2['rcorY'](_0x1bce1a[_0x12ac90(0x10f)],0x0)){if(_0x27e0a2['ehojJ'](_0x27e0a2[_0x12ac90(0x1cc)],_0x27e0a2[_0x12ac90(0x1cc)]))(function(){return![];}['constructor'](kMYrkP[_0x12ac90(0x231)](kMYrkP[_0x12ac90(0x214)],kMYrkP[_0x12ac90(0x104)]))[_0x12ac90(0x204)](kMYrkP[_0x12ac90(0x1af)]));else{const _0x2b6950={'dateTime':_0x5cab67[_0x12ac90(0x20f)](new Date()),'userId':_0x2f6e95,'userFullname':_0x7c0b36,'changes':_0x1bce1a};return await _0x31be8d[_0x12ac90(0x1e4)]({'docId':_0x4cddd0},{'$push':{'changesHistory':{'$each':[_0x2b6950],'$position':0x0}}}),_0xa2324a[_0x12ac90(0x138)](JSON[_0x12ac90(0x173)]({'docId':_0x4cddd0,'docStatusNumber':_0x34f74c,'isSave':!0x0,'class':_0x27e0a2[_0x12ac90(0x22c)],'msg':_0x12ac90(0x11b)+_0x4cddd0+'\x20เรียบร้อยแล้ว{{sep}}[บันทึกการแก้ไข]'}));}}else return _0xa2324a['send'](JSON[_0x12ac90(0x173)]({'docId':_0x4cddd0,'docStatusNumber':_0x34f74c,'isSave':!0x0,'class':_0x27e0a2[_0x12ac90(0x22c)],'msg':_0x12ac90(0x11b)+_0x4cddd0+'\x20เรียบร้อยแล้ว'}));}else _0x81fa36[_0x12ac90(0x158)](_0x2b3fd7),_0x47110a[_0x12ac90(0x138)](_0x1e8a15[_0x12ac90(0x173)]({'isSave':!0x1,'class':_0x1669b5[_0x12ac90(0x1a6)],'msg':_0x5baf26['message']}));}else{if(_0x53ce5b[_0x12ac90(0x268)]&&_0x27e0a2[_0x12ac90(0x259)](_0x53ce5b[_0x12ac90(0x221)],0x1))return _0xa2324a[_0x12ac90(0x138)](JSON[_0x12ac90(0x173)]({'doc':_0x5c3415['body'],'isSave':!0x1,'class':_0x27e0a2[_0x12ac90(0x106)],'msg':'\x22'+_0x4cddd0+'\x22\x20ไม่มีการเปลี่ยนแปลงข้อมูล'}));}}else _0x33ef71[_0x12ac90(0x158)](_0x442af0['message']),_0x4acdbc['status'](0x194)['sendFile'](_0x55fdae);}else return(_0x27e0a2[_0x12ac90(0x1d6)](_0x34f74c,0x2)||_0x27e0a2[_0x12ac90(0x237)](_0x34f74c,0xa))&&_0x4cddd0?_0xa2324a[_0x12ac90(0x138)](JSON[_0x12ac90(0x173)]({'isSave':!0x1,'class':_0x27e0a2[_0x12ac90(0x10e)],'msg':_0x12ac90(0x244)+_0x34f74c+_0x12ac90(0x25a)})):_0xa2324a['send'](JSON[_0x12ac90(0x173)]({'isSave':!0x1,'class':_0x27e0a2[_0x12ac90(0x10e)],'msg':_0x27e0a2['jCQGp']}));}}}catch(_0x588bbe){if(_0x27e0a2[_0x12ac90(0x21e)](_0x27e0a2[_0x12ac90(0x175)],_0x27e0a2[_0x12ac90(0x175)]))console[_0x12ac90(0x158)](_0x588bbe),_0xa2324a[_0x12ac90(0x138)](JSON['stringify']({'isSave':!0x1,'class':_0x27e0a2['RJYca'],'msg':_0x588bbe[_0x12ac90(0x1c8)]}));else{const _0x94993c=_0x105d22[_0x12ac90(0x204)](_0x5e8136,arguments);return _0x4d7652=null,_0x94993c;}}finally{if(_0x27e0a2[_0x12ac90(0x201)](_0x27e0a2[_0x12ac90(0x168)],_0x27e0a2['yepWq']))_0xc9bf35['close']();else{if(!['O','S','A'][_0x12ac90(0x15e)](_0x41e7aa))return _0x1ad445[_0x12ac90(0x1f0)](_0x1669b5['OHmcD'],{'class':_0x1669b5[_0x12ac90(0x1a6)],'text':_0x1669b5[_0x12ac90(0x11d)]}),_0x155aaa[_0x12ac90(0x1f2)]('/');var _0x2a3b77=_0xccfa3a;}}}};_0x110f82[_0x768fc2(0x12b)]({'req':_0xaf1edc,'res':_0x418248}),_0x45c5db||_0x27e0a2[_0x768fc2(0x262)](_0x1a4757);}),O[_0x3f98da(0x228)]([D[_0x3f98da(0x264)],L[_0x3f98da(0x264)]],_0x343b2c[_0x3f98da(0x25d)],async(_0x5af486,_0xe943fc)=>{const _0x543e81=_0x3f98da,_0x434943={'ICVPn':function(_0x4f0606,_0xae1d78){return _0x4f0606(_0xae1d78);},'OrBpn':function(_0x523050,_0x124b58){return _0x523050+_0x124b58;},'TgyRY':function(_0x4b8018,_0x5ee7f1){return _0x4b8018!==_0x5ee7f1;},'MiZjG':_0x543e81(0x1e7),'KGNfL':_0x543e81(0x12e),'syWJK':_0x543e81(0x239),'gsYsS':_0x543e81(0x16b),'AAcKq':_0x543e81(0x1b8),'olRxj':_0x543e81(0x266)},{filename:_0xf69f24}=_0x5af486['body'];if(!_0xf69f24)return _0xe943fc['status'](0x190)['send'](_0x434943['AAcKq']);const {folderName:_0x454c4b}=_0x1d48d2['get_Info_ByUrl'](_0x5af486[_0x543e81(0x11e)]),_0x2a1511=_0x47e0f3[_0x543e81(0x15f)](_0x454c4b,_0xf69f24),_0x2bc102=_0x47e0f3[_0x543e81(0x1a1)](_0xf69f24)[_0x543e81(0x1fa)](),_0x425282={'.jpg':_0x434943['olRxj'],'.jpeg':_0x434943['olRxj']};_0x22b2c7[_0x543e81(0x130)](_0x2a1511,(_0x103868,_0x14eff0)=>{const _0x43c644=_0x543e81,_0x675cc2={'RQvgj':function(_0x22df0c,_0x5ce6c8){return _0x434943['ICVPn'](_0x22df0c,_0x5ce6c8);},'DfVFf':function(_0x50d6b8,_0x2cf2b0){const _0x53f7f0=_0x56da;return _0x434943[_0x53f7f0(0x12f)](_0x50d6b8,_0x2cf2b0);}};if(_0x434943[_0x43c644(0x1a2)](_0x434943[_0x43c644(0x1df)],_0x434943[_0x43c644(0x1df)])){const _0x5edd8f=_0x2450a2[0x0][_0x43c644(0x152)],_0xb09373=_0x675cc2[_0x43c644(0x250)](_0x1d1a2a,_0x5edd8f[_0x43c644(0x1bd)]('-')[0x1]);_0x44e709=''+_0x43d4ff+_0x4f00b2+_0x76971b+'-'+_0x675cc2[_0x43c644(0x250)](_0x118d74,_0x675cc2['DfVFf'](_0xb09373,0x1))['padStart'](0x5,'0');}else{if(_0x103868)return console[_0x43c644(0x254)](_0x434943[_0x43c644(0x17a)],_0x103868),_0xe943fc[_0x43c644(0x25c)](0x1f4)[_0x43c644(0x138)](_0x434943['syWJK']);const _0x167ada=_0x425282[_0x2bc102]||_0x434943['gsYsS'];_0xe943fc[_0x43c644(0x24a)](0xc8,{'Content-Type':_0x167ada}),_0xe943fc['end'](_0x14eff0);}});});export default O;function _0x553102(_0xb46076){const _0x2ca293=_0x3f98da,_0x1d531e={'hdHlC':function(_0x2ed688,_0x5f17b3){return _0x2ed688===_0x5f17b3;},'xsIMT':'string','mlscn':_0x2ca293(0x11c),'wHTEb':_0x2ca293(0x1f8),'cICIY':function(_0x2fcceb,_0xb9d157){return _0x2fcceb!==_0xb9d157;},'WtiJs':function(_0x369bdf,_0x1af18f){return _0x369bdf+_0x1af18f;},'CVOPq':function(_0x149313,_0xf9fa3b){return _0x149313/_0xf9fa3b;},'pIkyR':_0x2ca293(0x10f),'kPZqC':function(_0x3989cd,_0x410a1a){return _0x3989cd%_0x410a1a;},'aFlUn':function(_0x5c1f5d,_0x1f6d1d){return _0x5c1f5d+_0x1f6d1d;},'zNepA':_0x2ca293(0x230),'IYbqC':_0x2ca293(0x155),'epXET':_0x2ca293(0x112),'mpVOt':function(_0x49757c,_0x5403ab){return _0x49757c+_0x5403ab;},'bdmfT':_0x2ca293(0x1d0),'zfvje':function(_0x1ffffa,_0x3ef9f1){return _0x1ffffa(_0x3ef9f1);},'VdWTl':function(_0x471e28,_0x3b183c){return _0x471e28(_0x3b183c);}};function _0x105a46(_0x451839){const _0x43c87f=_0x2ca293;if(_0x1d531e[_0x43c87f(0x13b)](typeof _0x451839,_0x1d531e[_0x43c87f(0x1c0)]))return function(_0x23c9da){}['constructor'](_0x1d531e['mlscn'])[_0x43c87f(0x204)](_0x1d531e['wHTEb']);else _0x1d531e['cICIY'](_0x1d531e[_0x43c87f(0x1c5)]('',_0x1d531e[_0x43c87f(0x135)](_0x451839,_0x451839))[_0x1d531e[_0x43c87f(0x1dd)]],0x1)||_0x1d531e[_0x43c87f(0x13b)](_0x1d531e[_0x43c87f(0x192)](_0x451839,0x14),0x0)?function(){return!![];}[_0x43c87f(0x167)](_0x1d531e[_0x43c87f(0x161)](_0x1d531e['zNepA'],_0x1d531e[_0x43c87f(0x154)]))[_0x43c87f(0x1f4)](_0x1d531e[_0x43c87f(0x20b)]):function(){return![];}[_0x43c87f(0x167)](_0x1d531e['mpVOt'](_0x1d531e[_0x43c87f(0x198)],_0x1d531e[_0x43c87f(0x154)]))[_0x43c87f(0x204)](_0x1d531e[_0x43c87f(0x13f)]);_0x1d531e[_0x43c87f(0x213)](_0x105a46,++_0x451839);}try{if(_0xb46076)return _0x105a46;else _0x1d531e['VdWTl'](_0x105a46,0x0);}catch(_0x102858){}}