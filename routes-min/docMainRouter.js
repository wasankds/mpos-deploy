const _0xc63303=_0x513b;(function(_0x258f8d,_0x2f5b3d){const _0x560ee1=_0x513b,_0x1320dc=_0x258f8d();while(!![]){try{const _0x3ebbda=parseInt(_0x560ee1(0x1ae))/0x1+-parseInt(_0x560ee1(0x21b))/0x2*(parseInt(_0x560ee1(0x205))/0x3)+parseInt(_0x560ee1(0x262))/0x4*(parseInt(_0x560ee1(0x1c6))/0x5)+parseInt(_0x560ee1(0x282))/0x6*(parseInt(_0x560ee1(0x20d))/0x7)+parseInt(_0x560ee1(0x267))/0x8+parseInt(_0x560ee1(0x2d7))/0x9*(parseInt(_0x560ee1(0x280))/0xa)+-parseInt(_0x560ee1(0x1e1))/0xb;if(_0x3ebbda===_0x2f5b3d)break;else _0x1320dc['push'](_0x1320dc['shift']());}catch(_0x29f2b4){_0x1320dc['push'](_0x1320dc['shift']());}}}(_0x404e,0x2a3d1));const _0x204a93=(function(){const _0x59d2ae=_0x513b,_0x43ae34={'mcyDX':_0x59d2ae(0x2f1),'LHPOy':'counter','voPbt':function(_0x4ecf52,_0x12ccca){return _0x4ecf52===_0x12ccca;},'nSLoT':_0x59d2ae(0x21f),'ZnuJJ':_0x59d2ae(0x191),'AOldK':_0x59d2ae(0x2df),'EXltR':'cVNre','ovVjF':function(_0x25dc12,_0x7f51fe){return _0x25dc12===_0x7f51fe;},'cMcNQ':_0x59d2ae(0x231)};let _0x32acd5=!![];return function(_0x56a66a,_0x4fedf7){const _0x1bef80=_0x59d2ae,_0x51c3b1={'VNAVH':_0x43ae34[_0x1bef80(0x2a3)],'RdikX':_0x43ae34['LHPOy'],'WgoiR':function(_0x46e86d,_0x5c792d){const _0x268a76=_0x1bef80;return _0x43ae34[_0x268a76(0x284)](_0x46e86d,_0x5c792d);},'rVwrM':_0x43ae34[_0x1bef80(0x2a0)],'OYfaf':_0x43ae34[_0x1bef80(0x241)],'NaOZh':function(_0x5c8df2,_0xee9bcf){return _0x43ae34['voPbt'](_0x5c8df2,_0xee9bcf);},'FQtkx':_0x43ae34[_0x1bef80(0x27a)],'FMgpa':_0x43ae34['EXltR']};if(_0x43ae34['ovVjF'](_0x43ae34[_0x1bef80(0x203)],_0x43ae34[_0x1bef80(0x203)])){const _0x416b76=_0x32acd5?function(){const _0x397e41=_0x1bef80;if(_0x51c3b1['WgoiR'](_0x51c3b1[_0x397e41(0x1be)],_0x51c3b1[_0x397e41(0x2d9)]))return function(_0x533f34){}[_0x397e41(0x2ba)](_0x51c3b1[_0x397e41(0x16f)])[_0x397e41(0x1ab)](_0x51c3b1[_0x397e41(0x1c8)]);else{if(_0x4fedf7){if(_0x51c3b1[_0x397e41(0x236)](_0x51c3b1['FQtkx'],_0x51c3b1[_0x397e41(0x18d)]))return _0x26f30f;else{const _0x2cc402=_0x4fedf7[_0x397e41(0x1ab)](_0x56a66a,arguments);return _0x4fedf7=null,_0x2cc402;}}}}:function(){};return _0x32acd5=![],_0x416b76;}else _0x4e76b3[_0x1bef80(0x2d5)]();};}());(function(){const _0x274b14=_0x513b,_0x46ca2f={'DFBgS':_0x274b14(0x28b),'bOqXC':function(_0x4189bd,_0x49c177){return _0x4189bd!==_0x49c177;},'yazxH':_0x274b14(0x258),'DmrHl':_0x274b14(0x2b0),'AEiCQ':_0x274b14(0x1c3),'IzMty':function(_0x1ec99f,_0x1329c5){return _0x1ec99f(_0x1329c5);},'McHBL':_0x274b14(0x189),'CmaoY':function(_0x4dee71,_0x564b84){return _0x4dee71+_0x564b84;},'BjSRr':_0x274b14(0x18f),'QKldK':function(_0xcd8375,_0x116c89){return _0xcd8375+_0x116c89;},'IYlol':'input','nBjHT':function(_0x4dbeff,_0x2818ff){return _0x4dbeff!==_0x2818ff;},'cjDNZ':_0x274b14(0x21c),'qeZIF':_0x274b14(0x26c),'voAIB':function(_0x1c2edf,_0x39de9e){return _0x1c2edf===_0x39de9e;},'gRWUA':_0x274b14(0x2f0),'MEhlQ':function(_0x48dcc2){return _0x48dcc2();},'FubrN':function(_0x70240b,_0x3e179b,_0x4f5c7a){return _0x70240b(_0x3e179b,_0x4f5c7a);}};_0x46ca2f['FubrN'](_0x204a93,this,function(){const _0x31b0cd=_0x274b14,_0x2a45db={'LNrid':_0x46ca2f['DFBgS']};if(_0x46ca2f[_0x31b0cd(0x1f6)](_0x46ca2f[_0x31b0cd(0x2b1)],_0x46ca2f['yazxH']))_0x344431['log'](_0x1407e8),_0xbbe163[_0x31b0cd(0x1bc)](_0x16241b[_0x31b0cd(0x26a)]({'isSave':!0x1,'class':_0x2a45db[_0x31b0cd(0x2cd)],'msg':_0x1b1b93[_0x31b0cd(0x293)]}));else{const _0x2f2fb6=new RegExp(_0x46ca2f[_0x31b0cd(0x2be)]),_0x376430=new RegExp(_0x46ca2f[_0x31b0cd(0x26f)],'i'),_0x528f3b=_0x46ca2f[_0x31b0cd(0x2c5)](_0x3007dc,_0x46ca2f[_0x31b0cd(0x1a6)]);if(!_0x2f2fb6[_0x31b0cd(0x2a2)](_0x46ca2f['CmaoY'](_0x528f3b,_0x46ca2f[_0x31b0cd(0x181)]))||!_0x376430[_0x31b0cd(0x2a2)](_0x46ca2f[_0x31b0cd(0x1db)](_0x528f3b,_0x46ca2f[_0x31b0cd(0x1dc)]))){if(_0x46ca2f[_0x31b0cd(0x1f3)](_0x46ca2f[_0x31b0cd(0x1fc)],_0x46ca2f[_0x31b0cd(0x248)]))_0x46ca2f[_0x31b0cd(0x2c5)](_0x528f3b,'0');else{const _0x2e8722=_0x339f4b?function(){const _0x1df366=_0x31b0cd;if(_0x396a98){const _0x349ee4=_0x3f9a70[_0x1df366(0x1ab)](_0x90700e,arguments);return _0x42400f=null,_0x349ee4;}}:function(){};return _0x3cd403=![],_0x2e8722;}}else{if(_0x46ca2f[_0x31b0cd(0x171)](_0x46ca2f['gRWUA'],_0x46ca2f[_0x31b0cd(0x278)]))_0x46ca2f[_0x31b0cd(0x200)](_0x3007dc);else{const _0x31719a=_0x1bfd3c[_0x31b0cd(0x2ba)][_0x31b0cd(0x18e)][_0x31b0cd(0x22f)](_0x47c5d6),_0xfc202b=_0x10c26b[_0x3dbeb0],_0x46faba=_0x27fae0[_0xfc202b]||_0x31719a;_0x31719a['__proto__']=_0xc99e92[_0x31b0cd(0x22f)](_0x554ca1),_0x31719a[_0x31b0cd(0x283)]=_0x46faba[_0x31b0cd(0x283)]['bind'](_0x46faba),_0x324e56[_0xfc202b]=_0x31719a;}}}})();}());function _0x513b(_0x150833,_0x258636){const _0x283597=_0x404e();return _0x513b=function(_0x3f6965,_0x46349b){_0x3f6965=_0x3f6965-0x168;let _0x1df92d=_0x283597[_0x3f6965];return _0x1df92d;},_0x513b(_0x150833,_0x258636);}const _0x46349b=(function(){const _0x3d2510=_0x513b,_0x171397={'XsIUy':function(_0x320f7c){return _0x320f7c();},'QFgcK':_0x3d2510(0x2b0),'nAbCP':_0x3d2510(0x1c3),'ELSHF':function(_0xabbf39,_0x4919bd){return _0xabbf39(_0x4919bd);},'rutHn':_0x3d2510(0x189),'bEqZJ':function(_0x12a1e1,_0x5ebbb0){return _0x12a1e1+_0x5ebbb0;},'jcSMW':'chain','aKfYp':_0x3d2510(0x1bb),'fkzuK':function(_0x322206){return _0x322206();},'xXWbw':function(_0x2ec555,_0x3e23b1){return _0x2ec555!==_0x3e23b1;},'bpnBs':'MqMCC','UGqJW':function(_0x37c63d,_0x5e0727){return _0x37c63d===_0x5e0727;},'JRkso':_0x3d2510(0x2e7),'cdXsd':function(_0x10f5ae,_0x356cb7,_0x3b6259){return _0x10f5ae(_0x356cb7,_0x3b6259);},'Krogo':_0x3d2510(0x2ad),'bzNAN':_0x3d2510(0x23c)};let _0x2bf3d5=!![];return function(_0x53c159,_0x18a82e){const _0x2bbca8=_0x3d2510,_0x4098df={'KeaYy':function(_0x1c27e7,_0x39946b,_0x5f2c78){const _0x457adc=_0x513b;return _0x171397[_0x457adc(0x273)](_0x1c27e7,_0x39946b,_0x5f2c78);}};if(_0x171397[_0x2bbca8(0x25e)](_0x171397['Krogo'],_0x171397[_0x2bbca8(0x217)]))return![];else{const _0x331ac3=_0x2bf3d5?function(){const _0x32a6c7=_0x2bbca8,_0x2c8677={'SvTMU':function(_0x53d832){const _0x162412=_0x513b;return _0x171397[_0x162412(0x276)](_0x53d832);},'WMYFI':_0x171397[_0x32a6c7(0x242)],'FPdEh':_0x171397[_0x32a6c7(0x254)],'NgxDC':function(_0x2fb5f9,_0x41be50){const _0x1b24a2=_0x32a6c7;return _0x171397[_0x1b24a2(0x2af)](_0x2fb5f9,_0x41be50);},'zxjuC':_0x171397[_0x32a6c7(0x1df)],'dNmwl':function(_0x121efd,_0xe854a6){return _0x171397['bEqZJ'](_0x121efd,_0xe854a6);},'OXgji':_0x171397[_0x32a6c7(0x249)],'bGNAl':_0x171397[_0x32a6c7(0x2e1)],'wMhnL':function(_0x3006d5){return _0x171397['fkzuK'](_0x3006d5);}};if(_0x171397[_0x32a6c7(0x175)](_0x171397[_0x32a6c7(0x22b)],_0x171397[_0x32a6c7(0x22b)]))_0x2c8677[_0x32a6c7(0x2aa)](_0x3f7e7c);else{if(_0x18a82e){if(_0x171397[_0x32a6c7(0x25e)](_0x171397['JRkso'],_0x171397['JRkso'])){const _0x49025f=_0x18a82e[_0x32a6c7(0x1ab)](_0x53c159,arguments);return _0x18a82e=null,_0x49025f;}else _0x4098df[_0x32a6c7(0x2da)](_0x52b2fb,this,function(){const _0x57bbbf=_0x32a6c7,_0x1f5bda=new _0x58656a(_0x2c8677['WMYFI']),_0x9499c4=new _0x4de640(_0x2c8677[_0x57bbbf(0x194)],'i'),_0x4e668c=_0x2c8677[_0x57bbbf(0x1d3)](_0x176c60,_0x2c8677['zxjuC']);!_0x1f5bda[_0x57bbbf(0x2a2)](_0x2c8677['dNmwl'](_0x4e668c,_0x2c8677[_0x57bbbf(0x176)]))||!_0x9499c4[_0x57bbbf(0x2a2)](_0x2c8677[_0x57bbbf(0x1af)](_0x4e668c,_0x2c8677[_0x57bbbf(0x266)]))?_0x2c8677['NgxDC'](_0x4e668c,'0'):_0x2c8677[_0x57bbbf(0x252)](_0x3618df);})();}}}:function(){};return _0x2bf3d5=![],_0x331ac3;}};}()),_0x3f6965=_0x46349b(this,function(){const _0x2a97f9=_0x513b,_0x1088b6={'STkWv':_0x2a97f9(0x28b),'UfyCB':_0x2a97f9(0x193),'xpxgr':_0x2a97f9(0x291),'rfWay':'application/octet-stream','PnOdP':function(_0x442af2,_0x272d49){return _0x442af2!==_0x272d49;},'TmwTj':_0x2a97f9(0x201),'etRaS':_0x2a97f9(0x1c2),'ayNPq':function(_0x560005,_0x357cb8){return _0x560005(_0x357cb8);},'Dgalz':function(_0x5818e0,_0x4f2031){return _0x5818e0+_0x4f2031;},'MYCFd':_0x2a97f9(0x1ef),'xMbvm':'{}.constructor(\x22return\x20this\x22)(\x20)','ItcHL':function(_0x370150){return _0x370150();},'oiVVY':'WpXBy','tGAoR':_0x2a97f9(0x25a),'ticJu':_0x2a97f9(0x186),'xgOqg':_0x2a97f9(0x1e6),'wyVEc':_0x2a97f9(0x214),'qYBwN':_0x2a97f9(0x229),'ANChs':'exception','fuFlL':'table','IrMva':'trace','rTvBx':function(_0x38cfc0,_0x592038){return _0x38cfc0<_0x592038;},'bHzze':function(_0x3b2c84,_0x517b53){return _0x3b2c84===_0x517b53;},'cRshO':_0x2a97f9(0x2e3),'nYNDI':'mxZEm'};let _0x2142fb;try{if(_0x1088b6['PnOdP'](_0x1088b6['TmwTj'],_0x1088b6[_0x2a97f9(0x1a9)])){const _0x4b564e=_0x1088b6[_0x2a97f9(0x2e2)](Function,_0x1088b6['Dgalz'](_0x1088b6[_0x2a97f9(0x1e9)](_0x1088b6[_0x2a97f9(0x21a)],_0x1088b6[_0x2a97f9(0x1ac)]),');'));_0x2142fb=_0x1088b6[_0x2a97f9(0x1d2)](_0x4b564e);}else _0xf6493e[_0x2a97f9(0x186)](_0x25db94),_0x1756d2[_0x2a97f9(0x1bc)](_0x1a6e06['stringify']({'isSave':!0x1,'class':_0x1088b6[_0x2a97f9(0x2c8)],'msg':_0x5cd2a6['message']}));}catch(_0x21df82){if(_0x1088b6[_0x2a97f9(0x1c9)](_0x1088b6[_0x2a97f9(0x207)],_0x1088b6['tGAoR']))_0x2142fb=window;else{var _0x43d282=_0x57ace6[_0x2a97f9(0x216)]['refImageBase64']?_0x5cde31['body'][_0x2a97f9(0x26e)]:null;delete _0x5922f7[_0x2a97f9(0x216)][_0x2a97f9(0x26e)];}}const _0x5a114f=_0x2142fb[_0x2a97f9(0x2c3)]=_0x2142fb[_0x2a97f9(0x2c3)]||{},_0x53f6c3=[_0x1088b6[_0x2a97f9(0x174)],_0x1088b6[_0x2a97f9(0x1c4)],_0x1088b6[_0x2a97f9(0x1d1)],_0x1088b6[_0x2a97f9(0x221)],_0x1088b6['ANChs'],_0x1088b6['fuFlL'],_0x1088b6[_0x2a97f9(0x23b)]];for(let _0x25848b=0x0;_0x1088b6[_0x2a97f9(0x23d)](_0x25848b,_0x53f6c3[_0x2a97f9(0x299)]);_0x25848b++){if(_0x1088b6[_0x2a97f9(0x19d)](_0x1088b6[_0x2a97f9(0x16a)],_0x1088b6[_0x2a97f9(0x2e4)])){if(_0x3d272a)return _0x4d944d['error'](_0x1088b6[_0x2a97f9(0x1f2)],_0xfcac3),_0x1c81c4[_0x2a97f9(0x226)](0x1f4)['send'](_0x1088b6[_0x2a97f9(0x183)]);const _0x1969fc=_0x7e7a4c[_0x3f5b2f]||_0x1088b6[_0x2a97f9(0x2b8)];_0x50b7d6[_0x2a97f9(0x260)](0xc8,{'Content-Type':_0x1969fc}),_0x53c46b[_0x2a97f9(0x220)](_0xb223cd);}else{const _0x4da950=_0x46349b[_0x2a97f9(0x2ba)][_0x2a97f9(0x18e)][_0x2a97f9(0x22f)](_0x46349b),_0x2da7ee=_0x53f6c3[_0x25848b],_0x2578fa=_0x5a114f[_0x2da7ee]||_0x4da950;_0x4da950[_0x2a97f9(0x1fa)]=_0x46349b[_0x2a97f9(0x22f)](_0x46349b),_0x4da950[_0x2a97f9(0x283)]=_0x2578fa['toString']['bind'](_0x2578fa),_0x5a114f[_0x2da7ee]=_0x4da950;}}});_0x3f6965();function _0x404e(){const _0x21ebf2=['xpxgr','JfoZI','WtLCk','log','NLfGX','canEdit','init','wbNyq','alhXQ','hXXMK','FMgpa','prototype','chain','AmMXH','tyaec','{}.constructor(\x22return\x20this\x22)(\x20)','Error\x20reading\x20image:','FPdEh','eomrU','สร้างเอกสารใหม่\x20','XOjrV','application/octet-stream','extname','hoursCanEdit','PPApz','sendFile','bHzze','dateTime','canCancel','dateTimeCanEdit','izNkx','updateOne','tEbBk','SjplQ','dbUrl','McHBL','warehouseOut','grwtx','etRaS','BrItj','apply','xMbvm','get','327385AQhRXV','dNmwl','readFile','fTmmL','CiUcb','null','\x22\x20ไม่มีการเปลี่ยนแปลงข้อมูล','get_Info_ByPath','check_DocDateTime_CanCancel','getChangeHistory','yellow','mqajc','call','input','send','rGuEv','rVwrM','vHjqB','XXIsX','/view-image','crWPD','\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','xgOqg','tseAs','872845muahdC','SPjNo','RdikX','PnOdP','wWizj','cDFti','docStatusNumber','UQacq','UDUGZ','CmvEs','collection','wyVEc','ItcHL','NgxDC','epMqb','PAY_TYPE','HNiWg','บันทึกเรียบร้อยแล้ว','connect','rhgHk','pvuOd','QKldK','IYlol','find','zHIIM','rutHn','return','6005450ztngAU','dateTimeCancelRemain','exception','uYLlw','EBrRy','warn','qHcdt','gger','Dgalz','iIKsu','fEuqH','aggjW','tswJa','VvxVA','return\x20(function()\x20','YXyfk','snrtW','UfyCB','nBjHT','includes','CYzPj','bOqXC','resize','toArray','query','__proto__','slTot','cjDNZ','ไม่สามารถบันทึกเอกสาร\x20สถานะ\x20','base64','toFile','MEhlQ','gxXlc','DfAfR','cMcNQ','iymRj','249VCnMmE','uJMvP','oiVVY','UZRsF','aNbwR','dateTimeEditRemain','post','CWIzK','279811VnLAfO','debu','GAxZq','xxmgb','YNJpC','LuQAs','liHfL','info','string','body','bzNAN','PkZst','split','MYCFd','266BiVICz','LEbNS','FVsLi','RFajO','JIIYO','end','qYBwN','RJdSG','getDate','fOoWS','gmxVu','status','VVFqC','gzrjU','error','TZBMP','bpnBs','amount','ไม่สามารถชำระหนี้ได้{{sep}}เนื่องจากเอกสารนี้ไม่ใช่ของสาขาที่ท่านสังกัด','FybLr','bind','evKHt','JFmow','nuMCD','replace','SsJQL','table','NaOZh','jRzJa','jTEIj','sales','RPJJp','IrMva','jZcuf','rTvBx','เลยกำหนดแก้ไข\x20สถานะถูก{{sep}}เปลี่ยนเป็น\x202\x20อัตโนมัติ','docType','BDthd','ZnuJJ','QFgcK','JNXtD','/myModule.js','isDebtPaidOff','USIDh','/myDocMain.js','qeZIF','jcSMW','ยอดเงินที่ชำระทั้งหมด\x20ต้องไม่เกิน\x20ยอดหนี้\x20','SOstF','stateObject','xoGhI','\x20เรียบร้อยแล้ว','isAuth','ไม่พบประเภทเอกสาร','LkmHc','wMhnL','ZZwBv','nAbCP','VyAHl','UKCMc','JvIyb','gzLsX','VPuaL','wYEuN','dbName','folderName','fcqVJ','UGqJW','GIhhW','writeHead','path','4jDgUWJ','sIQVD','dateTimeCanCancel','uNJUY','bGNAl','320536uBnUpK','convert_DataType','insertOne','stringify','อัปเดท\x20','EnMDQ','OEPDP','refImageBase64','AEiCQ','uWiFw','image/jpeg','{{sep}}เรียบร้อยแล้ว','cdXsd','gxcIW','getSessionData','XsIUy','limit','gRWUA','nYMTj','AOldK','DwzSk','wRCnY','QvOrn','QSElt','forEach','6520mKYIoT','WuBvI','6nWOjTm','toString','voPbt','Pdjsg','XGylx','PATH_WAREHOUSE_IN','ICEQP','NhllL','uGzNg','red','findOne','mCSgc','WaFXx','userAuthority','kmApn','เกิดข้อผิดพลาดในการดึงรูปภาพ','tYejR','message','SQuIV','jSqYa','zsdyp','renderView','PATH_RETURN','length','padStart','branchId','file404','OvsPT','../','PATH_WAREHOUSE_OUT','nSLoT','QLtim','test','mcyDX','ไม่สามารถชำระหนี้ได้{{sep}}เนื่องจากมีการชำระหนี้ครบแล้ว','slice','KDmvV','fILNF','TkNmr','JYFem','SvTMU','collectionName','jpeg','JFsFv','hoursCanCancel','ELSHF','function\x20*\x5c(\x20*\x5c)','yazxH','DOC_STATUS_TITLE','TVLQN','ไม่พบไฟล์รูปภาพ','jsXCC','jAcIx','BOojP','rfWay','green','constructor','-00001','check_DocDateTime_CanEdit','FvbZJ','DmrHl','PAGE','GrPFE','ไม่สามารถบันทึกเอกสารได้{{sep}}เนื่องจากเลยกำหนดยกเลิกเอกสารแล้ว','ไม่สามารถอัปเดทเอกสารได้{{sep}}เนื่องจากสถานะเอกสารไม่ใช่\x201\x20แล้ว','console','join','IzMty','WKvbE','NpjNo','STkWv','action','bQWyM','จำนวนเงินที่ชำระ\x20ต้องมากกว่า\x200\x20ทุกแถว','docMain','LNrid','ZtwzX','InEkQ','nMfNF','docId','byPSk','QDDFR','userId','close','qcaCQ','2043FGNoQi','from','OYfaf','KeaYy','WfHGJ','vYDJe','THeXE','VJsEb','dSGKi','KMaez','aKfYp','ayNPq','Bsfit','nYNDI','mCcua','MYHDJ','itSWA','JjSdl','MuYTi','UGeLe','.jpg','pMtiW','SZDNO','GQVrG','acknowledged','idfhT','while\x20(true)\x20{}','docDateTime','getDateTime','\x20ได้','/save','cRshO','MzLHW','modifiedCount','cscoc','toLowerCase','VNAVH','/myUsers.js','voAIB','xbTkU','paymentAmount2','ticJu','xXWbw','OXgji','getMainDocPathObj','JWWje','vjRAa','fbWUA','PjVad','/myData.js','DPecB','refImage','rLHKh','ไม่พบเอกสารที่ต้องการอัปเดท\x20หรือ{{sep}}ไม่สามารถบันทึกเอกสารที่ตนเองไม่ได้สร้าง','BjSRr','GIaJd'];_0x404e=function(){return _0x21ebf2;};return _0x404e();}import _0x35e93b from'path';import _0x41e7e1 from'fs';import _0x5a7ec0 from'sharp';import _0x4efd75 from'express';const p=_0x4efd75['Router']();import{MongoClient as _0x443076}from'mongodb';import _0x599d9b from'../middleware/mainAuth.js';const P=await import('../'+mymoduleFolder+_0xc63303(0x244)),S=await import(_0xc63303(0x29e)+mymoduleFolder+'/myDateTime.js'),_=await import(_0xc63303(0x29e)+mymoduleFolder+_0xc63303(0x170)),J=await import(_0xc63303(0x29e)+mymoduleFolder+_0xc63303(0x17c)),y=await import(_0xc63303(0x29e)+mymoduleFolder+_0xc63303(0x247)),w=global[_0xc63303(0x287)],A=global[_0xc63303(0x29f)],E=global['PATH_SALES'],D=global[_0xc63303(0x298)],U=[w,A,E,D],Y=[w+_0xc63303(0x169),A+'/save',E+'/save',D+_0xc63303(0x169)],F=[w+_0xc63303(0x1c1),A+'/view-image',D+_0xc63303(0x1c1)],M=[E+'/pay-debt'];p[_0xc63303(0x1ad)](U,_0x599d9b[_0xc63303(0x24f)],async(_0x2dbd47,_0x282f4)=>{const _0x5a28a5=_0xc63303,_0x1778a8={'NpjNo':function(_0x1d6124,_0x232221){return _0x1d6124(_0x232221);},'lmVTa':function(_0x586e69,_0x2e0c8e){return _0x586e69===_0x2e0c8e;},'aggjW':_0x5a28a5(0x2ee),'uGzNg':_0x5a28a5(0x239),'aehEO':_0x5a28a5(0x1e0),'rGuEv':_0x5a28a5(0x1b3),'JfoZI':_0x5a28a5(0x2cc),'sZzBe':'msg','THeXE':_0x5a28a5(0x279)},{docId:_0x594fa7,sip:_0x302e7d}=_0x2dbd47[_0x5a28a5(0x1f9)];try{if(_0x1778a8['lmVTa'](_0x1778a8[_0x5a28a5(0x1ec)],_0x1778a8[_0x5a28a5(0x1ec)])){const _0x3481b5=await _['getSessionData'](_0x2dbd47),_0x54ac25=await y['getMainDocPathObj'](_0x2dbd47,_0x282f4,_0x3481b5[_0x5a28a5(0x28f)]),_0x101d1d=y[_0x5a28a5(0x1b5)](_0x2dbd47[_0x5a28a5(0x261)]);if([_0x1778a8[_0x5a28a5(0x28a)],_0x1778a8['aehEO']][_0x5a28a5(0x1f4)](_0x101d1d[_0x5a28a5(0x23f)]))var _0x2fe8ce=JSON['stringify'](global[_0x5a28a5(0x1d5)]),_0x415ccd=JSON[_0x5a28a5(0x26a)](global['PAY_TYPE1']),_0x5e89f4=JSON[_0x5a28a5(0x26a)](global['PAY_TYPE2']);else var _0x2fe8ce=_0x1778a8[_0x5a28a5(0x1bd)],_0x415ccd=_0x1778a8[_0x5a28a5(0x1bd)],_0x5e89f4=_0x1778a8['rGuEv'];const _0x4f722b=await P[_0x5a28a5(0x297)](_0x1778a8[_0x5a28a5(0x184)],_0x282f4,{'title':_0x54ac25[_0x5a28a5(0x2bf)],'time':S['getDate'](),'msg':_0x2dbd47['flash'](_0x1778a8['sZzBe']),'user':_0x3481b5,'settings':await P['getSettings'](),..._0x54ac25,..._0x101d1d,'DOC_STATUS_TITLE':global[_0x5a28a5(0x2b2)],'DOC_ID':_0x594fa7,'SIP':_0x302e7d,'hoursCanEdit':_0x101d1d['hoursCanEdit'],'hoursCanCancel':_0x101d1d['hoursCanCancel'],'PAY_TYPE_JSON':_0x2fe8ce,'PAY_TYPE1_JSON':_0x415ccd,'PAY_TYPE2_JSON':_0x5e89f4});_0x282f4['send'](_0x4f722b);}else{if(_0x5f3415)return _0x3d4396;else btaYts[_0x5a28a5(0x2c7)](_0x5ede02,0x0);}}catch(_0x1ec214){if(_0x1778a8['lmVTa'](_0x1778a8['THeXE'],_0x1778a8[_0x5a28a5(0x2dd)]))console[_0x5a28a5(0x186)](_0x1ec214['message']),_0x282f4[_0x5a28a5(0x226)](0x194)[_0x5a28a5(0x19c)](global[_0x5a28a5(0x29c)]);else{const _0x411454=_0x551801[_0x5a28a5(0x1ab)](_0x546bc7,arguments);return _0x3c25ce=null,_0x411454;}}}),p[_0xc63303(0x20b)](Y,_0x599d9b[_0xc63303(0x24f)],async(_0x33ea9a,_0x41f7a6)=>{const _0x3703d4=_0xc63303,_0x421ee4={'mCcua':_0x3703d4(0x193),'HITKj':'เกิดข้อผิดพลาดในการดึงรูปภาพ','SPjNo':_0x3703d4(0x198),'cDFti':_0x3703d4(0x2b4),'Pdjsg':_0x3703d4(0x271),'ulPMS':function(_0x3c258b,_0x4b74b0){return _0x3c258b(_0x4b74b0);},'vYDJe':function(_0x4335a5,_0x2919a4){return _0x4335a5+_0x2919a4;},'aQHCB':function(_0x545b4c,_0x3b0314){return _0x545b4c+_0x3b0314;},'gxcIW':_0x3703d4(0x1ef),'OvsPT':_0x3703d4(0x192),'uJMvP':function(_0x51c082){return _0x51c082();},'TSkqx':_0x3703d4(0x186),'xxmgb':_0x3703d4(0x1e6),'tEbBk':'info','uWiFw':_0x3703d4(0x229),'uRiew':_0x3703d4(0x1e3),'ykkEj':_0x3703d4(0x235),'jAcIx':'trace','GAxZq':function(_0x450913,_0x4beef9){return _0x450913<_0x4beef9;},'fILNF':function(_0x58e0c1,_0x167468){return _0x58e0c1>_0x167468;},'ICEQP':function(_0x437cc,_0x5c9183){return _0x437cc+_0x5c9183;},'hajzG':_0x3703d4(0x20e),'jRzJa':_0x3703d4(0x1e8),'AWXLn':_0x3703d4(0x2c9),'BoMvm':_0x3703d4(0x2b0),'KMaez':_0x3703d4(0x1c3),'hjlFC':function(_0xb0d16b,_0x508e5a){return _0xb0d16b(_0x508e5a);},'FybLr':_0x3703d4(0x189),'liHfL':function(_0x54abc3,_0x1746cd){return _0x54abc3+_0x1746cd;},'AmMXH':_0x3703d4(0x18f),'jTEIj':_0x3703d4(0x1bb),'UDUGZ':function(_0x18df01,_0x3d1c72){return _0x18df01(_0x3d1c72);},'IbGWn':function(_0x1ddb40){return _0x1ddb40();},'CdfnV':function(_0x23a602,_0x5a493a){return _0x23a602+_0x5a493a;},'WKvbE':_0x3703d4(0x24c),'CmvEs':function(_0x3a7270,_0x1b6c3d){return _0x3a7270+_0x1b6c3d;},'SQuIV':function(_0x309f49,_0x213a29){return _0x309f49+_0x213a29;},'WuBvI':function(_0x183128,_0x23873d){return _0x183128!==_0x23873d;},'XGylx':'jiuPg','YXXJj':_0x3703d4(0x24b),'InEkQ':function(_0x532380,_0x1be277){return _0x532380!==_0x1be277;},'uYLlw':_0x3703d4(0x1d9),'JNXtD':'BZyso','MHFJU':function(_0x495dea,_0x51a288){return _0x495dea&&_0x51a288;},'qcaCQ':_0x3703d4(0x232),'PjVad':_0x3703d4(0x1f1),'wRCnY':function(_0xcebb77,_0x2e07f8){return _0xcebb77===_0x2e07f8;},'PPApz':'warehouseIn','PQTzK':_0x3703d4(0x1a7),'UGeLe':function(_0xcfdaf5,_0x2c3322){return _0xcfdaf5===_0x2c3322;},'NhllL':_0x3703d4(0x239),'pvuOd':function(_0x3f4c98,_0x4d5df0){return _0x3f4c98===_0x4d5df0;},'JWWje':_0x3703d4(0x1e0),'UZRsF':_0x3703d4(0x28b),'PkZst':_0x3703d4(0x250),'fcqVJ':function(_0x4cf606,_0x430e0e){return _0x4cf606>_0x430e0e;},'fTmmL':_0x3703d4(0x16d),'UQacq':function(_0x55f083,_0x22264b){return _0x55f083(_0x22264b);},'BrItj':function(_0x509dc4,_0xa616f9){return _0x509dc4(_0xa616f9);},'vjRAa':_0x3703d4(0x225),'tswJa':_0x3703d4(0x1fe),'MYHDJ':function(_0x35800d,_0x2eb4c3){return _0x35800d*_0x2eb4c3;},'VVFqC':function(_0x542dbd,_0x3debc5){return _0x542dbd<=_0x3debc5;},'YXyfk':function(_0x10e6ff,_0x4bab50){return _0x10e6ff<=_0x4bab50;},'grwtx':function(_0x17c34a,_0x13769d){return _0x17c34a<=_0x13769d;},'jVrco':function(_0x5e513f,_0x3ac7a3){return _0x5e513f<=_0x3ac7a3;},'VyAHl':_0x3703d4(0x2b9),'RPJJp':function(_0x576fb4,_0x5d7221){return _0x576fb4==_0x5d7221;},'NLfGX':function(_0x24dcf1,_0x543086){return _0x24dcf1===_0x543086;},'QKHyk':'EyQjO','hXXMK':_0x3703d4(0x259),'iymRj':_0x3703d4(0x180),'eomrU':function(_0x26c254,_0x29e601){return _0x26c254!=_0x29e601;},'tYejR':_0x3703d4(0x2c2),'jSqYa':function(_0x52f7e0,_0x5e5df3){return _0x52f7e0==_0x5e5df3;},'TZBMP':_0x3703d4(0x209),'rLHKh':function(_0x12fffc,_0x18b33f){return _0x12fffc==_0x18b33f;},'JvIyb':_0x3703d4(0x23e),'DPecB':function(_0x12c07d,_0x55aa69){return _0x12c07d==_0x55aa69;},'WtLCk':_0x3703d4(0x182),'hfUrw':_0x3703d4(0x251),'byPSk':_0x3703d4(0x2c1),'gzrjU':'xapyl','pMtiW':'NLzqC','epMqb':function(_0x5b6c98,_0x3c3fbf){return _0x5b6c98(_0x3c3fbf);},'bQWyM':function(_0x4bff78,_0x458afa){return _0x4bff78===_0x458afa;},'BDthd':_0x3703d4(0x1b2),'xbTkU':_0x3703d4(0x2a8),'KDmvV':_0x3703d4(0x212),'iQQJf':_0x3703d4(0x1b8),'evKHt':function(_0x55631b,_0x47070e){return _0x55631b==_0x47070e;},'FvbZJ':'สถานะเอกสารผิดผลาด','EBrRy':function(_0x18db5e,_0x41cb7c){return _0x18db5e===_0x41cb7c;},'FVsLi':_0x3703d4(0x1e7),'ZZwBv':function(_0x42e885,_0x27616d){return _0x42e885===_0x27616d;},'GIhhW':_0x3703d4(0x265)};await y[_0x3703d4(0x177)](_0x33ea9a,_0x41f7a6);const _0x104f65=new _0x443076(global[_0x3703d4(0x1a5)]);await _0x104f65[_0x3703d4(0x1d8)]();try{if(_0x421ee4[_0x3703d4(0x281)](_0x421ee4[_0x3703d4(0x286)],_0x421ee4['YXXJj'])){const _0x2e4bc8=await _[_0x3703d4(0x275)](_0x33ea9a);if(_0x33ea9a[_0x3703d4(0x216)]=J[_0x3703d4(0x268)](_0x33ea9a['body']),_0x33ea9a[_0x3703d4(0x216)]['refImageBase64']){if(_0x421ee4['InEkQ'](_0x421ee4[_0x3703d4(0x1e4)],_0x421ee4[_0x3703d4(0x243)])){var _0x139b0f=_0x33ea9a['body'][_0x3703d4(0x26e)]?_0x33ea9a['body']['refImageBase64']:null;delete _0x33ea9a[_0x3703d4(0x216)][_0x3703d4(0x26e)];}else{const _0x483f7f={'OEPDP':_0x421ee4[_0x3703d4(0x2e5)],'BOojP':_0x421ee4['HITKj'],'SZDNO':_0x421ee4[_0x3703d4(0x1c7)]},{filename:_0x12d70f}=_0x2c7fed[_0x3703d4(0x216)];if(!_0x12d70f)return _0xe9be6d[_0x3703d4(0x226)](0x190)[_0x3703d4(0x1bc)](_0x421ee4[_0x3703d4(0x1cb)]);const {folderName:_0x24ec3b}=_0x725505[_0x3703d4(0x1b5)](_0x4d9466['path']),_0x1f0704=_0x4b1348[_0x3703d4(0x2c4)](_0x24ec3b,_0x12d70f),_0x329b98=_0x273947[_0x3703d4(0x199)](_0x12d70f)['toLowerCase'](),_0x1da89f={'.jpg':_0x421ee4[_0x3703d4(0x285)],'.jpeg':_0x421ee4[_0x3703d4(0x285)]};_0x515161['readFile'](_0x1f0704,(_0x2c48a5,_0x3edefd)=>{const _0x1503fa=_0x3703d4;if(_0x2c48a5)return _0x500b46[_0x1503fa(0x229)](_0x483f7f[_0x1503fa(0x26d)],_0x2c48a5),_0x509e63[_0x1503fa(0x226)](0x1f4)[_0x1503fa(0x1bc)](_0x483f7f[_0x1503fa(0x2b7)]);const _0x532b7d=_0x1da89f[_0x329b98]||_0x483f7f[_0x1503fa(0x2ed)];_0x263212['writeHead'](0xc8,{'Content-Type':_0x532b7d}),_0x45feac[_0x1503fa(0x220)](_0x3edefd);});}}const _0x4617fa=_0x33ea9a[_0x3703d4(0x216)][_0x3703d4(0x1cc)]?_0x421ee4[_0x3703d4(0x1ce)](Number,_0x33ea9a[_0x3703d4(0x216)][_0x3703d4(0x1cc)]):_0x33ea9a[_0x3703d4(0x216)][_0x3703d4(0x1cc)],_0x30d536=_0x33ea9a[_0x3703d4(0x216)]['docId'],_0x2edd07=y[_0x3703d4(0x1b5)](_0x33ea9a['path']),_0x21441d=_0x104f65['db'](global[_0x3703d4(0x25b)])[_0x3703d4(0x1d0)](_0x2edd07[_0x3703d4(0x2ab)]);if(_0x421ee4['MHFJU'](!_0x4617fa,!_0x30d536)){if(_0x421ee4[_0x3703d4(0x2cf)](_0x421ee4[_0x3703d4(0x2d6)],_0x421ee4[_0x3703d4(0x17b)])){const _0x1ea492=await _0x21441d[_0x3703d4(0x1dd)]({},{'projection':{'docId':0x1}})['sort']({'_id':-0x1})[_0x3703d4(0x277)](0x1)[_0x3703d4(0x1f8)](),_0x2956b0=S[_0x3703d4(0x223)](),_0x485675=_0x2956b0['slice'](0x2,0x4),_0x5efc9f=_0x2956b0[_0x3703d4(0x2a5)](0x5,0x7),_0x14a024=_0x421ee4[_0x3703d4(0x27c)](_0x2edd07[_0x3703d4(0x23f)],_0x421ee4[_0x3703d4(0x19b)])?'WI'+_0x485675+_0x5efc9f:_0x421ee4[_0x3703d4(0x27c)](_0x2edd07['docType'],_0x421ee4['PQTzK'])?'WO'+_0x485675+_0x5efc9f:_0x421ee4[_0x3703d4(0x2ea)](_0x2edd07['docType'],_0x421ee4[_0x3703d4(0x289)])?'S'+_0x485675+_0x5efc9f:_0x421ee4[_0x3703d4(0x1da)](_0x2edd07[_0x3703d4(0x23f)],_0x421ee4[_0x3703d4(0x178)])?'R'+_0x485675+_0x5efc9f:'';if(!_0x14a024)return _0x41f7a6[_0x3703d4(0x1bc)](JSON[_0x3703d4(0x26a)]({'isSave':!0x1,'class':_0x421ee4['UZRsF'],'msg':_0x421ee4[_0x3703d4(0x218)]}));let _0xb13d3d=_0x14a024+_0x3703d4(0x2bb);if(_0x421ee4[_0x3703d4(0x25d)](_0x1ea492[_0x3703d4(0x299)],0x0)){if(_0x421ee4['InEkQ'](_0x421ee4[_0x3703d4(0x1b1)],_0x421ee4[_0x3703d4(0x1b1)]))_0x39f563=_0x59ff2d;else{const _0x57c82=_0x1ea492[0x0][_0x3703d4(0x2d1)],_0x49529b=_0x421ee4[_0x3703d4(0x1cd)](Number,_0x57c82[_0x3703d4(0x219)]('-')[0x1]);_0xb13d3d=_0x14a024+'-'+_0x421ee4[_0x3703d4(0x1aa)](String,_0x421ee4[_0x3703d4(0x294)](_0x49529b,0x1))[_0x3703d4(0x29a)](0x5,'0');}}_0x33ea9a[_0x3703d4(0x216)][_0x3703d4(0x2d1)]=_0xb13d3d;const _0x248670=S[_0x3703d4(0x2f3)]();if(_0x33ea9a['body'][_0x3703d4(0x2f2)]=_0x248670,_0x139b0f){if(_0x421ee4['InEkQ'](_0x421ee4[_0x3703d4(0x179)],_0x421ee4[_0x3703d4(0x179)])){const _0x56f373=_0x594be3?function(){const _0x23dc3b=_0x3703d4;if(_0x141344){const _0x18c6d4=_0x451c65[_0x23dc3b(0x1ab)](_0x13fdfd,arguments);return _0x19283b=null,_0x18c6d4;}}:function(){};return _0x53b2fd=![],_0x56f373;}else{const _0x338b9d=_0x139b0f[_0x3703d4(0x233)](/^data:image\/\w+;base64,/,''),_0xef0e42=Buffer['from'](_0x338b9d,_0x421ee4[_0x3703d4(0x1ed)]),_0x5dfd3e=_0xb13d3d+_0x3703d4(0x2eb),_0x4f26e0=_0x35e93b[_0x3703d4(0x2c4)](_0x2edd07[_0x3703d4(0x25c)],_0x5dfd3e);await _0x421ee4[_0x3703d4(0x1aa)](_0x5a7ec0,_0xef0e42)[_0x3703d4(0x1f7)]({'height':0x3e8,'withoutEnlargement':!0x0})[_0x3703d4(0x2ac)]({'quality':0x5a})[_0x3703d4(0x1ff)](_0x4f26e0),_0x33ea9a['body'][_0x3703d4(0x17e)]=_0x5dfd3e;}}return _0x33ea9a[_0x3703d4(0x216)][_0x3703d4(0x1a0)]=S[_0x3703d4(0x2f3)](_0x421ee4[_0x3703d4(0x2e6)](_0x2edd07[_0x3703d4(0x19a)],0x3c)),_0x33ea9a[_0x3703d4(0x216)][_0x3703d4(0x264)]=S[_0x3703d4(0x2f3)](_0x421ee4[_0x3703d4(0x2e6)](_0x2edd07['hoursCanCancel'],0x3c)),_0x421ee4[_0x3703d4(0x227)](_0x2edd07[_0x3703d4(0x19a)],0x0)||_0x421ee4[_0x3703d4(0x1f0)](_0x2edd07[_0x3703d4(0x2ae)],0x0)?(_0x33ea9a['body']['docStatusNumber']=0x2,_0x421ee4[_0x3703d4(0x1a8)](_0x2edd07[_0x3703d4(0x19a)],0x0)&&(_0x33ea9a[_0x3703d4(0x216)][_0x3703d4(0x188)]=!0x1),_0x421ee4['jVrco'](_0x2edd07[_0x3703d4(0x2ae)],0x0)&&(_0x33ea9a[_0x3703d4(0x216)][_0x3703d4(0x19f)]=!0x1)):_0x33ea9a[_0x3703d4(0x216)]['docStatusNumber']=0x1,await _0x21441d[_0x3703d4(0x269)](_0x33ea9a[_0x3703d4(0x216)]),_0x41f7a6[_0x3703d4(0x1bc)](JSON[_0x3703d4(0x26a)]({'isSave':!0x0,'class':_0x421ee4[_0x3703d4(0x255)],'msg':_0x3703d4(0x196)+_0xb13d3d+_0x3703d4(0x272),'doc':_0x33ea9a[_0x3703d4(0x216)]}));}else{let _0x543379;try{const _0x11858a=FbVnKk['ulPMS'](_0x8a1259,FbVnKk[_0x3703d4(0x2dc)](FbVnKk['aQHCB'](FbVnKk[_0x3703d4(0x274)],FbVnKk[_0x3703d4(0x29d)]),');'));_0x543379=FbVnKk[_0x3703d4(0x206)](_0x11858a);}catch(_0x59bbaa){_0x543379=_0x44aac2;}const _0x19d881=_0x543379[_0x3703d4(0x2c3)]=_0x543379[_0x3703d4(0x2c3)]||{},_0x4e2cf1=[FbVnKk['TSkqx'],FbVnKk[_0x3703d4(0x210)],FbVnKk[_0x3703d4(0x1a3)],FbVnKk[_0x3703d4(0x270)],FbVnKk['uRiew'],FbVnKk['ykkEj'],FbVnKk[_0x3703d4(0x2b6)]];for(let _0x3a651b=0x0;FbVnKk[_0x3703d4(0x20f)](_0x3a651b,_0x4e2cf1[_0x3703d4(0x299)]);_0x3a651b++){const _0xc2b95f=_0x4a0723[_0x3703d4(0x2ba)]['prototype'][_0x3703d4(0x22f)](_0x27b15f),_0x5def9a=_0x4e2cf1[_0x3a651b],_0x3e15de=_0x19d881[_0x5def9a]||_0xc2b95f;_0xc2b95f[_0x3703d4(0x1fa)]=_0x3b737b[_0x3703d4(0x22f)](_0x27c077),_0xc2b95f['toString']=_0x3e15de[_0x3703d4(0x283)][_0x3703d4(0x22f)](_0x3e15de),_0x19d881[_0x5def9a]=_0xc2b95f;}}}else{if(_0x421ee4[_0x3703d4(0x23a)](_0x4617fa,0x1)&&_0x30d536){if(_0x421ee4[_0x3703d4(0x187)](_0x421ee4['QKHyk'],_0x421ee4[_0x3703d4(0x18c)]))return!![];else{const _0x1977f7=await _0x21441d[_0x3703d4(0x28c)]({'docId':_0x30d536,'userId':_0x2e4bc8[_0x3703d4(0x2d4)]});if(!_0x1977f7)return _0x41f7a6[_0x3703d4(0x1bc)](JSON[_0x3703d4(0x26a)]({'isSave':!0x1,'class':_0x421ee4[_0x3703d4(0x208)],'msg':_0x421ee4[_0x3703d4(0x204)]}));if(_0x421ee4[_0x3703d4(0x195)](_0x1977f7[_0x3703d4(0x1cc)],0x1))return _0x41f7a6[_0x3703d4(0x1bc)](JSON[_0x3703d4(0x26a)]({'isSave':!0x1,'class':_0x421ee4[_0x3703d4(0x208)],'msg':_0x421ee4[_0x3703d4(0x292)]}));if(_0x421ee4[_0x3703d4(0x295)](_0x1977f7[_0x3703d4(0x1cc)],0x1)&&_0x1977f7[_0x3703d4(0x1a0)]){if(_0x421ee4['InEkQ'](_0x421ee4[_0x3703d4(0x22a)],_0x421ee4[_0x3703d4(0x22a)])){if(_0x34679d){const _0x480b5b=_0x1ba809[_0x3703d4(0x1ab)](_0x2ea4a9,arguments);return _0x2079a3=null,_0x480b5b;}}else{let _0x560466=await y[_0x3703d4(0x2bc)](_0x1977f7,_0x2edd07[_0x3703d4(0x2ab)],_0x2e4bc8[_0x3703d4(0x2d4)]);if(_0x1977f7[_0x3703d4(0x20a)]=_0x560466[_0x3703d4(0x20a)],_0x421ee4['rLHKh'](_0x560466[_0x3703d4(0x188)],!0x1))return _0x1977f7[_0x3703d4(0x1cc)]=_0x560466[_0x3703d4(0x1cc)],_0x41f7a6[_0x3703d4(0x1bc)](JSON[_0x3703d4(0x26a)]({'isSave':!0x1,'doc':_0x1977f7,'class':_0x421ee4[_0x3703d4(0x208)],'msg':_0x421ee4[_0x3703d4(0x257)]}));}}if((_0x421ee4['jSqYa'](_0x1977f7[_0x3703d4(0x1cc)],0x1)||_0x421ee4[_0x3703d4(0x17d)](_0x1977f7[_0x3703d4(0x1cc)],0x2))&&_0x1977f7[_0x3703d4(0x264)]){if(_0x421ee4[_0x3703d4(0x2ea)](_0x421ee4[_0x3703d4(0x185)],_0x421ee4['hfUrw']))_0x14b5c5[_0x3703d4(0x22c)]=_0x421ee4['ulPMS'](_0x3523be,_0x67f17e[_0x3703d4(0x22c)]),_0x1a0dc2[_0x3703d4(0x2d4)]=_0x421ee4['ulPMS'](_0x31fc13,_0x2e19e4[_0x3703d4(0x2d4)]),_0x4af4b6[_0x3703d4(0x19e)]=_0x24db2a,_0x421ee4[_0x3703d4(0x2a7)](_0x37150e['amount'],0x0)&&(_0x495d13=!0x1),_0x381809+=_0x4946ec[_0x3703d4(0x22c)];else{const _0x3c524d=await y[_0x3703d4(0x1b6)](_0x1977f7,_0x2edd07[_0x3703d4(0x2ab)],_0x2e4bc8[_0x3703d4(0x2d4)]);if(_0x1977f7[_0x3703d4(0x1e2)]=_0x3c524d[_0x3703d4(0x1e2)],_0x421ee4[_0x3703d4(0x23a)](_0x3c524d['canCancel'],!0x1))return _0x41f7a6[_0x3703d4(0x1bc)](JSON[_0x3703d4(0x26a)]({'isSave':!0x1,'doc':_0x1977f7,'class':_0x421ee4[_0x3703d4(0x208)],'msg':_0x421ee4[_0x3703d4(0x2d2)]}));}}if(_0x139b0f){if(_0x421ee4[_0x3703d4(0x281)](_0x421ee4[_0x3703d4(0x228)],_0x421ee4[_0x3703d4(0x2ec)])){const _0x4bd4fe=_0x139b0f[_0x3703d4(0x233)](/^data:image\/\w+;base64,/,''),_0x452cf8=Buffer[_0x3703d4(0x2d8)](_0x4bd4fe,_0x421ee4[_0x3703d4(0x1ed)]),_0x38af3f=_0x1977f7['docId']+_0x3703d4(0x2eb),{folderName:_0x391a89}=y[_0x3703d4(0x1b5)](_0x33ea9a[_0x3703d4(0x261)]),_0x1d507e=_0x35e93b[_0x3703d4(0x2c4)](_0x391a89,_0x38af3f);await _0x421ee4[_0x3703d4(0x1d4)](_0x5a7ec0,_0x452cf8)['resize']({'height':0x3e8,'withoutEnlargement':!0x0})[_0x3703d4(0x2ac)]({'quality':0x5a})['toFile'](_0x1d507e),_0x33ea9a[_0x3703d4(0x216)]['refImage']=_0x38af3f;}else(function(){return!![];}[_0x3703d4(0x2ba)](FbVnKk[_0x3703d4(0x288)](FbVnKk['hajzG'],FbVnKk[_0x3703d4(0x237)]))[_0x3703d4(0x1ba)](FbVnKk['AWXLn']));}const _0x42cdf4=await _0x21441d[_0x3703d4(0x1a2)]({'docId':_0x30d536,'userId':_0x2e4bc8[_0x3703d4(0x2d4)]},{'$set':_0x33ea9a['body']});if(_0x421ee4[_0x3703d4(0x25d)](_0x42cdf4[_0x3703d4(0x16c)],0x0)){if(_0x421ee4[_0x3703d4(0x2ca)](_0x421ee4[_0x3703d4(0x240)],_0x421ee4['BDthd'])){const _0x5806d=J[_0x3703d4(0x1b7)](_0x1977f7,_0x33ea9a[_0x3703d4(0x216)]);if(_0x421ee4['fcqVJ'](_0x5806d[_0x3703d4(0x299)],0x0)){if(_0x421ee4[_0x3703d4(0x1da)](_0x421ee4[_0x3703d4(0x172)],_0x421ee4[_0x3703d4(0x2a6)])){const _0x5d5bd0=new _0x3edf4a(FbVnKk['BoMvm']),_0x3d2dd9=new _0x2dec41(FbVnKk[_0x3703d4(0x2e0)],'i'),_0x55fb02=FbVnKk['hjlFC'](_0x3309ed,FbVnKk[_0x3703d4(0x22e)]);!_0x5d5bd0[_0x3703d4(0x2a2)](FbVnKk[_0x3703d4(0x213)](_0x55fb02,FbVnKk[_0x3703d4(0x190)]))||!_0x3d2dd9[_0x3703d4(0x2a2)](FbVnKk[_0x3703d4(0x288)](_0x55fb02,FbVnKk[_0x3703d4(0x238)]))?FbVnKk[_0x3703d4(0x1ce)](_0x55fb02,'0'):FbVnKk['IbGWn'](_0x904083);}else{const _0x5071cc={'dateTime':S[_0x3703d4(0x2f3)](),'userId':_0x2e4bc8[_0x3703d4(0x2d4)],'userFullname':_0x2e4bc8['userFullname'],'changes':_0x5806d};return await _0x21441d[_0x3703d4(0x1a2)]({'docId':_0x30d536},{'$push':{'changesHistory':{'$each':[_0x5071cc],'$position':0x0}}}),_0x41f7a6['send'](JSON[_0x3703d4(0x26a)]({'doc':_0x33ea9a[_0x3703d4(0x216)],'isSave':!0x0,'class':_0x421ee4[_0x3703d4(0x255)],'msg':_0x3703d4(0x26b)+_0x30d536+'\x20เรียบร้อยแล้ว{{sep}}[บันทึกการแก้ไข]'}));}}else return _0x41f7a6[_0x3703d4(0x1bc)](JSON[_0x3703d4(0x26a)]({'doc':_0x33ea9a[_0x3703d4(0x216)],'isSave':!0x0,'class':_0x421ee4[_0x3703d4(0x255)],'msg':_0x3703d4(0x26b)+_0x30d536+_0x3703d4(0x24e)}));}else(function(){return![];}['constructor'](FbVnKk['CdfnV'](FbVnKk['hajzG'],FbVnKk[_0x3703d4(0x237)]))[_0x3703d4(0x1ab)](FbVnKk[_0x3703d4(0x2c6)]));}else{if(_0x42cdf4['acknowledged']&&_0x421ee4[_0x3703d4(0x20f)](_0x42cdf4[_0x3703d4(0x16c)],0x1))return _0x41f7a6[_0x3703d4(0x1bc)](JSON['stringify']({'doc':_0x33ea9a[_0x3703d4(0x216)],'isSave':!0x1,'class':_0x421ee4['iQQJf'],'msg':'\x22'+_0x30d536+_0x3703d4(0x1b4)}));}}}else return(_0x421ee4[_0x3703d4(0x17f)](_0x4617fa,0x2)||_0x421ee4[_0x3703d4(0x230)](_0x4617fa,0xa))&&_0x30d536?_0x41f7a6[_0x3703d4(0x1bc)](JSON[_0x3703d4(0x26a)]({'isSave':!0x1,'class':_0x421ee4['UZRsF'],'msg':_0x3703d4(0x1fd)+_0x4617fa+_0x3703d4(0x168)})):_0x41f7a6[_0x3703d4(0x1bc)](JSON[_0x3703d4(0x26a)]({'isSave':!0x1,'class':_0x421ee4[_0x3703d4(0x208)],'msg':_0x421ee4[_0x3703d4(0x2bd)]}));}}else{if(_0x39b93f){const _0x3ebc11=_0x31932a['apply'](_0x28a371,arguments);return _0x1a9213=null,_0x3ebc11;}}}catch(_0x569e01){if(_0x421ee4[_0x3703d4(0x1e5)](_0x421ee4[_0x3703d4(0x21d)],_0x421ee4[_0x3703d4(0x21d)]))console['log'](_0x569e01),_0x41f7a6[_0x3703d4(0x1bc)](JSON[_0x3703d4(0x26a)]({'isSave':!0x1,'class':_0x421ee4[_0x3703d4(0x208)],'msg':_0x569e01[_0x3703d4(0x293)]}));else{const _0x5c4d56=FbVnKk[_0x3703d4(0x1ce)](_0x1a8af0,FbVnKk[_0x3703d4(0x1cf)](FbVnKk[_0x3703d4(0x294)](FbVnKk[_0x3703d4(0x274)],FbVnKk['OvsPT']),');'));_0xd25b96=FbVnKk[_0x3703d4(0x206)](_0x5c4d56);}}finally{_0x421ee4[_0x3703d4(0x253)](_0x421ee4[_0x3703d4(0x25f)],_0x421ee4[_0x3703d4(0x25f)])?_0x104f65[_0x3703d4(0x2d5)]():(_0x1d00bb[_0x3703d4(0x186)](_0x3f790d[_0x3703d4(0x293)]),_0x5daacf[_0x3703d4(0x226)](0x194)[_0x3703d4(0x19c)](_0x1af215[_0x3703d4(0x29c)]));}}),p['post'](F,_0x599d9b[_0xc63303(0x24f)],async(_0x410c07,_0x2b6d8e)=>{const _0x44dbdc=_0xc63303,_0x11642a={'QSElt':function(_0xbce5e6,_0x2fba93){return _0xbce5e6!==_0x2fba93;},'zsdyp':_0x44dbdc(0x1a4),'zHIIM':_0x44dbdc(0x193),'JjSdl':_0x44dbdc(0x291),'XOjrV':'application/octet-stream','slTot':_0x44dbdc(0x2b4),'jsXCC':_0x44dbdc(0x271)},{filename:_0x23541a}=_0x410c07[_0x44dbdc(0x216)];if(!_0x23541a)return _0x2b6d8e[_0x44dbdc(0x226)](0x190)[_0x44dbdc(0x1bc)](_0x11642a[_0x44dbdc(0x1fb)]);const {folderName:_0x1c5a16}=y[_0x44dbdc(0x1b5)](_0x410c07[_0x44dbdc(0x261)]),_0x566d7f=_0x35e93b[_0x44dbdc(0x2c4)](_0x1c5a16,_0x23541a),_0x3afe5b=_0x35e93b[_0x44dbdc(0x199)](_0x23541a)[_0x44dbdc(0x16e)](),_0x2f45cd={'.jpg':_0x11642a[_0x44dbdc(0x2b5)],'.jpeg':_0x11642a[_0x44dbdc(0x2b5)]};_0x41e7e1[_0x44dbdc(0x1b0)](_0x566d7f,(_0x2bbace,_0x1da183)=>{const _0x14f8b1=_0x44dbdc;if(_0x11642a[_0x14f8b1(0x27e)](_0x11642a[_0x14f8b1(0x296)],_0x11642a[_0x14f8b1(0x296)])){const _0x402b8d=_0x1189d7[_0x14f8b1(0x1ab)](_0x353860,arguments);return _0x554928=null,_0x402b8d;}else{if(_0x2bbace)return console[_0x14f8b1(0x229)](_0x11642a[_0x14f8b1(0x1de)],_0x2bbace),_0x2b6d8e[_0x14f8b1(0x226)](0x1f4)[_0x14f8b1(0x1bc)](_0x11642a[_0x14f8b1(0x2e8)]);const _0x116fd2=_0x2f45cd[_0x3afe5b]||_0x11642a[_0x14f8b1(0x197)];_0x2b6d8e[_0x14f8b1(0x260)](0xc8,{'Content-Type':_0x116fd2}),_0x2b6d8e[_0x14f8b1(0x220)](_0x1da183);}});}),p[_0xc63303(0x20b)](M,_0x599d9b[_0xc63303(0x24f)],async(_0x67e327,_0x2321be)=>{const _0x336134=_0xc63303,_0x1c8b86={'GrPFE':function(_0xc9627a,_0x10fc1c){return _0xc9627a(_0x10fc1c);},'hMNvs':function(_0x23f42c,_0x281250){return _0x23f42c!==_0x281250;},'VJsEb':_0x336134(0x18b),'vHjqB':function(_0x12cd06,_0x4750d8){return _0x12cd06(_0x4750d8);},'VvxVA':function(_0x3aa1be,_0x12415f){return _0x3aa1be>_0x12415f;},'MzLHW':function(_0x2c4afb,_0x1bb9f4){return _0x2c4afb(_0x1bb9f4);},'ZtwzX':function(_0x48c622,_0x3d8ba1){return _0x48c622+_0x3d8ba1;},'fOoWS':function(_0x56750f,_0x18fa0c){return _0x56750f===_0x18fa0c;},'kmApn':'RkTnb','QDDFR':_0x336134(0x28b),'wbNyq':function(_0xba6042,_0x3550ad){return _0xba6042!=_0x3550ad;},'IyQPL':'ไม่สามารถชำระหนี้ได้{{sep}}เนื่องจากสถานะเอกสารไม่ใช่\x201\x20หรือ\x202','wWizj':_0x336134(0x2a4),'sxSZc':function(_0x381fbe,_0x2a1974){return _0x381fbe!=_0x2a1974;},'mqajc':_0x336134(0x22d),'HNiWg':_0x336134(0x2cb),'fEuqH':function(_0xb0cb8f,_0x52acd7){return _0xb0cb8f<=_0x52acd7;},'Tmici':function(_0x32c71f,_0x4aff1c){return _0x32c71f==_0x4aff1c;},'oFJSk':function(_0x32fce1,_0x3b43af){return _0x32fce1<_0x3b43af;},'SGwqM':_0x336134(0x2b9),'fbWUA':_0x336134(0x1d7),'izNkx':function(_0x4e39e9,_0x2fec81){return _0x4e39e9<_0x2fec81;},'RJdSG':'yellow','TVLQN':'ยอดเงินที่ชำระ\x20ไม่ได้เปลี่ยนแปลงจากเดิม','tseAs':'ไม่สามารถชำระหนี้ได้','mCSgc':function(_0x2998c6,_0x5dbda6){return _0x2998c6===_0x5dbda6;},'SsJQL':'nwXUX','RFajO':function(_0x343791,_0x2ec936){return _0x343791===_0x2ec936;},'DfAfR':_0x336134(0x24d),'WfHGJ':_0x336134(0x27b)};let {payDebtRows:_0x1b0284,docId:_0x5afad2}=_0x67e327[_0x336134(0x216)];const _0xd14a55=new _0x443076(global[_0x336134(0x1a5)]);await _0xd14a55[_0x336134(0x1d8)]();try{if(_0x1c8b86[_0x336134(0x224)](_0x1c8b86[_0x336134(0x290)],_0x1c8b86[_0x336134(0x290)])){const _0x2d4c11=y[_0x336134(0x1b5)](_0x67e327[_0x336134(0x261)]),_0x3b03b8=_0xd14a55['db'](global['dbName'])[_0x336134(0x1d0)](_0x2d4c11['collectionName']),_0x3c63a4=await _0x3b03b8['findOne']({'docId':_0x5afad2});if(!_0x3c63a4)return _0x2321be['send'](JSON[_0x336134(0x26a)]({'isSave':!0x1,'class':_0x1c8b86[_0x336134(0x2d3)],'msg':'ไม่พบเอกสาร\x20\x27'+_0x5afad2+'\x27'}));if(_0x1c8b86['wbNyq'](_0x3c63a4[_0x336134(0x1cc)],0x1)&&_0x1c8b86[_0x336134(0x18a)](_0x3c63a4['docStatusNumber'],0x2))return _0x2321be[_0x336134(0x1bc)](JSON['stringify']({'isSave':!0x1,'class':_0x1c8b86[_0x336134(0x2d3)],'msg':_0x1c8b86['IyQPL']}));if(_0x3c63a4[_0x336134(0x245)])return _0x2321be['send'](JSON[_0x336134(0x26a)]({'isSave':!0x1,'class':_0x1c8b86[_0x336134(0x2d3)],'msg':_0x1c8b86[_0x336134(0x1ca)]}));if(_0x1c8b86['sxSZc']((await _[_0x336134(0x275)](_0x67e327))[_0x336134(0x29b)],_0x3c63a4[_0x336134(0x29b)]))return _0x2321be[_0x336134(0x1bc)](JSON[_0x336134(0x26a)]({'isSave':!0x1,'class':_0x1c8b86[_0x336134(0x2d3)],'msg':_0x1c8b86[_0x336134(0x1b9)]}));let _0x2aaa75=0x0,_0x30a4f0=!0x0,_0x313913=S['getDateTime']();if(_0x1b0284[_0x336134(0x27f)](_0x466fd5=>{const _0x429da4=_0x336134;_0x1c8b86['hMNvs'](_0x1c8b86[_0x429da4(0x2de)],_0x1c8b86[_0x429da4(0x2de)])?qtslnc[_0x429da4(0x2c0)](_0x17ec75,0x0):(_0x466fd5[_0x429da4(0x22c)]=_0x1c8b86[_0x429da4(0x1bf)](Number,_0x466fd5[_0x429da4(0x22c)]),_0x466fd5[_0x429da4(0x2d4)]=_0x1c8b86[_0x429da4(0x2c0)](Number,_0x466fd5[_0x429da4(0x2d4)]),_0x466fd5[_0x429da4(0x19e)]=_0x313913,_0x1c8b86['VvxVA'](_0x466fd5[_0x429da4(0x22c)],0x0)&&(_0x30a4f0=!0x1),_0x2aaa75+=_0x466fd5['amount']);}),_0x30a4f0)return _0x2321be[_0x336134(0x1bc)](JSON['stringify']({'isSave':!0x1,'class':_0x1c8b86[_0x336134(0x2d3)],'msg':_0x1c8b86[_0x336134(0x1d6)]}));if(_0x1c8b86[_0x336134(0x1ee)](_0x2aaa75,_0x3c63a4['paymentAmount2'])&&_0x1c8b86[_0x336134(0x1eb)](_0x2aaa75,0x0))return _0x2321be[_0x336134(0x1bc)](JSON['stringify']({'isSave':!0x1,'class':_0x1c8b86[_0x336134(0x2d3)],'msg':_0x336134(0x24a)+_0x3c63a4['paymentAmount2']}));if(_0x1c8b86['Tmici'](_0x2aaa75,_0x3c63a4[_0x336134(0x173)]))var _0x546eb7=!0x0;else{if(_0x1c8b86['oFJSk'](_0x2aaa75,_0x3c63a4[_0x336134(0x173)]))var _0x546eb7=!0x1;}const _0x3679cb=await _0x3b03b8[_0x336134(0x1a2)]({'docId':_0x5afad2},{'$set':{'isDebtPaidOff':_0x546eb7,'payDebtRows':_0x1b0284}});return _0x1c8b86[_0x336134(0x1ee)](_0x3679cb[_0x336134(0x16c)],0x0)?_0x2321be[_0x336134(0x1bc)](JSON[_0x336134(0x26a)]({'isSave':!0x0,'class':_0x1c8b86['SGwqM'],'doc':{'docId':_0x5afad2,'isDebtPaidOff':_0x546eb7,'payDebtRows':_0x1b0284},'msg':_0x1c8b86[_0x336134(0x17a)]})):_0x3679cb[_0x336134(0x2ef)]&&_0x1c8b86[_0x336134(0x1a1)](_0x3679cb[_0x336134(0x16c)],0x1)?_0x2321be[_0x336134(0x1bc)](JSON[_0x336134(0x26a)]({'isSave':!0x1,'class':_0x1c8b86[_0x336134(0x222)],'msg':_0x1c8b86[_0x336134(0x2b3)]})):_0x2321be[_0x336134(0x1bc)](JSON[_0x336134(0x26a)]({'isSave':!0x1,'class':_0x1c8b86[_0x336134(0x2d3)],'msg':_0x1c8b86[_0x336134(0x1c5)]}));}else _0x648a6[_0x336134(0x2d5)]();}catch(_0x533b31){_0x1c8b86[_0x336134(0x28d)](_0x1c8b86[_0x336134(0x234)],_0x1c8b86[_0x336134(0x234)])?(console[_0x336134(0x186)](_0x533b31),_0x2321be[_0x336134(0x1bc)](JSON[_0x336134(0x26a)]({'isSave':!0x1,'class':_0x1c8b86[_0x336134(0x2d3)],'msg':_0x533b31[_0x336134(0x293)]}))):qtslnc[_0x336134(0x16b)](_0x310a69,'0');}finally{if(_0x1c8b86[_0x336134(0x21e)](_0x1c8b86[_0x336134(0x202)],_0x1c8b86[_0x336134(0x2db)])){const _0x3a5bfa=_0x1fec22[0x0]['docId'],_0x628270=_0x1c8b86[_0x336134(0x16b)](_0x178bd4,_0x3a5bfa[_0x336134(0x219)]('-')[0x1]);_0x1d9597=_0x58a52f+'-'+_0x1c8b86[_0x336134(0x16b)](_0x59c73c,_0x1c8b86[_0x336134(0x2ce)](_0x628270,0x1))['padStart'](0x5,'0');}else _0xd14a55[_0x336134(0x2d5)]();}});export default p;function _0x3007dc(_0xc9d84){const _0x45d3bb=_0xc63303,_0x4860b8={'DnKot':function(_0x460c4d,_0x4446c1){return _0x460c4d===_0x4446c1;},'sIQVD':_0x45d3bb(0x215),'USIDh':_0x45d3bb(0x2f1),'XXIsX':'counter','CYzPj':function(_0x346752,_0x4e1883){return _0x346752!==_0x4e1883;},'MuYTi':function(_0x5583bb,_0x43144b){return _0x5583bb+_0x43144b;},'nMfNF':function(_0x248e20,_0x29e739){return _0x248e20/_0x29e739;},'YNJpC':_0x45d3bb(0x299),'CWIzK':function(_0x16388b,_0x523d70){return _0x16388b%_0x523d70;},'WaFXx':function(_0x105981,_0x354146){return _0x105981+_0x354146;},'QLtim':_0x45d3bb(0x20e),'JYFem':_0x45d3bb(0x1e8),'QvOrn':'action','UKCMc':_0x45d3bb(0x24c),'wtrcx':function(_0x122dce,_0x43612e){return _0x122dce(_0x43612e);},'iIKsu':function(_0x5115fe,_0x236449){return _0x5115fe(_0x236449);}};function _0x587cbc(_0x104da8){const _0xd3d420=_0x45d3bb;if(_0x4860b8['DnKot'](typeof _0x104da8,_0x4860b8[_0xd3d420(0x263)]))return function(_0x1a48b7){}['constructor'](_0x4860b8[_0xd3d420(0x246)])['apply'](_0x4860b8[_0xd3d420(0x1c0)]);else _0x4860b8[_0xd3d420(0x1f5)](_0x4860b8[_0xd3d420(0x2e9)]('',_0x4860b8[_0xd3d420(0x2d0)](_0x104da8,_0x104da8))[_0x4860b8[_0xd3d420(0x211)]],0x1)||_0x4860b8['DnKot'](_0x4860b8[_0xd3d420(0x20c)](_0x104da8,0x14),0x0)?function(){return!![];}[_0xd3d420(0x2ba)](_0x4860b8[_0xd3d420(0x28e)](_0x4860b8[_0xd3d420(0x2a1)],_0x4860b8['JYFem']))[_0xd3d420(0x1ba)](_0x4860b8[_0xd3d420(0x27d)]):function(){return![];}['constructor'](_0x4860b8[_0xd3d420(0x2e9)](_0x4860b8['QLtim'],_0x4860b8[_0xd3d420(0x2a9)]))['apply'](_0x4860b8[_0xd3d420(0x256)]);_0x4860b8['wtrcx'](_0x587cbc,++_0x104da8);}try{if(_0xc9d84)return _0x587cbc;else _0x4860b8[_0x45d3bb(0x1ea)](_0x587cbc,0x0);}catch(_0xbb8529){}}