const _0x21adc5=_0x2c9a;(function(_0x599989,_0x3875ce){const _0x256724=_0x2c9a,_0x152272=_0x599989();while(!![]){try{const _0x5ec212=-parseInt(_0x256724(0x281))/0x1*(parseInt(_0x256724(0x15c))/0x2)+-parseInt(_0x256724(0x182))/0x3*(-parseInt(_0x256724(0x140))/0x4)+parseInt(_0x256724(0x2af))/0x5+parseInt(_0x256724(0x189))/0x6*(parseInt(_0x256724(0x2b6))/0x7)+parseInt(_0x256724(0x157))/0x8*(parseInt(_0x256724(0x24a))/0x9)+-parseInt(_0x256724(0x21d))/0xa+parseInt(_0x256724(0x295))/0xb;if(_0x5ec212===_0x3875ce)break;else _0x152272['push'](_0x152272['shift']());}catch(_0x17a6a2){_0x152272['push'](_0x152272['shift']());}}}(_0x4d8f,0x5d739));const _0x1796d9=(function(){const _0x392689=_0x2c9a,_0x4b2c08={'reAQy':function(_0x22247d,_0x32773b){return _0x22247d!==_0x32773b;},'YkkPE':'YMNwH','HDuXd':function(_0x531251,_0x1714ba){return _0x531251!==_0x1714ba;},'RnZtZ':_0x392689(0x1bc),'TBJxZ':_0x392689(0x251),'vGFnz':function(_0x53b3d7,_0x20750e){return _0x53b3d7(_0x20750e);},'WrVOX':function(_0x7777bd,_0x3b147c){return _0x7777bd+_0x3b147c;},'GQnNy':_0x392689(0x23c),'JEnhY':_0x392689(0x264),'lHpvT':_0x392689(0x286)};let _0x91b5ca=!![];return function(_0x13a50e,_0x42ad22){const _0x43ce1c=_0x392689,_0x343b7c={'YbnjB':function(_0x245e83,_0x275232){return _0x4b2c08['vGFnz'](_0x245e83,_0x275232);},'vphmz':function(_0x46c27a,_0x13c732){const _0xe74ebc=_0x2c9a;return _0x4b2c08[_0xe74ebc(0x1fb)](_0x46c27a,_0x13c732);},'aswOY':function(_0x484fc0,_0x5174f2){const _0x12e419=_0x2c9a;return _0x4b2c08[_0x12e419(0x1fb)](_0x484fc0,_0x5174f2);},'MhfKU':_0x4b2c08[_0x43ce1c(0x29d)],'tnIyf':_0x4b2c08[_0x43ce1c(0x23f)]};if(_0x4b2c08[_0x43ce1c(0x220)](_0x4b2c08[_0x43ce1c(0x1f2)],_0x4b2c08[_0x43ce1c(0x1f2)])){const _0x28687b=_0x5758b1?function(){if(_0x3a5f7f){const _0x283bf9=_0x24b897['apply'](_0x32bd8c,arguments);return _0xfa4d90=null,_0x283bf9;}}:function(){};return _0x593dd2=![],_0x28687b;}else{const _0x410f0d=_0x91b5ca?function(){const _0x16ddbb=_0x43ce1c;if(_0x4b2c08[_0x16ddbb(0x252)](_0x4b2c08[_0x16ddbb(0x180)],_0x4b2c08['YkkPE']))_0x4dc002[_0x16ddbb(0x237)]();else{if(_0x42ad22){if(_0x4b2c08[_0x16ddbb(0x220)](_0x4b2c08['RnZtZ'],_0x4b2c08[_0x16ddbb(0x22e)])){const _0x14faab=_0x42ad22[_0x16ddbb(0x184)](_0x13a50e,arguments);return _0x42ad22=null,_0x14faab;}else _0xce5797=_0x343b7c['YbnjB'](_0x4d3631,_0x343b7c['vphmz'](_0x343b7c[_0x16ddbb(0x19d)](_0x343b7c[_0x16ddbb(0x274)],_0x343b7c[_0x16ddbb(0x288)]),');'))();}}}:function(){};return _0x91b5ca=![],_0x410f0d;}};}());(function(){const _0x47ab38=_0x2c9a,_0x115b86={'bJqpL':_0x47ab38(0x1f1),'gZtgv':_0x47ab38(0x238),'rqFVz':function(_0x2145b2,_0x204008){return _0x2145b2(_0x204008);},'ToCCR':function(_0x4e729c,_0x15a531){return _0x4e729c+_0x15a531;},'NbjlI':_0x47ab38(0x23c),'fCWuk':_0x47ab38(0x264),'VIteS':'Error\x20reading\x20image:','eAscH':_0x47ab38(0x17d),'eDQCh':'application/octet-stream','dpSzb':function(_0x63c38c,_0x250545){return _0x63c38c!==_0x250545;},'KLypF':_0x47ab38(0x26d),'wgdUr':_0x47ab38(0x2a8),'DTgrG':_0x47ab38(0x1a8),'fcLvU':'\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','uFNxm':function(_0xaf7dbb,_0x17fc8c){return _0xaf7dbb(_0x17fc8c);},'coSHn':_0x47ab38(0x168),'DMnyo':_0x47ab38(0x1f6),'jqYrR':function(_0x1bdd44,_0x343169){return _0x1bdd44+_0x343169;},'HMdNR':_0x47ab38(0x2aa),'tfsHa':function(_0x446343,_0xcdd291){return _0x446343===_0xcdd291;},'SwVUQ':_0x47ab38(0x19c),'cxlhE':function(_0x57d4f3,_0x2eb5b9){return _0x57d4f3(_0x2eb5b9);},'ARNyj':function(_0x39f83e,_0x153db3){return _0x39f83e!==_0x153db3;},'atPBN':_0x47ab38(0x18d),'PhWQP':_0x47ab38(0x15a),'Xolqo':function(_0x2c023a){return _0x2c023a();},'tUHAP':function(_0x250cd2,_0xbf40cb,_0x21ba8c){return _0x250cd2(_0xbf40cb,_0x21ba8c);}};_0x115b86[_0x47ab38(0x253)](_0x1796d9,this,function(){const _0x12a30a=_0x47ab38,_0x1514ad={'rJArV':_0x115b86['VIteS'],'LVLwG':_0x115b86['eAscH'],'altnY':_0x115b86[_0x12a30a(0x17b)]};if(_0x115b86[_0x12a30a(0x1f4)](_0x115b86['KLypF'],_0x115b86[_0x12a30a(0x2a1)])){const _0x40671d=new RegExp(_0x115b86[_0x12a30a(0x2b1)]),_0x4a553f=new RegExp(_0x115b86[_0x12a30a(0x150)],'i'),_0x5651fd=_0x115b86['uFNxm'](_0x3e0f15,_0x115b86[_0x12a30a(0x219)]);if(!_0x40671d['test'](_0x115b86[_0x12a30a(0x2ab)](_0x5651fd,_0x115b86[_0x12a30a(0x18e)]))||!_0x4a553f[_0x12a30a(0x27e)](_0x115b86[_0x12a30a(0x1d8)](_0x5651fd,_0x115b86[_0x12a30a(0x205)]))){if(_0x115b86[_0x12a30a(0x1b4)](_0x115b86[_0x12a30a(0x2b5)],_0x115b86[_0x12a30a(0x2b5)]))_0x115b86[_0x12a30a(0x200)](_0x5651fd,'0');else{const _0x57e6e8=_0x306c56[_0x12a30a(0x184)](_0x4d65ee,arguments);return _0x4572f7=null,_0x57e6e8;}}else{if(_0x115b86[_0x12a30a(0x1ea)](_0x115b86['atPBN'],_0x115b86['PhWQP']))_0x115b86['Xolqo'](_0x3e0f15);else{const {filename:_0xda627f}=_0x38dd13[_0x12a30a(0x2ae)];if(!_0xda627f)return _0x1d7d02[_0x12a30a(0x1c7)](0x190)[_0x12a30a(0x26a)](_0x115b86[_0x12a30a(0x22c)]);const {folderName:_0x557651}=_0x1b0f98['get_Info_ByPath'](_0x3e66b8[_0x12a30a(0x291)]),_0xa2d0dd=_0xb0d349[_0x12a30a(0x1b0)](_0x557651,_0xda627f),_0x6738dd=_0x17c3ce[_0x12a30a(0x27a)](_0xda627f)[_0x12a30a(0x1bf)](),_0x30f2a9={'.jpg':_0x115b86['gZtgv'],'.jpeg':_0x115b86[_0x12a30a(0x141)]};_0x6cbc81[_0x12a30a(0x270)](_0xa2d0dd,(_0x49f676,_0x12464c)=>{const _0x55de20=_0x12a30a;if(_0x49f676)return _0x4f0621[_0x55de20(0x26e)](_0x1514ad[_0x55de20(0x2b0)],_0x49f676),_0x215278[_0x55de20(0x1c7)](0x1f4)['send'](_0x1514ad[_0x55de20(0x271)]);const _0x353a16=_0x30f2a9[_0x6738dd]||_0x1514ad[_0x55de20(0x2a6)];_0x276253[_0x55de20(0x25c)](0xc8,{'Content-Type':_0x353a16}),_0xc3ee7[_0x55de20(0x207)](_0x12464c);});}}}else{let _0x4606e0;try{_0x4606e0=_0x115b86[_0x12a30a(0x276)](_0x3bc840,_0x115b86['ToCCR'](_0x115b86[_0x12a30a(0x2ab)](_0x115b86[_0x12a30a(0x181)],_0x115b86[_0x12a30a(0x1e9)]),');'))();}catch(_0x5beb1f){_0x4606e0=_0x11dfae;}return _0x4606e0;}})();}());const _0x52fff5=(function(){const _0x1a0df2=_0x2c9a,_0x365a56={'EfrCJ':function(_0x257e2e,_0x2ff383){return _0x257e2e(_0x2ff383);},'lWYil':function(_0x1bb676,_0xb78e71){return _0x1bb676===_0xb78e71;},'eQYKe':_0x1a0df2(0x155),'EPbYH':_0x1a0df2(0x22a),'EJusu':function(_0x40be53,_0x4584e8){return _0x40be53!==_0x4584e8;},'UqXlF':_0x1a0df2(0x273),'UfFnS':function(_0x51ae68,_0x21d29c){return _0x51ae68!==_0x21d29c;},'KBQoH':'QADXL','EsyvP':_0x1a0df2(0x289)};let _0x1b167b=!![];return function(_0x1f90be,_0x3ba30d){const _0x192274=_0x1a0df2,_0x5d80ac={'Vcadf':function(_0x4cd895,_0x40297a){const _0x258d43=_0x2c9a;return _0x365a56[_0x258d43(0x25d)](_0x4cd895,_0x40297a);},'ctFop':function(_0x5e4c60,_0x2ff345){const _0x5c725a=_0x2c9a;return _0x365a56[_0x5c725a(0x2a7)](_0x5e4c60,_0x2ff345);},'lBaEn':_0x365a56[_0x192274(0x1eb)],'YJKHP':_0x365a56[_0x192274(0x232)],'Shadk':function(_0x1f7987,_0x22b0a7){const _0x260b78=_0x192274;return _0x365a56[_0x260b78(0x1ca)](_0x1f7987,_0x22b0a7);},'baKvA':_0x365a56['UqXlF']};if(_0x365a56['UfFnS'](_0x365a56[_0x192274(0x214)],_0x365a56['EsyvP'])){const _0x118df1=_0x1b167b?function(){const _0x271ea7=_0x192274,_0x5677d2={'gswjP':function(_0x26cc2b,_0x4f710b){const _0xe6fe9=_0x2c9a;return _0x5d80ac[_0xe6fe9(0x145)](_0x26cc2b,_0x4f710b);}};if(_0x5d80ac[_0x271ea7(0x1cd)](_0x5d80ac[_0x271ea7(0x227)],_0x5d80ac['YJKHP']))_0x5677d2['gswjP'](_0x3c7e0d,0x0);else{if(_0x3ba30d){if(_0x5d80ac[_0x271ea7(0x171)](_0x5d80ac[_0x271ea7(0x21b)],_0x5d80ac[_0x271ea7(0x21b)])){const _0xacb662=_0x24f69d[_0x271ea7(0x184)](_0x1aa3dc,arguments);return _0xc9bfbc=null,_0xacb662;}else{const _0xb5a23c=_0x3ba30d[_0x271ea7(0x184)](_0x1f90be,arguments);return _0x3ba30d=null,_0xb5a23c;}}}}:function(){};return _0x1b167b=![],_0x118df1;}else{if(_0x1a4f8a){const _0x51db42=_0x3575d0[_0x192274(0x184)](_0x538d6a,arguments);return _0x10399c=null,_0x51db42;}}};}()),_0x328214=_0x52fff5(this,function(){const _0x4f9934=_0x2c9a,_0x4d6ea3={'MafdP':'function\x20*\x5c(\x20*\x5c)','bwQvF':'\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','fJjBh':function(_0x5ea1e7,_0x434ba5){return _0x5ea1e7(_0x434ba5);},'uhBzm':_0x4f9934(0x168),'PmLbv':function(_0x523443,_0x23ab48){return _0x523443+_0x23ab48;},'YCAzg':'chain','QPmkW':function(_0x48d1d9,_0x406fb7){return _0x48d1d9+_0x406fb7;},'eYVAX':_0x4f9934(0x2aa),'QSZjj':function(_0x32df00){return _0x32df00();},'hzJVR':function(_0x730995,_0x4d5d9a,_0x216c2b){return _0x730995(_0x4d5d9a,_0x216c2b);},'CBjzt':function(_0x15886b,_0x49b6f7){return _0x15886b(_0x49b6f7);},'OPyXc':function(_0x2f0b5d,_0x41cc53){return _0x2f0b5d===_0x41cc53;},'DTGSW':'iAmTJ','KzNJI':_0x4f9934(0x260),'hhjXO':function(_0x2ad67e,_0x563d33){return _0x2ad67e!==_0x563d33;},'mqlKR':_0x4f9934(0x1a1),'iArVY':'OnuoH','vxsPN':function(_0x321762,_0x36ea62){return _0x321762+_0x36ea62;},'NkrYw':_0x4f9934(0x23c),'YfszS':_0x4f9934(0x264),'etRpo':_0x4f9934(0x1ff),'zMVhr':function(_0x38feaf){return _0x38feaf();},'FpRPf':_0x4f9934(0x298),'ntYTd':_0x4f9934(0x241),'UwNSv':_0x4f9934(0x1a9),'KyRvr':_0x4f9934(0x26e),'PcRKY':'exception','QlLeO':_0x4f9934(0x234),'htERU':'trace','TmvuF':function(_0x1910e2,_0x50e67d){return _0x1910e2<_0x50e67d;},'gKuGL':'iepbF','ISBUx':_0x4f9934(0x19f)},_0x460661=function(){const _0x536913=_0x4f9934,_0xaa3479={'JbYdu':function(_0x428cc2,_0x509af6){return _0x4d6ea3['CBjzt'](_0x428cc2,_0x509af6);}};if(_0x4d6ea3['OPyXc'](_0x4d6ea3['DTGSW'],_0x4d6ea3[_0x536913(0x179)])){const _0x25574c={'TfjbG':_0x4d6ea3['MafdP'],'eztVr':_0x4d6ea3['bwQvF'],'KYTIl':function(_0x5c8e17,_0x37f995){const _0x5c72f5=_0x536913;return _0x4d6ea3[_0x5c72f5(0x1b3)](_0x5c8e17,_0x37f995);},'YfTyk':_0x4d6ea3[_0x536913(0x2a5)],'gTUqK':function(_0x1b689f,_0x57e25f){const _0x1b3849=_0x536913;return _0x4d6ea3[_0x1b3849(0x14d)](_0x1b689f,_0x57e25f);},'JwyuN':_0x4d6ea3[_0x536913(0x177)],'DWUDD':function(_0x3798c7,_0x432ea9){const _0x455edb=_0x536913;return _0x4d6ea3[_0x455edb(0x14b)](_0x3798c7,_0x432ea9);},'npFUJ':_0x4d6ea3[_0x536913(0x265)],'oJOdq':function(_0x19730f){const _0x1ab89b=_0x536913;return _0x4d6ea3[_0x1ab89b(0x249)](_0x19730f);}};_0x4d6ea3['hzJVR'](_0x29580d,this,function(){const _0x19fed4=_0x536913,_0x15ea5c=new _0x569045(_0x25574c[_0x19fed4(0x278)]),_0x1d5dbd=new _0x30db77(_0x25574c[_0x19fed4(0x1fe)],'i'),_0x4c73ba=_0x25574c['KYTIl'](_0x247a8d,_0x25574c[_0x19fed4(0x17f)]);!_0x15ea5c[_0x19fed4(0x27e)](_0x25574c[_0x19fed4(0x1c9)](_0x4c73ba,_0x25574c['JwyuN']))||!_0x1d5dbd['test'](_0x25574c[_0x19fed4(0x299)](_0x4c73ba,_0x25574c[_0x19fed4(0x28e)]))?_0x25574c[_0x19fed4(0x1fc)](_0x4c73ba,'0'):_0x25574c[_0x19fed4(0x284)](_0x252934);})();}else{let _0x4f06cd;try{_0x4d6ea3[_0x536913(0x1ec)](_0x4d6ea3['mqlKR'],_0x4d6ea3['iArVY'])?_0x4f06cd=_0x4d6ea3[_0x536913(0x17c)](Function,_0x4d6ea3[_0x536913(0x14d)](_0x4d6ea3['vxsPN'](_0x4d6ea3['NkrYw'],_0x4d6ea3[_0x536913(0x1da)]),');'))():(_0x4fccd9[_0x536913(0x298)](_0x8773c[_0x536913(0x1b9)]),_0xfa9c11[_0x536913(0x1c7)](0x194)['sendFile'](_0x3de97d[_0x536913(0x206)]));}catch(_0x70eb67){if(_0x4d6ea3[_0x536913(0x1d5)](_0x4d6ea3['etRpo'],_0x4d6ea3[_0x536913(0x1ac)]))_0x4f06cd=window;else{if(_0x5088e1)return _0x5450d6;else _0xaa3479[_0x536913(0x282)](_0x4ebf87,0x0);}}return _0x4f06cd;}},_0xa44ae1=_0x4d6ea3[_0x4f9934(0x2a3)](_0x460661),_0x179eef=_0xa44ae1[_0x4f9934(0x1d4)]=_0xa44ae1[_0x4f9934(0x1d4)]||{},_0x21500b=[_0x4d6ea3[_0x4f9934(0x1e0)],_0x4d6ea3[_0x4f9934(0x146)],_0x4d6ea3[_0x4f9934(0x143)],_0x4d6ea3[_0x4f9934(0x193)],_0x4d6ea3[_0x4f9934(0x218)],_0x4d6ea3['QlLeO'],_0x4d6ea3[_0x4f9934(0x187)]];for(let _0x2c3dfd=0x0;_0x4d6ea3[_0x4f9934(0x1e7)](_0x2c3dfd,_0x21500b[_0x4f9934(0x23d)]);_0x2c3dfd++){if(_0x4d6ea3['OPyXc'](_0x4d6ea3[_0x4f9934(0x247)],_0x4d6ea3[_0x4f9934(0x14c)])){const _0x47f82e=_0x1d332b?function(){if(_0x1c5891){const _0x43cf05=_0x1804b6['apply'](_0x2810dc,arguments);return _0x248ac4=null,_0x43cf05;}}:function(){};return _0x508e2c=![],_0x47f82e;}else{const _0x12d977=_0x52fff5[_0x4f9934(0x167)][_0x4f9934(0x213)][_0x4f9934(0x257)](_0x52fff5),_0x286621=_0x21500b[_0x2c3dfd],_0x5da152=_0x179eef[_0x286621]||_0x12d977;_0x12d977['__proto__']=_0x52fff5[_0x4f9934(0x257)](_0x52fff5),_0x12d977[_0x4f9934(0x233)]=_0x5da152[_0x4f9934(0x233)]['bind'](_0x5da152),_0x179eef[_0x286621]=_0x12d977;}}});_0x328214();import _0x5afa4f from'path';import _0x5a2f5d from'fs';import _0x2ba005 from'sharp';import _0x1bb1a8 from'express';function _0x2c9a(_0x25188c,_0x57cf3f){const _0x38099d=_0x4d8f();return _0x2c9a=function(_0x328214,_0x52fff5){_0x328214=_0x328214-0x13c;let _0x483328=_0x38099d[_0x328214];return _0x483328;},_0x2c9a(_0x25188c,_0x57cf3f);}const p=_0x1bb1a8[_0x21adc5(0x21f)]();import{MongoClient as _0x180033}from'mongodb';function _0x4d8f(){const _0x3fa344=['toString','table','modifiedCount','gOyPl','close','image/jpeg','isDebtPaidOff','application/octet-stream','dateTime','return\x20(function()\x20','length','zpPgA','JEnhY','docId','warn','isAuth','/pay-debt','ยอดเงินที่ชำระ\x20ไม่ได้เปลี่ยนแปลงจากเดิม','userAuthority','WBNjw','gKuGL','ifyFT','QSZjj','9NEHTfb','GzREm','FUHTG','ไม่สามารถบันทึกเอกสาร\x20สถานะ\x20','zMvVN','xACnz','sJPVH','PfRON','reAQy','tUHAP','counter','oSkht','KmOUN','bind','orAAk','gger','branchId','sendFile','writeHead','EfrCJ','insertOne','docMain','bOexf','docDateTime','myBaM','dateTimeEditRemain','{}.constructor(\x22return\x20this\x22)(\x20)','eYVAX','rFaOh','LOQue','จำนวนเงินที่ชำระ\x20ต้องมากกว่า\x200\x20ทุกแถว','HfRgH','send','mAuZS','docType','MDBfx','error','amount','readFile','LVLwG','getSettings','Cugtw','MhfKU','JojAZ','rqFVz','mAalS','TfjbG','NZGaA','extname','getDateTime','AnPYi','ยอดเงินที่ชำระทั้งหมด\x20ต้องไม่เกิน\x20ยอดหนี้\x20','test','getChangeHistory','userFullname','2213rskbhV','JbYdu','PATH_WAREHOUSE_OUT','oJOdq','Jfvev','YVynF','acknowledged','tnIyf','eRHlh','nvRru','get_Info_ByPath','BoEBi','UAMyI','npFUJ','fgPbm','lWRAF','path','dbUrl','lbWCt','XxXvs','768482blbtEG','.jpg','wyQEb','log','DWUDD','lOpjp','canEdit','getSessionData','GQnNy','green','collectionName','msg','wgdUr','bJgHt','zMVhr','string','uhBzm','altnY','lWYil','pEOAd','slice','input','ToCCR','dateTimeCanCancel','userId','body','381965NotTLG','rJArV','DTgrG','JyVhK','includes','/myDocMain.js','SwVUQ','1997562EwqQsY','pmRNC','PATH_WAREHOUSE_IN','tqjsv','spUHx','75340SmmLnV','gZtgv','FmXKj','UwNSv','UHVrp','Vcadf','ntYTd','PsVSn','padStart','ไม่พบประเภทเอกสาร','split','QPmkW','ISBUx','PmLbv','EtaFQ','giWCn','fcLvU','NQSta','SpIEM','/myData.js','zqQEU','IgxKV','replace','5706776BbsaQK','return','nnESC','yVciJ','red','446vdrbVp','ZoSOW','xgnJo','COfap','ไม่สามารถอัปเดทเอกสารได้{{sep}}เนื่องจากสถานะเอกสารไม่ใช่\x201\x20แล้ว','PWefi','/myModule.js','AIEHF','yellow','null','PaduW','constructor','init','ifIrf','DajLO','while\x20(true)\x20{}','pCOXh','findOne','hUzWW','getDate','บันทึกเรียบร้อยแล้ว','Shadk','XSJqe','Twoae','debu','PATH_RETURN','WrKuw','YCAzg','EKEkw','KzNJI','from','eDQCh','CBjzt','เกิดข้อผิดพลาดในการดึงรูปภาพ','Wticm','YfTyk','YkkPE','NbjlI','42QruWXG','QyJHy','apply','GqDfV','/view-image','htERU','NziDW','6aoJlGX','flash','QtgOD','GrFrg','pzFNA','DMnyo','warehouseIn','eftDk','hUwGs','SiRWk','KyRvr','nTYMK','/save','HikQo','Udhzy','post','paymentAmount2','Error\x20reading\x20image:','toFile','rirDb','aswOY','getMainDocPathObj','qeUeL','refImage','ALRDu','../','EMGOQ','get','action','ไม่พบเอกสาร\x20\x27','อัปเดท\x20','function\x20*\x5c(\x20*\x5c)','info','FMkyx','PAGE','etRpo','HOOLh','XewFZ','KZosk','join','xqacY','NRltv','fJjBh','tfsHa','nZnGw','wLgkS','oKWuY','pgfZs','message','xSWFo','connect','RyXyK','updateOne','IIOUu','toLowerCase','vEkxg','cnbAz','call','KPtbv','sOXhM','Suxqj','WsIXU','status','MuyRi','gTUqK','EJusu','dateTimeCancelRemain','sales','ctFop','MvmTU','forEach','zsmhC','UucyV','SGCIa','SoFIU','console','OPyXc','hwdeM','docStatusNumber','jqYrR','GtgSd','YfszS','ไม่สามารถบันทึกเอกสารได้{{sep}}เนื่องจากเลยกำหนดยกเลิกเอกสารแล้ว','hoursCanEdit','dateTimeCanEdit','refImageBase64','check_DocDateTime_CanCancel','FpRPf','resize','yKHfu','sort','ejgfQ','ไม่สามารถชำระหนี้ได้{{sep}}เนื่องจากมีการชำระหนี้ครบแล้ว','zVDvU','TmvuF','DqMcv','fCWuk','ARNyj','eQYKe','hhjXO','cJkjD','oUxZb','warehouseOut','WZgjz','ไม่พบไฟล์รูปภาพ','lHpvT','Izsdx','dpSzb','KZemK','chain','\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','dbName','ไม่สามารถชำระหนี้ได้{{sep}}เนื่องจากเอกสารนี้ไม่ใช่ของสาขาที่ท่านสังกัด','__proto__','WrVOX','KYTIl','vKBer','eztVr','LcsRz','cxlhE','XJkNC','Etznd','HdQDL','vQZSE','HMdNR','file404','end','bjcYp','NINMh','Hictr','iycLU','bGdGi','ไม่สามารถชำระหนี้ได้','NXMGM','hoursCanCancel','TqOZB','LLmap','/myUsers.js','prototype','KBQoH','สถานะเอกสารผิดผลาด','qpREV','YbPpk','PcRKY','coSHn','LoUid','baKvA','rEQfZ','5323820GZFcBe','jpeg','Router','HDuXd','stateObject','QeIpo','gXYND','ohAru','cNrHJ','สร้างเอกสารใหม่\x20','lBaEn','DOC_STATUS_TITLE','PAY_TYPE1','yFJue','lSohc','bJqpL','stringify','TBJxZ','Ahgyl','XIbPN','aWhYx','EPbYH'];_0x4d8f=function(){return _0x3fa344;};return _0x4d8f();}import _0x3c0a08 from'../middleware/mainAuth.js';const P=await import(_0x21adc5(0x1a2)+mymoduleFolder+_0x21adc5(0x162)),S=await import(_0x21adc5(0x1a2)+mymoduleFolder+'/myDateTime.js'),_=await import(_0x21adc5(0x1a2)+mymoduleFolder+_0x21adc5(0x212)),J=await import(_0x21adc5(0x1a2)+mymoduleFolder+_0x21adc5(0x153)),y=await import('../'+mymoduleFolder+_0x21adc5(0x2b4)),w=global[_0x21adc5(0x13d)],A=global[_0x21adc5(0x283)],E=global['PATH_SALES'],D=global[_0x21adc5(0x175)],U=[w,A,E,D],Y=[w+_0x21adc5(0x195),A+_0x21adc5(0x195),E+'/save',D+_0x21adc5(0x195)],F=[w+_0x21adc5(0x186),A+'/view-image',D+_0x21adc5(0x186)],M=[E+_0x21adc5(0x243)];p[_0x21adc5(0x1a4)](U,_0x3c0a08[_0x21adc5(0x242)],async(_0x19c26f,_0x2c55d6)=>{const _0x364620=_0x21adc5,_0x5c8f83={'XSitf':'red','SGCIa':function(_0x1dd062,_0x193bf0){return _0x1dd062===_0x193bf0;},'yKHfu':'jANsq','cNrHJ':_0x364620(0x1cc),'hUuAD':_0x364620(0x158),'vEkxg':_0x364620(0x165),'vKBer':_0x364620(0x25f),'OYILv':_0x364620(0x2a0),'KZemK':'XZUTv','rEQfZ':_0x364620(0x15e)},{docId:_0x2be182,sip:_0x1b1b82}=_0x19c26f['query'];try{if(_0x5c8f83[_0x364620(0x1d2)](_0x5c8f83[_0x364620(0x1e2)],_0x5c8f83[_0x364620(0x1e2)])){const _0x1fd371=await _[_0x364620(0x29c)](_0x19c26f),_0x178868=await y[_0x364620(0x19e)](_0x19c26f,_0x2c55d6,_0x1fd371[_0x364620(0x245)]),_0x4821c6=y[_0x364620(0x28b)](_0x19c26f[_0x364620(0x291)]);if([_0x5c8f83[_0x364620(0x225)],_0x5c8f83['hUuAD']][_0x364620(0x2b3)](_0x4821c6[_0x364620(0x26c)]))var _0x3538cf=JSON[_0x364620(0x22d)](global['PAY_TYPE']),_0x160c98=JSON[_0x364620(0x22d)](global[_0x364620(0x229)]),_0x29a013=JSON[_0x364620(0x22d)](global['PAY_TYPE2']);else var _0x3538cf=_0x5c8f83[_0x364620(0x1c0)],_0x160c98=_0x5c8f83[_0x364620(0x1c0)],_0x29a013=_0x5c8f83[_0x364620(0x1c0)];const _0x54370a=await P['renderView'](_0x5c8f83[_0x364620(0x1fd)],_0x2c55d6,{'title':_0x178868[_0x364620(0x1ab)],'time':S['getDate'](),'msg':_0x19c26f[_0x364620(0x18a)](_0x5c8f83['OYILv']),'user':_0x1fd371,'settings':await P[_0x364620(0x272)](),..._0x178868,..._0x4821c6,'DOC_STATUS_TITLE':global[_0x364620(0x228)],'DOC_ID':_0x2be182,'SIP':_0x1b1b82,'hoursCanEdit':_0x4821c6['hoursCanEdit'],'hoursCanCancel':_0x4821c6[_0x364620(0x20f)],'PAY_TYPE_JSON':_0x3538cf,'PAY_TYPE1_JSON':_0x160c98,'PAY_TYPE2_JSON':_0x29a013});_0x2c55d6[_0x364620(0x26a)](_0x54370a);}else _0x1daba9[_0x364620(0x298)](_0x44c6f1),_0x48af31[_0x364620(0x26a)](_0x13279c[_0x364620(0x22d)]({'isSave':!0x1,'class':_0x5c8f83['XSitf'],'msg':_0x1a3e67['message']}));}catch(_0x2c9f1c){_0x5c8f83['SGCIa'](_0x5c8f83[_0x364620(0x1f5)],_0x5c8f83[_0x364620(0x21c)])?_0x3e6339=_0x288aa1:(console['log'](_0x2c9f1c[_0x364620(0x1b9)]),_0x2c55d6['status'](0x194)[_0x364620(0x25b)](global[_0x364620(0x206)]));}}),p['post'](Y,_0x3c0a08[_0x21adc5(0x242)],async(_0x4cc7bd,_0x214d12)=>{const _0x1f0c1b=_0x21adc5,_0x210cd5={'IIOUu':'function\x20*\x5c(\x20*\x5c)','zVDvU':_0x1f0c1b(0x1f7),'zMvVN':function(_0xf2dd4a,_0x4ca4e4){return _0xf2dd4a(_0x4ca4e4);},'iycLU':_0x1f0c1b(0x168),'nvRru':function(_0x24981b,_0x4a246a){return _0x24981b+_0x4a246a;},'spUHx':'chain','EtaFQ':_0x1f0c1b(0x2aa),'NXMGM':function(_0x1665a7,_0x73e9cc){return _0x1665a7(_0x73e9cc);},'Hlbbv':function(_0x374622){return _0x374622();},'AIEHF':'red','DajLO':_0x1f0c1b(0x19a),'GqDfV':_0x1f0c1b(0x17d),'hUzWW':_0x1f0c1b(0x23a),'WHrsR':_0x1f0c1b(0x16b),'PctXc':_0x1f0c1b(0x254),'KPtbv':function(_0x55e74d,_0x1ee332){return _0x55e74d(_0x1ee332);},'wyQEb':function(_0x4eb81c,_0x2ea4b4){return _0x4eb81c>_0x2ea4b4;},'AnPYi':_0x1f0c1b(0x174),'sOXhM':_0x1f0c1b(0x259),'Twoae':_0x1f0c1b(0x221),'lSohc':_0x1f0c1b(0x1a5),'bJgHt':function(_0x1b59bf,_0x2570ac){return _0x1b59bf===_0x2570ac;},'FUHTG':_0x1f0c1b(0x20c),'xqacY':function(_0x253756,_0x119a21){return _0x253756===_0x119a21;},'ZEXbG':_0x1f0c1b(0x1ad),'nnESC':_0x1f0c1b(0x279),'Gstnm':function(_0x302cf5,_0x2b14ab){return _0x302cf5&&_0x2b14ab;},'YvmTQ':function(_0x196651,_0x59945c){return _0x196651!==_0x59945c;},'PsVSn':'AHZrG','QJlIp':_0x1f0c1b(0x222),'HdQDL':function(_0x2151ca,_0x26ee20){return _0x2151ca===_0x26ee20;},'Udhzy':_0x1f0c1b(0x18f),'fgPbm':_0x1f0c1b(0x1ef),'YbPpk':_0x1f0c1b(0x1cc),'NRltv':_0x1f0c1b(0x158),'SiRWk':_0x1f0c1b(0x149),'sJPVH':function(_0x1c2571,_0x59d913){return _0x1c2571!==_0x59d913;},'oKWuY':_0x1f0c1b(0x223),'lWRAF':_0x1f0c1b(0x144),'Suxqj':function(_0x5e7a20,_0x50f1fa){return _0x5e7a20(_0x50f1fa);},'CTlcb':function(_0x29b039,_0x34572c){return _0x29b039(_0x34572c);},'WZgjz':function(_0x3b95d9,_0x17ecfd){return _0x3b95d9+_0x17ecfd;},'GtgSd':function(_0x1b4088,_0x2185df){return _0x1b4088===_0x2185df;},'MvmTU':'TYnZq','KZosk':_0x1f0c1b(0x191),'nTYMK':'base64','GrFrg':function(_0x1698df,_0x1b8352){return _0x1698df*_0x1b8352;},'bjcYp':function(_0x2c1226,_0x520dd7){return _0x2c1226<=_0x520dd7;},'LOQue':_0x1f0c1b(0x29e),'JyVhK':function(_0xfed420,_0x439906){return _0xfed420==_0x439906;},'pmRNC':_0x1f0c1b(0x28c),'GzREm':'ไม่พบเอกสารที่ต้องการอัปเดท\x20หรือ{{sep}}ไม่สามารถบันทึกเอกสารที่ตนเองไม่ได้สร้าง','SiAnX':function(_0x8e1943,_0x428055){return _0x8e1943!=_0x428055;},'HfRgH':_0x1f0c1b(0x160),'PaduW':_0x1f0c1b(0x285),'LLmap':_0x1f0c1b(0x255),'aHWDG':function(_0x4ca237,_0x2c5a7f){return _0x4ca237==_0x2c5a7f;},'SGUYQ':'เลยกำหนดแก้ไข\x20สถานะถูก{{sep}}เปลี่ยนเป็น\x202\x20อัตโนมัติ','tMgSO':_0x1f0c1b(0x224),'oUxZb':function(_0x3c78b5,_0x4492a6){return _0x3c78b5==_0x4492a6;},'pCOXh':_0x1f0c1b(0x1db),'UucyV':function(_0x5f41e2,_0x3ea7cf){return _0x5f41e2!==_0x3ea7cf;},'MSZoS':_0x1f0c1b(0x248),'LKBoL':_0x1f0c1b(0x1aa),'XIbPN':function(_0x4f91bd,_0x530d0d){return _0x4f91bd(_0x530d0d);},'JojAZ':function(_0xc705bb,_0x2732bc){return _0xc705bb!==_0x2732bc;},'HikQo':_0x1f0c1b(0x1b5),'zsmhC':function(_0x3c31ff,_0x3bcaea){return _0x3c31ff>_0x3bcaea;},'zqQEU':function(_0x276121,_0x4187ee){return _0x276121!==_0x4187ee;},'Etznd':'SlMin','SoFIU':_0x1f0c1b(0x24f),'XxXvs':function(_0x189491,_0x333cbc){return _0x189491<_0x333cbc;},'awWCw':_0x1f0c1b(0x164),'hwdeM':function(_0x1bbd6,_0x24a4eb){return _0x1bbd6==_0x24a4eb;},'vQZSE':_0x1f0c1b(0x215),'cJkjD':function(_0x4d55a9,_0x43b85c){return _0x4d55a9===_0x43b85c;},'mAuZS':_0x1f0c1b(0x210),'FmXKj':function(_0xc4ea71,_0x13f03e){return _0xc4ea71!==_0x13f03e;},'QtgOD':_0x1f0c1b(0x1ba)};await y['getMainDocPathObj'](_0x4cc7bd,_0x214d12);const _0x54311b=new _0x180033(global[_0x1f0c1b(0x292)]);await _0x54311b[_0x1f0c1b(0x1bb)]();try{if(_0x210cd5[_0x1f0c1b(0x2a2)](_0x210cd5['FUHTG'],_0x210cd5[_0x1f0c1b(0x24c)])){const _0x4eeaec=await _[_0x1f0c1b(0x29c)](_0x4cc7bd);if(_0x4cc7bd['body']=J['convert_DataType'](_0x4cc7bd[_0x1f0c1b(0x2ae)]),_0x4cc7bd['body'][_0x1f0c1b(0x1de)]){if(_0x210cd5[_0x1f0c1b(0x1b1)](_0x210cd5['ZEXbG'],_0x210cd5[_0x1f0c1b(0x159)])){const _0x458e55=new _0x15fd83(tHOaVz[_0x1f0c1b(0x1be)]),_0x4320ad=new _0x4b25f8(tHOaVz[_0x1f0c1b(0x1e6)],'i'),_0x1e8469=tHOaVz[_0x1f0c1b(0x24e)](_0x212042,tHOaVz[_0x1f0c1b(0x20b)]);!_0x458e55[_0x1f0c1b(0x27e)](tHOaVz[_0x1f0c1b(0x28a)](_0x1e8469,tHOaVz[_0x1f0c1b(0x13f)]))||!_0x4320ad[_0x1f0c1b(0x27e)](tHOaVz['nvRru'](_0x1e8469,tHOaVz[_0x1f0c1b(0x14e)]))?tHOaVz[_0x1f0c1b(0x20e)](_0x1e8469,'0'):tHOaVz['Hlbbv'](_0x4ab253);}else{var _0x2dd341=_0x4cc7bd['body'][_0x1f0c1b(0x1de)]?_0x4cc7bd[_0x1f0c1b(0x2ae)]['refImageBase64']:null;delete _0x4cc7bd[_0x1f0c1b(0x2ae)][_0x1f0c1b(0x1de)];}}const _0x38a088=_0x4cc7bd['body']['docStatusNumber']?_0x210cd5[_0x1f0c1b(0x24e)](Number,_0x4cc7bd[_0x1f0c1b(0x2ae)][_0x1f0c1b(0x1d7)]):_0x4cc7bd[_0x1f0c1b(0x2ae)][_0x1f0c1b(0x1d7)],_0x2efbcb=_0x4cc7bd[_0x1f0c1b(0x2ae)][_0x1f0c1b(0x240)],_0x18ccc7=y[_0x1f0c1b(0x28b)](_0x4cc7bd['path']),_0x5ee78b=_0x54311b['db'](global[_0x1f0c1b(0x1f8)])['collection'](_0x18ccc7[_0x1f0c1b(0x29f)]);if(_0x210cd5['Gstnm'](!_0x38a088,!_0x2efbcb)){if(_0x210cd5['YvmTQ'](_0x210cd5[_0x1f0c1b(0x147)],_0x210cd5['QJlIp'])){const _0x232301=await _0x5ee78b['find']({},{'projection':{'docId':0x1}})[_0x1f0c1b(0x1e3)]({'_id':-0x1})['limit'](0x1)['toArray'](),_0x1f2646=S[_0x1f0c1b(0x16f)](),_0x76364d=_0x1f2646[_0x1f0c1b(0x2a9)](0x2,0x4),_0x5c0577=_0x1f2646['slice'](0x5,0x7),_0x15c23e=_0x210cd5[_0x1f0c1b(0x203)](_0x18ccc7[_0x1f0c1b(0x26c)],_0x210cd5[_0x1f0c1b(0x197)])?'WI'+_0x76364d+_0x5c0577:_0x210cd5[_0x1f0c1b(0x2a2)](_0x18ccc7[_0x1f0c1b(0x26c)],_0x210cd5[_0x1f0c1b(0x28f)])?'WO'+_0x76364d+_0x5c0577:_0x210cd5['bJgHt'](_0x18ccc7[_0x1f0c1b(0x26c)],_0x210cd5[_0x1f0c1b(0x217)])?'S'+_0x76364d+_0x5c0577:_0x210cd5[_0x1f0c1b(0x1b1)](_0x18ccc7[_0x1f0c1b(0x26c)],_0x210cd5[_0x1f0c1b(0x1b2)])?'R'+_0x76364d+_0x5c0577:'';if(!_0x15c23e)return _0x214d12[_0x1f0c1b(0x26a)](JSON[_0x1f0c1b(0x22d)]({'isSave':!0x1,'class':_0x210cd5[_0x1f0c1b(0x163)],'msg':_0x210cd5[_0x1f0c1b(0x192)]}));let _0x317822=_0x15c23e+'-00001';if(_0x210cd5['wyQEb'](_0x232301[_0x1f0c1b(0x23d)],0x0)){if(_0x210cd5[_0x1f0c1b(0x250)](_0x210cd5[_0x1f0c1b(0x1b7)],_0x210cd5[_0x1f0c1b(0x290)])){const _0x5ca0d1=_0x232301[0x0]['docId'],_0x587699=_0x210cd5[_0x1f0c1b(0x1c5)](Number,_0x5ca0d1[_0x1f0c1b(0x14a)]('-')[0x1]);_0x317822=_0x15c23e+'-'+_0x210cd5['CTlcb'](String,_0x210cd5[_0x1f0c1b(0x1f0)](_0x587699,0x1))[_0x1f0c1b(0x148)](0x5,'0');}else _0xb75c71['close']();}_0x4cc7bd['body'][_0x1f0c1b(0x240)]=_0x317822;const _0x3072a4=S[_0x1f0c1b(0x27b)]();if(_0x4cc7bd[_0x1f0c1b(0x2ae)][_0x1f0c1b(0x261)]=_0x3072a4,_0x2dd341){if(_0x210cd5[_0x1f0c1b(0x1d9)](_0x210cd5[_0x1f0c1b(0x1ce)],_0x210cd5[_0x1f0c1b(0x1af)]))_0x2bf0b2[_0x1f0c1b(0x298)](_0x203266),_0x3920e9[_0x1f0c1b(0x26a)](_0x5685ce[_0x1f0c1b(0x22d)]({'isSave':!0x1,'class':_0x210cd5[_0x1f0c1b(0x163)],'msg':_0x2eba21[_0x1f0c1b(0x1b9)]}));else{const _0x165780=_0x2dd341[_0x1f0c1b(0x156)](/^data:image\/\w+;base64,/,''),_0x20a4f6=Buffer[_0x1f0c1b(0x17a)](_0x165780,_0x210cd5[_0x1f0c1b(0x194)]),_0xc88159=_0x317822+_0x1f0c1b(0x296),_0x30fe1f=_0x5afa4f[_0x1f0c1b(0x1b0)](_0x18ccc7['folderName'],_0xc88159);await _0x210cd5['zMvVN'](_0x2ba005,_0x20a4f6)['resize']({'height':0x3e8,'withoutEnlargement':!0x0})[_0x1f0c1b(0x21e)]({'quality':0x5a})['toFile'](_0x30fe1f),_0x4cc7bd[_0x1f0c1b(0x2ae)]['refImage']=_0xc88159;}}return _0x4cc7bd[_0x1f0c1b(0x2ae)][_0x1f0c1b(0x1dd)]=S[_0x1f0c1b(0x27b)](_0x210cd5[_0x1f0c1b(0x18c)](_0x18ccc7['hoursCanEdit'],0x3c)),_0x4cc7bd[_0x1f0c1b(0x2ae)]['dateTimeCanCancel']=S[_0x1f0c1b(0x27b)](_0x210cd5['GrFrg'](_0x18ccc7[_0x1f0c1b(0x20f)],0x3c)),_0x210cd5['bjcYp'](_0x18ccc7[_0x1f0c1b(0x1dc)],0x0)||_0x210cd5[_0x1f0c1b(0x208)](_0x18ccc7['hoursCanCancel'],0x0)?(_0x4cc7bd[_0x1f0c1b(0x2ae)][_0x1f0c1b(0x1d7)]=0x2,_0x210cd5[_0x1f0c1b(0x208)](_0x18ccc7[_0x1f0c1b(0x1dc)],0x0)&&(_0x4cc7bd['body'][_0x1f0c1b(0x29b)]=!0x1),_0x210cd5['bjcYp'](_0x18ccc7[_0x1f0c1b(0x20f)],0x0)&&(_0x4cc7bd[_0x1f0c1b(0x2ae)]['canCancel']=!0x1)):_0x4cc7bd[_0x1f0c1b(0x2ae)][_0x1f0c1b(0x1d7)]=0x1,await _0x5ee78b[_0x1f0c1b(0x25e)](_0x4cc7bd[_0x1f0c1b(0x2ae)]),_0x214d12['send'](JSON['stringify']({'isSave':!0x0,'class':_0x210cd5[_0x1f0c1b(0x267)],'msg':_0x1f0c1b(0x226)+_0x317822+'{{sep}}เรียบร้อยแล้ว','doc':_0x4cc7bd[_0x1f0c1b(0x2ae)]}));}else{if(_0x3cf16a)return _0x3401f8[_0x1f0c1b(0x26e)](_0x210cd5[_0x1f0c1b(0x16a)],_0x28039f),_0x156ab1[_0x1f0c1b(0x1c7)](0x1f4)['send'](_0x210cd5[_0x1f0c1b(0x185)]);const _0x174610=_0x407ccb[_0xd5ebef]||_0x210cd5[_0x1f0c1b(0x16e)];_0x14d401[_0x1f0c1b(0x25c)](0xc8,{'Content-Type':_0x174610}),_0x2c398d[_0x1f0c1b(0x207)](_0x4afc28);}}else{if(_0x210cd5['JyVhK'](_0x38a088,0x1)&&_0x2efbcb){if(_0x210cd5['sJPVH'](_0x210cd5[_0x1f0c1b(0x13c)],_0x210cd5[_0x1f0c1b(0x13c)])){var _0x12b56e=_0x5a66b3[_0x1f0c1b(0x2ae)]['refImageBase64']?_0x1ef211[_0x1f0c1b(0x2ae)]['refImageBase64']:null;delete _0x35c93d[_0x1f0c1b(0x2ae)][_0x1f0c1b(0x1de)];}else{const _0x33721f=await _0x5ee78b[_0x1f0c1b(0x16d)]({'docId':_0x2efbcb,'userId':_0x4eeaec[_0x1f0c1b(0x2ad)]});if(!_0x33721f)return _0x214d12[_0x1f0c1b(0x26a)](JSON[_0x1f0c1b(0x22d)]({'isSave':!0x1,'class':_0x210cd5[_0x1f0c1b(0x163)],'msg':_0x210cd5[_0x1f0c1b(0x24b)]}));if(_0x210cd5['SiAnX'](_0x33721f[_0x1f0c1b(0x1d7)],0x1))return _0x214d12[_0x1f0c1b(0x26a)](JSON[_0x1f0c1b(0x22d)]({'isSave':!0x1,'class':_0x210cd5[_0x1f0c1b(0x163)],'msg':_0x210cd5[_0x1f0c1b(0x269)]}));if(_0x210cd5[_0x1f0c1b(0x2b2)](_0x33721f['docStatusNumber'],0x1)&&_0x33721f['dateTimeCanEdit']){if(_0x210cd5['YvmTQ'](_0x210cd5[_0x1f0c1b(0x166)],_0x210cd5[_0x1f0c1b(0x211)])){let _0x4d6ce0=await y['check_DocDateTime_CanEdit'](_0x33721f,_0x18ccc7['collectionName'],_0x4eeaec[_0x1f0c1b(0x2ad)]);if(_0x33721f[_0x1f0c1b(0x263)]=_0x4d6ce0['dateTimeEditRemain'],_0x210cd5['aHWDG'](_0x4d6ce0[_0x1f0c1b(0x29b)],!0x1))return _0x33721f[_0x1f0c1b(0x1d7)]=_0x4d6ce0['docStatusNumber'],_0x214d12[_0x1f0c1b(0x26a)](JSON[_0x1f0c1b(0x22d)]({'isSave':!0x1,'doc':_0x33721f,'class':_0x210cd5[_0x1f0c1b(0x163)],'msg':_0x210cd5['SGUYQ']}));}else return!![];}if((_0x210cd5[_0x1f0c1b(0x2b2)](_0x33721f[_0x1f0c1b(0x1d7)],0x1)||_0x210cd5[_0x1f0c1b(0x2b2)](_0x33721f[_0x1f0c1b(0x1d7)],0x2))&&_0x33721f[_0x1f0c1b(0x2ac)]){if(_0x210cd5[_0x1f0c1b(0x1b1)](_0x210cd5['tMgSO'],_0x210cd5['tMgSO'])){const _0x4a68fb=await y[_0x1f0c1b(0x1df)](_0x33721f,_0x18ccc7[_0x1f0c1b(0x29f)],_0x4eeaec[_0x1f0c1b(0x2ad)]);if(_0x33721f[_0x1f0c1b(0x1cb)]=_0x4a68fb[_0x1f0c1b(0x1cb)],_0x210cd5['oUxZb'](_0x4a68fb['canCancel'],!0x1))return _0x214d12[_0x1f0c1b(0x26a)](JSON[_0x1f0c1b(0x22d)]({'isSave':!0x1,'doc':_0x33721f,'class':_0x210cd5[_0x1f0c1b(0x163)],'msg':_0x210cd5[_0x1f0c1b(0x16c)]}));}else return function(_0x1fced6){}[_0x1f0c1b(0x167)](tHOaVz['WHrsR'])['apply'](tHOaVz['PctXc']);}if(_0x2dd341){if(_0x210cd5[_0x1f0c1b(0x1d1)](_0x210cd5['MSZoS'],_0x210cd5['LKBoL'])){const _0x1bb76f=_0x2dd341['replace'](/^data:image\/\w+;base64,/,''),_0x18792e=Buffer[_0x1f0c1b(0x17a)](_0x1bb76f,_0x210cd5[_0x1f0c1b(0x194)]),_0x1fb315=_0x33721f[_0x1f0c1b(0x240)]+_0x1f0c1b(0x296),{folderName:_0x4e3b87}=y[_0x1f0c1b(0x28b)](_0x4cc7bd[_0x1f0c1b(0x291)]),_0x270192=_0x5afa4f[_0x1f0c1b(0x1b0)](_0x4e3b87,_0x1fb315);await _0x210cd5[_0x1f0c1b(0x230)](_0x2ba005,_0x18792e)[_0x1f0c1b(0x1e1)]({'height':0x3e8,'withoutEnlargement':!0x0})[_0x1f0c1b(0x21e)]({'quality':0x5a})[_0x1f0c1b(0x19b)](_0x270192),_0x4cc7bd[_0x1f0c1b(0x2ae)][_0x1f0c1b(0x1a0)]=_0x1fb315;}else return _0x485289;}const _0x470228=await _0x5ee78b[_0x1f0c1b(0x1bd)]({'docId':_0x2efbcb,'userId':_0x4eeaec[_0x1f0c1b(0x2ad)]},{'$set':_0x4cc7bd[_0x1f0c1b(0x2ae)]});if(_0x210cd5[_0x1f0c1b(0x297)](_0x470228[_0x1f0c1b(0x235)],0x0)){if(_0x210cd5[_0x1f0c1b(0x275)](_0x210cd5['HikQo'],_0x210cd5[_0x1f0c1b(0x196)]))_0x4f1a0a[_0x1f0c1b(0x26f)]=_0x210cd5['zMvVN'](_0x38cd7c,_0x2fd48d[_0x1f0c1b(0x26f)]),_0x22dad7[_0x1f0c1b(0x2ad)]=_0x210cd5[_0x1f0c1b(0x1c3)](_0x2e2fb4,_0x1ce022[_0x1f0c1b(0x2ad)]),_0x1cf058[_0x1f0c1b(0x23b)]=_0x59d47d,_0x210cd5['wyQEb'](_0x12707c[_0x1f0c1b(0x26f)],0x0)&&(_0x5a46e0=!0x1),_0x58404f+=_0x3a9117[_0x1f0c1b(0x26f)];else{const _0xdd0a71=J[_0x1f0c1b(0x27f)](_0x33721f,_0x4cc7bd[_0x1f0c1b(0x2ae)]);if(_0x210cd5[_0x1f0c1b(0x1d0)](_0xdd0a71[_0x1f0c1b(0x23d)],0x0)){if(_0x210cd5[_0x1f0c1b(0x154)](_0x210cd5[_0x1f0c1b(0x202)],_0x210cd5[_0x1f0c1b(0x1d3)])){const _0x280608={'dateTime':S[_0x1f0c1b(0x27b)](),'userId':_0x4eeaec[_0x1f0c1b(0x2ad)],'userFullname':_0x4eeaec[_0x1f0c1b(0x280)],'changes':_0xdd0a71};return await _0x5ee78b[_0x1f0c1b(0x1bd)]({'docId':_0x2efbcb},{'$push':{'changesHistory':{'$each':[_0x280608],'$position':0x0}}}),_0x214d12[_0x1f0c1b(0x26a)](JSON[_0x1f0c1b(0x22d)]({'doc':_0x4cc7bd[_0x1f0c1b(0x2ae)],'isSave':!0x0,'class':_0x210cd5[_0x1f0c1b(0x267)],'msg':_0x1f0c1b(0x1a7)+_0x2efbcb+'\x20เรียบร้อยแล้ว{{sep}}[บันทึกการแก้ไข]'}));}else{const _0x2b0e3e=_0x228f3b[_0x1f0c1b(0x167)]['prototype']['bind'](_0x50a0cc),_0x50b3fd=_0x481dae[_0x529106],_0x1a4f96=_0x208c7e[_0x50b3fd]||_0x2b0e3e;_0x2b0e3e[_0x1f0c1b(0x1fa)]=_0x3526ab[_0x1f0c1b(0x257)](_0x5c3661),_0x2b0e3e['toString']=_0x1a4f96[_0x1f0c1b(0x233)][_0x1f0c1b(0x257)](_0x1a4f96),_0x542e42[_0x50b3fd]=_0x2b0e3e;}}else return _0x214d12[_0x1f0c1b(0x26a)](JSON[_0x1f0c1b(0x22d)]({'doc':_0x4cc7bd[_0x1f0c1b(0x2ae)],'isSave':!0x0,'class':_0x210cd5[_0x1f0c1b(0x267)],'msg':_0x1f0c1b(0x1a7)+_0x2efbcb+'\x20เรียบร้อยแล้ว'}));}}else{if(_0x470228[_0x1f0c1b(0x287)]&&_0x210cd5[_0x1f0c1b(0x294)](_0x470228[_0x1f0c1b(0x235)],0x1))return _0x214d12[_0x1f0c1b(0x26a)](JSON[_0x1f0c1b(0x22d)]({'doc':_0x4cc7bd[_0x1f0c1b(0x2ae)],'isSave':!0x1,'class':_0x210cd5['awWCw'],'msg':'\x22'+_0x2efbcb+'\x22\x20ไม่มีการเปลี่ยนแปลงข้อมูล'}));}}}else return(_0x210cd5[_0x1f0c1b(0x1ee)](_0x38a088,0x2)||_0x210cd5[_0x1f0c1b(0x1d6)](_0x38a088,0xa))&&_0x2efbcb?_0x214d12['send'](JSON[_0x1f0c1b(0x22d)]({'isSave':!0x1,'class':_0x210cd5[_0x1f0c1b(0x163)],'msg':_0x1f0c1b(0x24d)+_0x38a088+'\x20ได้'})):_0x214d12[_0x1f0c1b(0x26a)](JSON[_0x1f0c1b(0x22d)]({'isSave':!0x1,'class':_0x210cd5['AIEHF'],'msg':_0x210cd5[_0x1f0c1b(0x204)]}));}}else tHOaVz['NXMGM'](_0x2f7417,'0');}catch(_0x49f07e){_0x210cd5[_0x1f0c1b(0x1ed)](_0x210cd5['mAuZS'],_0x210cd5[_0x1f0c1b(0x26b)])?(console[_0x1f0c1b(0x298)](_0x49f07e),_0x214d12[_0x1f0c1b(0x26a)](JSON[_0x1f0c1b(0x22d)]({'isSave':!0x1,'class':_0x210cd5['AIEHF'],'msg':_0x49f07e[_0x1f0c1b(0x1b9)]}))):function(){return![];}[_0x1f0c1b(0x167)](tHOaVz[_0x1f0c1b(0x28a)](tHOaVz[_0x1f0c1b(0x27c)],tHOaVz[_0x1f0c1b(0x1c4)]))[_0x1f0c1b(0x184)](tHOaVz[_0x1f0c1b(0x173)]);}finally{_0x210cd5[_0x1f0c1b(0x142)](_0x210cd5[_0x1f0c1b(0x18b)],_0x210cd5[_0x1f0c1b(0x18b)])?function(){return!![];}[_0x1f0c1b(0x167)](tHOaVz['nvRru'](tHOaVz[_0x1f0c1b(0x27c)],tHOaVz[_0x1f0c1b(0x1c4)]))[_0x1f0c1b(0x1c2)](tHOaVz[_0x1f0c1b(0x22b)]):_0x54311b[_0x1f0c1b(0x237)]();}}),p[_0x21adc5(0x198)](F,_0x3c0a08[_0x21adc5(0x242)],async(_0x6cef1d,_0x149747)=>{const _0x765246=_0x21adc5,_0xf06b99={'bcAde':function(_0xbfa61f){return _0xbfa61f();},'COfap':function(_0xd39caa,_0x2b942f){return _0xd39caa===_0x2b942f;},'yQyLR':'gljuu','zpPgA':_0x765246(0x22f),'KmOUN':_0x765246(0x19a),'myBaM':_0x765246(0x17d),'DqMcv':'application/octet-stream','ifIrf':'ไม่พบไฟล์รูปภาพ','lbWCt':_0x765246(0x238)},{filename:_0x1a6db5}=_0x6cef1d[_0x765246(0x2ae)];if(!_0x1a6db5)return _0x149747[_0x765246(0x1c7)](0x190)[_0x765246(0x26a)](_0xf06b99[_0x765246(0x169)]);const {folderName:_0x4e3ffb}=y[_0x765246(0x28b)](_0x6cef1d[_0x765246(0x291)]),_0x4c370f=_0x5afa4f['join'](_0x4e3ffb,_0x1a6db5),_0x45f081=_0x5afa4f[_0x765246(0x27a)](_0x1a6db5)['toLowerCase'](),_0x33c1ed={'.jpg':_0xf06b99[_0x765246(0x293)],'.jpeg':_0xf06b99[_0x765246(0x293)]};_0x5a2f5d[_0x765246(0x270)](_0x4c370f,(_0x5b56eb,_0xa4c634)=>{const _0x55a109=_0x765246;if(_0xf06b99[_0x55a109(0x15f)](_0xf06b99['yQyLR'],_0xf06b99[_0x55a109(0x23e)]))yevzRa['bcAde'](_0x40c8af);else{if(_0x5b56eb)return console[_0x55a109(0x26e)](_0xf06b99[_0x55a109(0x256)],_0x5b56eb),_0x149747[_0x55a109(0x1c7)](0x1f4)[_0x55a109(0x26a)](_0xf06b99[_0x55a109(0x262)]);const _0x4e8a6c=_0x33c1ed[_0x45f081]||_0xf06b99[_0x55a109(0x1e8)];_0x149747[_0x55a109(0x25c)](0xc8,{'Content-Type':_0x4e8a6c}),_0x149747[_0x55a109(0x207)](_0xa4c634);}});}),p[_0x21adc5(0x198)](M,_0x3c0a08['isAuth'],async(_0x5de7b7,_0x36fbc9)=>{const _0x1d48f2=_0x21adc5,_0xb0aca6={'eYNyk':function(_0x248c3f,_0x37cccb){return _0x248c3f===_0x37cccb;},'WsIXU':'aQUDS','orAAk':function(_0x57776b,_0x44c3f9){return _0x57776b(_0x44c3f9);},'eftDk':function(_0x1ec65c,_0x24ac08){return _0x1ec65c>_0x24ac08;},'BoFdz':function(_0x1d5b87,_0x1b332a){return _0x1d5b87+_0x1b332a;},'UAMyI':function(_0x52e86c,_0x293121){return _0x52e86c===_0x293121;},'WBNjw':_0x1d48f2(0x1ae),'ZoSOW':_0x1d48f2(0x15b),'QyJHy':function(_0x26aea2,_0x44d473){return _0x26aea2!=_0x44d473;},'XSJqe':'ไม่สามารถชำระหนี้ได้{{sep}}เนื่องจากสถานะเอกสารไม่ใช่\x201\x20หรือ\x202','NziDW':_0x1d48f2(0x1e5),'Wticm':_0x1d48f2(0x1f9),'wLgkS':_0x1d48f2(0x268),'lOpjp':function(_0x288e1c,_0x4aa447){return _0x288e1c<=_0x4aa447;},'rUFho':function(_0x279f9a,_0x544e04){return _0x279f9a==_0x544e04;},'EMGOQ':function(_0x454af5,_0x29b50c){return _0x454af5<_0x29b50c;},'tkYfb':_0x1d48f2(0x29e),'giWCn':_0x1d48f2(0x170),'PWefi':function(_0x1ea8b5,_0x43cd8e){return _0x1ea8b5<_0x43cd8e;},'gOyPl':'yellow','aWhYx':_0x1d48f2(0x244),'SpIEM':_0x1d48f2(0x20d),'cnbAz':function(_0x4036d0,_0x3b5410){return _0x4036d0===_0x3b5410;},'mAalS':'BJuTs','riNQy':_0x1d48f2(0x21a)};let {payDebtRows:_0x2f0d92,docId:_0x1ab5dd}=_0x5de7b7[_0x1d48f2(0x2ae)];const _0x40d544=new _0x180033(global[_0x1d48f2(0x292)]);await _0x40d544[_0x1d48f2(0x1bb)]();try{if(_0xb0aca6[_0x1d48f2(0x28d)](_0xb0aca6[_0x1d48f2(0x246)],_0xb0aca6[_0x1d48f2(0x246)])){const _0x5cad3f=y[_0x1d48f2(0x28b)](_0x5de7b7[_0x1d48f2(0x291)]),_0x3b8920=_0x40d544['db'](global[_0x1d48f2(0x1f8)])['collection'](_0x5cad3f['collectionName']),_0xcb59ae=await _0x3b8920[_0x1d48f2(0x16d)]({'docId':_0x1ab5dd});if(!_0xcb59ae)return _0x36fbc9[_0x1d48f2(0x26a)](JSON[_0x1d48f2(0x22d)]({'isSave':!0x1,'class':_0xb0aca6['ZoSOW'],'msg':_0x1d48f2(0x1a6)+_0x1ab5dd+'\x27'}));if(_0xb0aca6[_0x1d48f2(0x183)](_0xcb59ae[_0x1d48f2(0x1d7)],0x1)&&_0xb0aca6['QyJHy'](_0xcb59ae['docStatusNumber'],0x2))return _0x36fbc9[_0x1d48f2(0x26a)](JSON['stringify']({'isSave':!0x1,'class':_0xb0aca6[_0x1d48f2(0x15d)],'msg':_0xb0aca6[_0x1d48f2(0x172)]}));if(_0xcb59ae[_0x1d48f2(0x239)])return _0x36fbc9[_0x1d48f2(0x26a)](JSON[_0x1d48f2(0x22d)]({'isSave':!0x1,'class':_0xb0aca6['ZoSOW'],'msg':_0xb0aca6[_0x1d48f2(0x188)]}));if(_0xb0aca6[_0x1d48f2(0x183)]((await _[_0x1d48f2(0x29c)](_0x5de7b7))[_0x1d48f2(0x25a)],_0xcb59ae[_0x1d48f2(0x25a)]))return _0x36fbc9[_0x1d48f2(0x26a)](JSON[_0x1d48f2(0x22d)]({'isSave':!0x1,'class':_0xb0aca6[_0x1d48f2(0x15d)],'msg':_0xb0aca6[_0x1d48f2(0x17e)]}));let _0x4bff12=0x0,_0x36c40c=!0x0,_0x2dd987=S[_0x1d48f2(0x27b)]();if(_0x2f0d92[_0x1d48f2(0x1cf)](_0x2ea07b=>{const _0x35074c=_0x1d48f2;if(_0xb0aca6['eYNyk'](_0xb0aca6[_0x35074c(0x1c6)],_0xb0aca6[_0x35074c(0x1c6)]))_0x2ea07b[_0x35074c(0x26f)]=_0xb0aca6[_0x35074c(0x258)](Number,_0x2ea07b[_0x35074c(0x26f)]),_0x2ea07b[_0x35074c(0x2ad)]=_0xb0aca6[_0x35074c(0x258)](Number,_0x2ea07b['userId']),_0x2ea07b[_0x35074c(0x23b)]=_0x2dd987,_0xb0aca6[_0x35074c(0x190)](_0x2ea07b[_0x35074c(0x26f)],0x0)&&(_0x36c40c=!0x1),_0x4bff12+=_0x2ea07b['amount'];else return![];}),_0x36c40c)return _0x36fbc9[_0x1d48f2(0x26a)](JSON[_0x1d48f2(0x22d)]({'isSave':!0x1,'class':_0xb0aca6[_0x1d48f2(0x15d)],'msg':_0xb0aca6[_0x1d48f2(0x1b6)]}));if(_0xb0aca6['eftDk'](_0x4bff12,_0xcb59ae[_0x1d48f2(0x199)])&&_0xb0aca6[_0x1d48f2(0x29a)](_0x4bff12,0x0))return _0x36fbc9['send'](JSON[_0x1d48f2(0x22d)]({'isSave':!0x1,'class':_0xb0aca6[_0x1d48f2(0x15d)],'msg':_0x1d48f2(0x27d)+_0xcb59ae[_0x1d48f2(0x199)]}));if(_0xb0aca6['rUFho'](_0x4bff12,_0xcb59ae['paymentAmount2']))var _0x2ce9ee=!0x0;else{if(_0xb0aca6[_0x1d48f2(0x1a3)](_0x4bff12,_0xcb59ae[_0x1d48f2(0x199)]))var _0x2ce9ee=!0x1;}const _0x585003=await _0x3b8920[_0x1d48f2(0x1bd)]({'docId':_0x1ab5dd},{'$set':{'isDebtPaidOff':_0x2ce9ee,'payDebtRows':_0x2f0d92}});return _0xb0aca6[_0x1d48f2(0x190)](_0x585003['modifiedCount'],0x0)?_0x36fbc9['send'](JSON[_0x1d48f2(0x22d)]({'isSave':!0x0,'class':_0xb0aca6['tkYfb'],'doc':{'docId':_0x1ab5dd,'isDebtPaidOff':_0x2ce9ee,'payDebtRows':_0x2f0d92},'msg':_0xb0aca6[_0x1d48f2(0x14f)]})):_0x585003['acknowledged']&&_0xb0aca6[_0x1d48f2(0x161)](_0x585003[_0x1d48f2(0x235)],0x1)?_0x36fbc9[_0x1d48f2(0x26a)](JSON['stringify']({'isSave':!0x1,'class':_0xb0aca6[_0x1d48f2(0x236)],'msg':_0xb0aca6[_0x1d48f2(0x231)]})):_0x36fbc9[_0x1d48f2(0x26a)](JSON['stringify']({'isSave':!0x1,'class':_0xb0aca6[_0x1d48f2(0x15d)],'msg':_0xb0aca6[_0x1d48f2(0x152)]}));}else{if(_0x33cbd3){const _0x5c513c=_0x34ff89[_0x1d48f2(0x184)](_0x5629ac,arguments);return _0x28c6c5=null,_0x5c513c;}}}catch(_0x385a2a){if(_0xb0aca6[_0x1d48f2(0x1c1)](_0xb0aca6[_0x1d48f2(0x277)],_0xb0aca6['riNQy'])){const _0x1991a6=_0x51b8dd[0x0][_0x1d48f2(0x240)],_0x377d20=_0xb0aca6[_0x1d48f2(0x258)](_0x36d27a,_0x1991a6[_0x1d48f2(0x14a)]('-')[0x1]);_0x4277dc=_0x47ed3f+'-'+_0xb0aca6[_0x1d48f2(0x258)](_0x17d623,_0xb0aca6['BoFdz'](_0x377d20,0x1))[_0x1d48f2(0x148)](0x5,'0');}else console[_0x1d48f2(0x298)](_0x385a2a),_0x36fbc9['send'](JSON[_0x1d48f2(0x22d)]({'isSave':!0x1,'class':_0xb0aca6[_0x1d48f2(0x15d)],'msg':_0x385a2a['message']}));}finally{_0x40d544[_0x1d48f2(0x237)]();}});export default p;function _0x3e0f15(_0x2385e7){const _0x3c67f7=_0x21adc5,_0x2fd9e2={'tqjsv':function(_0x2e9f33,_0x39b8d2){return _0x2e9f33===_0x39b8d2;},'MuyRi':_0x3c67f7(0x2a4),'Hictr':'while\x20(true)\x20{}','Izsdx':_0x3c67f7(0x254),'EKEkw':function(_0x31da86,_0x1326da){return _0x31da86!==_0x1326da;},'qpREV':function(_0x33c85a,_0x298322){return _0x33c85a+_0x298322;},'pgfZs':function(_0xdbeef0,_0x3b46dc){return _0xdbeef0/_0x3b46dc;},'XJkNC':_0x3c67f7(0x23d),'NQSta':function(_0x3f8a31,_0x30aa39){return _0x3f8a31%_0x30aa39;},'LoVet':function(_0x42a79f,_0x486cc7){return _0x42a79f+_0x486cc7;},'aHoIn':_0x3c67f7(0x174),'WrKuw':'gger','rFaOh':_0x3c67f7(0x1a5),'ejgfQ':'stateObject','NINMh':function(_0x206ffb,_0x4abad5){return _0x206ffb(_0x4abad5);}};function _0x477dd8(_0x5a5dd2){const _0x41c2e6=_0x3c67f7;if(_0x2fd9e2['tqjsv'](typeof _0x5a5dd2,_0x2fd9e2[_0x41c2e6(0x1c8)]))return function(_0x34bb4d){}[_0x41c2e6(0x167)](_0x2fd9e2[_0x41c2e6(0x20a)])[_0x41c2e6(0x184)](_0x2fd9e2[_0x41c2e6(0x1f3)]);else _0x2fd9e2[_0x41c2e6(0x178)](_0x2fd9e2[_0x41c2e6(0x216)]('',_0x2fd9e2[_0x41c2e6(0x1b8)](_0x5a5dd2,_0x5a5dd2))[_0x2fd9e2[_0x41c2e6(0x201)]],0x1)||_0x2fd9e2[_0x41c2e6(0x13e)](_0x2fd9e2[_0x41c2e6(0x151)](_0x5a5dd2,0x14),0x0)?function(){return!![];}[_0x41c2e6(0x167)](_0x2fd9e2['LoVet'](_0x2fd9e2['aHoIn'],_0x2fd9e2[_0x41c2e6(0x176)]))[_0x41c2e6(0x1c2)](_0x2fd9e2[_0x41c2e6(0x266)]):function(){return![];}['constructor'](_0x2fd9e2['LoVet'](_0x2fd9e2['aHoIn'],_0x2fd9e2[_0x41c2e6(0x176)]))[_0x41c2e6(0x184)](_0x2fd9e2[_0x41c2e6(0x1e4)]);_0x2fd9e2[_0x41c2e6(0x209)](_0x477dd8,++_0x5a5dd2);}try{if(_0x2385e7)return _0x477dd8;else _0x2fd9e2['NINMh'](_0x477dd8,0x0);}catch(_0x5a68f1){}}