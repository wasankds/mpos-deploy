const _0x55b854=_0x41a5;(function(_0x3267de,_0x3dc807){const _0x1b2498=_0x41a5,_0x3abe7c=_0x3267de();while(!![]){try{const _0x2a0141=-parseInt(_0x1b2498(0x178))/0x1*(-parseInt(_0x1b2498(0x1c4))/0x2)+-parseInt(_0x1b2498(0x192))/0x3*(-parseInt(_0x1b2498(0xe3))/0x4)+-parseInt(_0x1b2498(0xdb))/0x5+-parseInt(_0x1b2498(0x1d0))/0x6*(parseInt(_0x1b2498(0x1c6))/0x7)+parseInt(_0x1b2498(0x21a))/0x8*(-parseInt(_0x1b2498(0x182))/0x9)+parseInt(_0x1b2498(0x1a0))/0xa*(-parseInt(_0x1b2498(0x1e7))/0xb)+-parseInt(_0x1b2498(0x1ab))/0xc*(-parseInt(_0x1b2498(0x16b))/0xd);if(_0x2a0141===_0x3dc807)break;else _0x3abe7c['push'](_0x3abe7c['shift']());}catch(_0x3bd5f0){_0x3abe7c['push'](_0x3abe7c['shift']());}}}(_0x56d0,0x945bf));const _0x40c53f=(function(){const _0x4fa17e=_0x41a5,_0xb1d9e3={'fstzZ':function(_0x22ca74,_0x22fd77){return _0x22ca74(_0x22fd77);},'flgHL':function(_0x101d8b,_0x11c054){return _0x101d8b+_0x11c054;},'eycVr':'Error\x20reading\x20image:','yixie':_0x4fa17e(0x1ce),'tKync':_0x4fa17e(0x1b8),'efVmt':function(_0xdf6e4,_0x199f64){return _0xdf6e4===_0x199f64;},'RKTSa':_0x4fa17e(0xb8),'tHQuD':_0x4fa17e(0x1a6),'iuGnm':_0x4fa17e(0x17c),'cOCIK':'MQFel'};let _0x1fa615=!![];return function(_0x5d0cc5,_0x4c7e6d){const _0x266e32=_0x4fa17e,_0x3709a4={'UpvOX':_0xb1d9e3['eycVr'],'QwmgH':_0xb1d9e3[_0x266e32(0x187)],'UfWnF':_0xb1d9e3[_0x266e32(0x108)],'ggyoF':function(_0x158a59,_0xd355f6){const _0x44f330=_0x266e32;return _0xb1d9e3[_0x44f330(0xf0)](_0x158a59,_0xd355f6);},'aDgYM':_0xb1d9e3[_0x266e32(0x18e)],'nJBlm':function(_0xa3f222,_0x45a05f){return _0xb1d9e3['efVmt'](_0xa3f222,_0x45a05f);},'rkOZG':_0xb1d9e3[_0x266e32(0x105)]};if(_0xb1d9e3[_0x266e32(0xf0)](_0xb1d9e3[_0x266e32(0xc6)],_0xb1d9e3[_0x266e32(0x140)])){const _0x56a523=_0x412bd6[0x0][_0x266e32(0x212)],_0x50dff8=_0xb1d9e3[_0x266e32(0x101)](_0x5cca00,_0x56a523[_0x266e32(0x13c)]('-')[0x1]);_0x5ce2ab=_0x5462c0+'-'+_0xb1d9e3[_0x266e32(0x101)](_0x97c577,_0xb1d9e3['flgHL'](_0x50dff8,0x1))['padStart'](0x5,'0');}else{const _0x5b18f8=_0x1fa615?function(){const _0xaba92=_0x266e32;if(_0x3709a4[_0xaba92(0x1fc)](_0x3709a4[_0xaba92(0xfe)],_0x3709a4[_0xaba92(0xfe)])){if(_0x4c7e6d){if(_0x3709a4[_0xaba92(0x126)](_0x3709a4[_0xaba92(0xe1)],_0x3709a4[_0xaba92(0xe1)])){const _0x3972a6=_0x4c7e6d[_0xaba92(0x12a)](_0x5d0cc5,arguments);return _0x4c7e6d=null,_0x3972a6;}else{if(_0x211557)return _0x2f69ad[_0xaba92(0x1c7)](_0x3709a4[_0xaba92(0xdd)],_0x5ddbf1),_0x32f32b['status'](0x1f4)[_0xaba92(0x163)](_0x3709a4[_0xaba92(0x1ac)]);const _0x487804=_0x3a99f2[_0x57348f]||_0x3709a4['UfWnF'];_0x3c8124[_0xaba92(0x137)](0xc8,{'Content-Type':_0x487804}),_0x479392[_0xaba92(0x19a)](_0xaefe9e);}}}else{const _0x3024c1=_0x2c9e4b[_0xaba92(0x12a)](_0x564e5e,arguments);return _0x489d2a=null,_0x3024c1;}}:function(){};return _0x1fa615=![],_0x5b18f8;}};}());(function(){const _0x517acd=_0x41a5,_0xe4fb61={'rzapt':function(_0x11ec0c,_0x48c9ae){return _0x11ec0c+_0x48c9ae;},'JblZU':'debu','KWveJ':_0x517acd(0x131),'ICtDi':_0x517acd(0xe2),'giWjR':function(_0x82cc4f,_0x160da9){return _0x82cc4f!==_0x160da9;},'cwOLo':_0x517acd(0x216),'lbqoP':_0x517acd(0x1e2),'LbkEP':_0x517acd(0x166),'hvTyq':_0x517acd(0x18b),'EJDwh':function(_0x55ad5b,_0x25d749){return _0x55ad5b(_0x25d749);},'topfc':_0x517acd(0x11f),'uuvbI':'chain','srbhH':_0x517acd(0x16d),'rvanQ':_0x517acd(0x124),'YqhLV':_0x517acd(0x1a2),'ygTzb':_0x517acd(0xe4),'JKXIy':_0x517acd(0x1b6),'OaHRG':function(_0x27b5ca){return _0x27b5ca();},'zbQob':function(_0x337957,_0x113792,_0x1be99f){return _0x337957(_0x113792,_0x1be99f);}};_0xe4fb61['zbQob'](_0x40c53f,this,function(){const _0x3c7080=_0x517acd,_0xa4f01d={'sNRUZ':function(_0x4aa038,_0x33eec0){const _0x264a29=_0x41a5;return _0xe4fb61[_0x264a29(0x170)](_0x4aa038,_0x33eec0);},'suOvw':_0xe4fb61[_0x3c7080(0x1b3)],'VDIiq':_0xe4fb61[_0x3c7080(0x12b)],'kMgoB':_0xe4fb61[_0x3c7080(0x185)]};if(_0xe4fb61[_0x3c7080(0x188)](_0xe4fb61[_0x3c7080(0xc5)],_0xe4fb61[_0x3c7080(0x1ad)])){const _0x550eaa=new RegExp(_0xe4fb61[_0x3c7080(0x1ed)]),_0x592157=new RegExp(_0xe4fb61['hvTyq'],'i'),_0x2dc6d1=_0xe4fb61[_0x3c7080(0x21e)](_0x32fbca,_0xe4fb61['topfc']);if(!_0x550eaa[_0x3c7080(0x169)](_0xe4fb61[_0x3c7080(0x170)](_0x2dc6d1,_0xe4fb61[_0x3c7080(0x1d1)]))||!_0x592157['test'](_0xe4fb61['rzapt'](_0x2dc6d1,_0xe4fb61[_0x3c7080(0x195)]))){if(_0xe4fb61[_0x3c7080(0x188)](_0xe4fb61[_0x3c7080(0xf2)],_0xe4fb61[_0x3c7080(0x1d7)]))_0xe4fb61[_0x3c7080(0x21e)](_0x2dc6d1,'0');else return![];}else _0xe4fb61[_0x3c7080(0x188)](_0xe4fb61['ygTzb'],_0xe4fb61[_0x3c7080(0x218)])?_0xe4fb61[_0x3c7080(0x14b)](_0x32fbca):function(){return![];}[_0x3c7080(0x123)](_0xa4f01d['sNRUZ'](_0xa4f01d['suOvw'],_0xa4f01d[_0x3c7080(0xce)]))[_0x3c7080(0x12a)](_0xa4f01d[_0x3c7080(0x113)]);}else{const _0x350214=_0x218f88[_0x3c7080(0x123)][_0x3c7080(0xfa)]['bind'](_0x343109),_0x358fcb=_0x1e0274[_0xf8aed7],_0x450d22=_0xab5cd8[_0x358fcb]||_0x350214;_0x350214[_0x3c7080(0x203)]=_0x420881[_0x3c7080(0x11d)](_0x58196a),_0x350214[_0x3c7080(0xf1)]=_0x450d22[_0x3c7080(0xf1)][_0x3c7080(0x11d)](_0x450d22),_0x459460[_0x358fcb]=_0x350214;}})();}());const _0x4d357a=(function(){const _0x18668a=_0x41a5,_0x5a16a4={'zrhyZ':function(_0x119821,_0x13d89d){return _0x119821===_0x13d89d;},'oEafT':_0x18668a(0x1cd),'WeVyh':_0x18668a(0x121),'uthbw':_0x18668a(0x10d),'ozqyU':_0x18668a(0x17d),'JDnlR':_0x18668a(0x1ce),'nYEjV':_0x18668a(0x1b8),'mLMrq':_0x18668a(0x181),'XYXVY':'image/jpeg','rZiNE':_0x18668a(0x1e6),'VgWgm':function(_0xa6de20,_0x1e9870){return _0xa6de20(_0x1e9870);},'kNvfl':function(_0xf02e1a,_0x564e5b){return _0xf02e1a>_0x564e5b;},'bqySV':function(_0x154b2e,_0x43cff5){return _0x154b2e!==_0x43cff5;},'WhHfJ':_0x18668a(0x14d)};let _0x97a299=!![];return function(_0x48b374,_0x309150){const _0x4bc2a1=_0x18668a,_0x4b7ae2={'riYzS':_0x5a16a4['ozqyU'],'JuChv':_0x5a16a4[_0x4bc2a1(0x1fa)],'Cqaxp':_0x5a16a4[_0x4bc2a1(0x1f1)],'cBSVo':_0x5a16a4[_0x4bc2a1(0xc0)],'XieXD':_0x5a16a4[_0x4bc2a1(0x148)],'qIsLF':_0x5a16a4['rZiNE'],'gpAes':function(_0x380cc6,_0x506b83){const _0x4a9cec=_0x4bc2a1;return _0x5a16a4[_0x4a9cec(0x15c)](_0x380cc6,_0x506b83);},'DEdYT':function(_0x53b687,_0x237112){const _0x2d597b=_0x4bc2a1;return _0x5a16a4[_0x2d597b(0x15c)](_0x53b687,_0x237112);},'ioftn':function(_0x214def,_0x229325){return _0x5a16a4['kNvfl'](_0x214def,_0x229325);}};if(_0x5a16a4['bqySV'](_0x5a16a4[_0x4bc2a1(0xf3)],_0x5a16a4['WhHfJ'])){const {filename:_0x25df72}=_0x117ed9[_0x4bc2a1(0x119)];if(!_0x25df72)return _0x3aeddf[_0x4bc2a1(0x210)](0x190)[_0x4bc2a1(0x163)](_0x4b7ae2['cBSVo']);const {folderName:_0x22e211}=_0x57c5f8[_0x4bc2a1(0x1b2)](_0x43e8d9[_0x4bc2a1(0xf5)]),_0x41a7fe=_0x1b9dde[_0x4bc2a1(0x1b0)](_0x22e211,_0x25df72),_0x9b94ec=_0x34956c[_0x4bc2a1(0x120)](_0x25df72)[_0x4bc2a1(0x10c)](),_0xbb0eae={'.jpg':_0x4b7ae2['XieXD'],'.jpeg':_0x4b7ae2[_0x4bc2a1(0xda)]};_0x143613[_0x4bc2a1(0x1d8)](_0x41a7fe,(_0x5b968e,_0x3ba195)=>{const _0x901cd7=_0x4bc2a1;if(_0x5b968e)return _0xef4ec5[_0x901cd7(0x1c7)](_0x4b7ae2[_0x901cd7(0x1ff)],_0x5b968e),_0x1ff658[_0x901cd7(0x210)](0x1f4)[_0x901cd7(0x163)](_0x4b7ae2[_0x901cd7(0xac)]);const _0x558775=_0xbb0eae[_0x9b94ec]||_0x4b7ae2[_0x901cd7(0x213)];_0x360ee4[_0x901cd7(0x137)](0xc8,{'Content-Type':_0x558775}),_0x591061[_0x901cd7(0x19a)](_0x3ba195);});}else{const _0xfeb645=_0x97a299?function(){const _0x3f44e1=_0x4bc2a1;if(_0x5a16a4[_0x3f44e1(0xee)](_0x5a16a4[_0x3f44e1(0x186)],_0x5a16a4[_0x3f44e1(0x186)])){if(_0x309150){if(_0x5a16a4[_0x3f44e1(0xee)](_0x5a16a4['WeVyh'],_0x5a16a4[_0x3f44e1(0x227)]))_0x30f7d1[_0x3f44e1(0x164)](_0x5d7adf),_0x5019e9['send'](_0x5e6802[_0x3f44e1(0x20a)]({'isSave':!0x1,'class':_0x4b7ae2[_0x3f44e1(0xcf)],'msg':_0x5ebd1e[_0x3f44e1(0x135)]}));else{const _0x2e6c1a=_0x309150[_0x3f44e1(0x12a)](_0x48b374,arguments);return _0x309150=null,_0x2e6c1a;}}}else _0x39d528[_0x3f44e1(0x12e)]=_0x4b7ae2['gpAes'](_0x22419d,_0x324b5e[_0x3f44e1(0x12e)]),_0x579340[_0x3f44e1(0xf8)]=_0x4b7ae2[_0x3f44e1(0x147)](_0x111395,_0x244f95['userId']),_0x167f8f['dateTime']=_0x29e017,_0x4b7ae2[_0x3f44e1(0x1cf)](_0x4cef75['amount'],0x0)&&(_0x967dd4=!0x1),_0x1af288+=_0x78f19d[_0x3f44e1(0x12e)];}:function(){};return _0x97a299=![],_0xfeb645;}};}()),_0x35d4d0=_0x4d357a(this,function(){const _0x3802bc=_0x41a5,_0x7a3afa={'waOBI':_0x3802bc(0x166),'nKiFR':'\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','ZxtYl':function(_0x5dd76a,_0xcf24d9){return _0x5dd76a(_0xcf24d9);},'GRkUF':_0x3802bc(0x11f),'IjAOU':function(_0x27dd30,_0x1499a7){return _0x27dd30+_0x1499a7;},'dTvwp':_0x3802bc(0x1bd),'PFRQm':_0x3802bc(0x16d),'EKoiG':function(_0xc85d2a,_0x6804c){return _0xc85d2a(_0x6804c);},'gPzft':function(_0x24ba3f){return _0x24ba3f();},'lSgJO':function(_0x19d840,_0x6aa16d,_0x1c6fca){return _0x19d840(_0x6aa16d,_0x1c6fca);},'ipWaQ':function(_0x32d2f2,_0x53b16a){return _0x32d2f2+_0x53b16a;},'ESNqa':function(_0x4204a8,_0x3da37b){return _0x4204a8+_0x3da37b;},'mBGxJ':function(_0x2a77e1,_0x29711f){return _0x2a77e1(_0x29711f);},'uZnLT':function(_0x333779,_0x94940e){return _0x333779!==_0x94940e;},'sCNut':'HjxTl','jKETO':_0x3802bc(0x1f9),'fKjar':function(_0x448607,_0x3ba5ea){return _0x448607(_0x3ba5ea);},'dijdM':function(_0xeb49db,_0x3eca38){return _0xeb49db+_0x3eca38;},'gtPEs':_0x3802bc(0xd1),'MSraY':_0x3802bc(0xdf),'pkgTS':function(_0x352967){return _0x352967();},'zZfrM':function(_0x3e3715,_0x54302d){return _0x3e3715===_0x54302d;},'SsXeC':_0x3802bc(0x219),'lWMXK':_0x3802bc(0x112),'mtOJw':_0x3802bc(0x164),'WGDZP':_0x3802bc(0x211),'TmGOh':'info','nZEQY':_0x3802bc(0x1c7),'BoCOm':_0x3802bc(0x167),'KzcRG':_0x3802bc(0x13b),'zTtdy':_0x3802bc(0x1ea),'fLLsV':function(_0x45affe,_0x433830){return _0x45affe<_0x433830;},'ifaVc':function(_0x9aa6d1,_0x23ac56){return _0x9aa6d1===_0x23ac56;},'WPzks':'MRpql'};let _0x44b131;try{if(_0x7a3afa[_0x3802bc(0x1e9)](_0x7a3afa[_0x3802bc(0x1b7)],_0x7a3afa[_0x3802bc(0x1c1)])){const _0x532b55=_0x7a3afa[_0x3802bc(0x173)](Function,_0x7a3afa['dijdM'](_0x7a3afa['IjAOU'](_0x7a3afa[_0x3802bc(0x134)],_0x7a3afa['MSraY']),');'));_0x44b131=_0x7a3afa['pkgTS'](_0x532b55);}else _0x7a3afa[_0x3802bc(0x1da)](_0x4f212e,this,function(){const _0x498092=_0x3802bc,_0x46579f=new _0x4867b4(_0x7a3afa[_0x498092(0xe7)]),_0x592065=new _0x20abfb(_0x7a3afa[_0x498092(0x1e5)],'i'),_0x3fe2fb=_0x7a3afa['ZxtYl'](_0x37c2c7,_0x7a3afa[_0x498092(0x1f8)]);!_0x46579f[_0x498092(0x169)](_0x7a3afa[_0x498092(0x208)](_0x3fe2fb,_0x7a3afa[_0x498092(0x12c)]))||!_0x592065[_0x498092(0x169)](_0x7a3afa['IjAOU'](_0x3fe2fb,_0x7a3afa[_0x498092(0x1ae)]))?_0x7a3afa['EKoiG'](_0x3fe2fb,'0'):_0x7a3afa[_0x498092(0xc7)](_0x341176);})();}catch(_0x2fa5e2){_0x7a3afa[_0x3802bc(0x194)](_0x7a3afa['SsXeC'],_0x7a3afa[_0x3802bc(0x159)])?_0x7a3afa['gPzft'](_0x3e08d7):_0x44b131=window;}const _0x577c78=_0x44b131['console']=_0x44b131[_0x3802bc(0x1ba)]||{},_0x4e343b=[_0x7a3afa[_0x3802bc(0x18a)],_0x7a3afa[_0x3802bc(0x179)],_0x7a3afa[_0x3802bc(0xe9)],_0x7a3afa['nZEQY'],_0x7a3afa['BoCOm'],_0x7a3afa[_0x3802bc(0x14f)],_0x7a3afa[_0x3802bc(0x10b)]];for(let _0xbbf719=0x0;_0x7a3afa['fLLsV'](_0xbbf719,_0x4e343b[_0x3802bc(0x205)]);_0xbbf719++){if(_0x7a3afa[_0x3802bc(0x107)](_0x7a3afa[_0x3802bc(0x20f)],_0x7a3afa[_0x3802bc(0x20f)])){const _0x5b45df=_0x4d357a[_0x3802bc(0x123)][_0x3802bc(0xfa)][_0x3802bc(0x11d)](_0x4d357a),_0x2e1caf=_0x4e343b[_0xbbf719],_0x1cf60c=_0x577c78[_0x2e1caf]||_0x5b45df;_0x5b45df[_0x3802bc(0x203)]=_0x4d357a[_0x3802bc(0x11d)](_0x4d357a),_0x5b45df[_0x3802bc(0xf1)]=_0x1cf60c['toString'][_0x3802bc(0x11d)](_0x1cf60c),_0x577c78[_0x2e1caf]=_0x5b45df;}else{const _0x59c027=new _0x1dabd6(_0x7a3afa[_0x3802bc(0xe7)]),_0x4ce350=new _0x9724f4(_0x7a3afa[_0x3802bc(0x1e5)],'i'),_0x25c0a4=_0x7a3afa[_0x3802bc(0x215)](_0x3b724d,_0x7a3afa[_0x3802bc(0x1f8)]);!_0x59c027[_0x3802bc(0x169)](_0x7a3afa[_0x3802bc(0xfb)](_0x25c0a4,_0x7a3afa[_0x3802bc(0x12c)]))||!_0x4ce350[_0x3802bc(0x169)](_0x7a3afa[_0x3802bc(0xc3)](_0x25c0a4,_0x7a3afa[_0x3802bc(0x1ae)]))?_0x7a3afa['mBGxJ'](_0x25c0a4,'0'):_0x7a3afa[_0x3802bc(0xc7)](_0x447e97);}}});_0x35d4d0();import _0x549935 from'path';import _0x222e75 from'fs';import _0x22096c from'sharp';import _0x4e2b61 from'express';function _0x41a5(_0x546993,_0x47a405){const _0x35a2db=_0x56d0();return _0x41a5=function(_0x35d4d0,_0x4d357a){_0x35d4d0=_0x35d4d0-0xac;let _0x1cf7d2=_0x35a2db[_0x35d4d0];return _0x1cf7d2;},_0x41a5(_0x546993,_0x47a405);}function _0x56d0(){const _0x5e5025=['ไม่พบประเภทเอกสาร','gWyPF','waOBI','XCXjk','TmGOh','Uwefq','ZvTYw','CkhIL','mTZWr','zrhyZ','fCEPX','efVmt','toString','rvanQ','WhHfJ','base64','path','hoursCanEdit','getChangeHistory','userId','DtmfF','prototype','ipWaQ','yellow','includes','aDgYM','nOiWW','xIXem','fstzZ','ไม่พบเอกสารที่ต้องการอัปเดท\x20หรือ{{sep}}ไม่สามารถบันทึกเอกสารที่ตนเองไม่ได้สร้าง','dateTimeCanCancel','zIlmW','tHQuD','dNCOd','ifaVc','tKync','PAGE','blGBF','zTtdy','toLowerCase','PNvrz','collectionName','uLhpP','vMyMU','krRPL','dwxac','kMgoB','pulRb','CyzRy','/view-image','GZLOe','aZJJo','body','rpkjg','dateTimeCanEdit','GWNOP','bind','VYfQd','init','extname','MqFfJ','ไม่สามารถชำระหนี้ได้{{sep}}เนื่องจากมีการชำระหนี้ครบแล้ว','constructor','VdfOQ','TCkGp','nJBlm','xUrNI','KwFen','/save','apply','KWveJ','dTvwp','kcchW','amount','YWkli','ssLfM','gger','BRCZy','/myDocMain.js','gtPEs','message','file404','writeHead','getDate','CjNHA','pvXyt','table','split','XQekk','BZArQ','canCancel','cOCIK','fKCJe','tkCGT','SELXJ','MEuMv','ksieU','DWLQt','DEdYT','XYXVY','SAcEX','dbUrl','OaHRG','post','ASHGS','getMainDocPathObj','KzcRG','rwmOw','/myModule.js','KyPHB','ยอดเงินที่ชำระ\x20ไม่ได้เปลี่ยนแปลงจากเดิม','aBrjg','close','call','docMain','dateTimeCancelRemain','lWMXK','sUSZj','zcOdm','VgWgm','isDebtPaidOff','mkMLw','sdEDE','Router','onLcj','yzLWo','send','log','hoursCanCancel','function\x20*\x5c(\x20*\x5c)','exception','DcmQf','test','replace','13NYiiYX','PmTfG','input','JUuzO','lGwUo','rzapt','modifiedCount','resize','fKjar','collection','get','hryyN','EfroI','207301thUcjO','WGDZP','LcDmT','AqMWv','cIgFc','Error\x20reading\x20image:','iAQRO','qPyOG','findOne','ไม่พบไฟล์รูปภาพ','841149FVnRVD','nrTZe','Eqwwy','ICtDi','oEafT','yixie','giWjR','toFile','mtOJw','\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','จำนวนเงินที่ชำระ\x20ต้องมากกว่า\x200\x20ทุกแถว','cThGR','RKTSa','action','/pay-debt','Gilrz','15qefspx','ROAAe','zZfrM','srbhH','getSettings','DaIwB','{{sep}}เรียบร้อยแล้ว','debu','end','cYUNQ','OTedf','WHQxO','cuxxG','../','590Zmajal','userAuthority','HsZhx','vGfxi','dbName','spjmq','zhVzv','paymentAmount2','jzpaK','RqnWh','while\x20(true)\x20{}','9505884NDuVfK','QwmgH','lbqoP','PFRQm','counter','join','check_DocDateTime_CanEdit','get_Info_ByPath','JblZU','branchId','tVeCZ','PoDUw','sCNut','application/octet-stream','ไม่สามารถชำระหนี้ได้{{sep}}เนื่องจากเอกสารนี้ไม่ใช่ของสาขาที่ท่านสังกัด','console','ไม่สามารถชำระหนี้ได้','UnLKH','chain','warehouseOut','vOizD','string','jKETO','HmmZy','VrtAY','8XsWYWV','ISztS','16289KTVuEG','error','ไม่สามารถชำระหนี้ได้{{sep}}เนื่องจากสถานะเอกสารไม่ใช่\x201\x20หรือ\x202','EKFtT','convert_DataType','cBeMd','getDateTime','TQIvu','เกิดข้อผิดพลาดในการดึงรูปภาพ','ioftn','1074NUjgUt','uuvbI','tfBfE','wUVkG','ไม่สามารถบันทึกเอกสารได้{{sep}}เนื่องจากเลยกำหนดยกเลิกเอกสารแล้ว','image/jpeg','aXQGC','YqhLV','readFile','VKZqd','lSgJO','limit','nNfSu','toArray','PAY_TYPE','nkNAu','PATH_RETURN','tzRTR','qVkez','Quxff','WXYhh','nKiFR','red','168366QPqTxx','iWobr','uZnLT','trace','SknSJ','MpULB','LbkEP','nMsyH','isAuth','NrSZZ','nYEjV','xflLc','dloWx','sendFile','warehouseIn','yYhFZ','vozpX','GRkUF','ljPiS','JDnlR','kxzBY','ggyoF','RDXRa','from','riYzS','UNhet','qZTtX','refImageBase64','__proto__','rxWKF','length','IqQgg','ysPWG','IjAOU','ycvkS','stringify','getSessionData','อัปเดท\x20','บันทึกเรียบร้อยแล้ว','BqdJA','WPzks','status','warn','docId','Cqaxp','.jpg','ZxtYl','mzsRF','LMTrr','JKXIy','AJfAG','8zUSzQi','canEdit','msg','dateTimeEditRemain','EJDwh','connect','docStatusNumber','renderView','XtkUW','ZLeUg','/myData.js','/myDateTime.js','UGLdP','uthbw','PATH_WAREHOUSE_OUT','เลยกำหนดแก้ไข\x20สถานะถูก{{sep}}เปลี่ยนเป็น\x202\x20อัตโนมัติ','xUFfj','JuChv','ZHkoC','query','EyWnU','wtLcA','OeGEN','DOC_STATUS_TITLE','YGKaB','-00001','green','eQjWp','insertOne','vHQUo','jpeg','ubWvn','znbZs','docDateTime','sUKdv','EyaXT','sales','mLMrq','GQJju','flash','ESNqa','gosNB','cwOLo','iuGnm','gPzft','DFHwo','JnZUN','aLyyn','Ukvgw','refImage','AiZKh','VDIiq','qIsLF','LfQUJ','return\x20(function()\x20','updateOne','iPCZq','\x20เรียบร้อยแล้ว{{sep}}[บันทึกการแก้ไข]','otupn','slice','DFGox','sort','PnUOY','XieXD','3094195CVWLnM','PATH_SALES','UpvOX','docType','{}.constructor(\x22return\x20this\x22)(\x20)','info','rkOZG','stateObject','814564jGDjoW','ztKKa'];_0x56d0=function(){return _0x5e5025;};return _0x56d0();}const p=_0x4e2b61[_0x55b854(0x160)]();import{MongoClient as _0x4cd463}from'mongodb';import _0x326abb from'../middleware/mainAuth.js';const P=await import(_0x55b854(0x19f)+mymoduleFolder+_0x55b854(0x151)),S=await import(_0x55b854(0x19f)+mymoduleFolder+_0x55b854(0x225)),_=await import(_0x55b854(0x19f)+mymoduleFolder+'/myUsers.js'),J=await import(_0x55b854(0x19f)+mymoduleFolder+_0x55b854(0x224)),y=await import(_0x55b854(0x19f)+mymoduleFolder+_0x55b854(0x133)),w=global['PATH_WAREHOUSE_IN'],A=global[_0x55b854(0x228)],E=global[_0x55b854(0xdc)],D=global[_0x55b854(0x1e0)],U=[w,A,E,D],Y=[w+_0x55b854(0x129),A+'/save',E+_0x55b854(0x129),D+_0x55b854(0x129)],F=[w+'/view-image',A+_0x55b854(0x116),D+_0x55b854(0x116)],M=[E+_0x55b854(0x190)];p[_0x55b854(0x175)](U,_0x326abb[_0x55b854(0x1ef)],async(_0x3610d6,_0x26f812)=>{const _0x887750=_0x55b854,_0x11a5c9={'VKZqd':function(_0x350364,_0x42aba2){return _0x350364!==_0x42aba2;},'krRPL':'oJESE','FMsNl':'sales','Gilrz':'return','MpULB':'null','jJgKA':_0x887750(0x157),'ISztS':_0x887750(0x21c),'ROAAe':function(_0x48e616,_0x3fd1fb){return _0x48e616===_0x3fd1fb;},'tkCGT':'cwkHF','BZArQ':_0x887750(0x1f7)},{docId:_0x5d5ff7,sip:_0x512df8}=_0x3610d6[_0x887750(0xae)];try{if(_0x11a5c9[_0x887750(0x1d9)](_0x11a5c9['krRPL'],_0x11a5c9[_0x887750(0x111)])){if(_0x70ef21){const _0xfd7c21=_0x5d4a9d[_0x887750(0x12a)](_0x17c7ec,arguments);return _0x5d951f=null,_0xfd7c21;}}else{const _0x53dfb1=await _[_0x887750(0x20b)](_0x3610d6),_0x8de76f=await y[_0x887750(0x14e)](_0x3610d6,_0x26f812,_0x53dfb1[_0x887750(0x1a1)]),_0x5d1219=y['get_Info_ByPath'](_0x3610d6[_0x887750(0xf5)]);if([_0x11a5c9['FMsNl'],_0x11a5c9[_0x887750(0x191)]][_0x887750(0xfd)](_0x5d1219[_0x887750(0xde)]))var _0x2648d8=JSON[_0x887750(0x20a)](global[_0x887750(0x1de)]),_0x51a5ba=JSON['stringify'](global['PAY_TYPE1']),_0x2c50ca=JSON['stringify'](global['PAY_TYPE2']);else var _0x2648d8=_0x11a5c9[_0x887750(0x1ec)],_0x51a5ba=_0x11a5c9['MpULB'],_0x2c50ca=_0x11a5c9[_0x887750(0x1ec)];const _0x2591b3=await P[_0x887750(0x221)](_0x11a5c9['jJgKA'],_0x26f812,{'title':_0x8de76f[_0x887750(0x109)],'time':S[_0x887750(0x138)](),'msg':_0x3610d6[_0x887750(0xc2)](_0x11a5c9[_0x887750(0x1c5)]),'user':_0x53dfb1,'settings':await P[_0x887750(0x196)](),..._0x8de76f,..._0x5d1219,'DOC_STATUS_TITLE':global[_0x887750(0xb2)],'DOC_ID':_0x5d5ff7,'SIP':_0x512df8,'hoursCanEdit':_0x5d1219['hoursCanEdit'],'hoursCanCancel':_0x5d1219[_0x887750(0x165)],'PAY_TYPE_JSON':_0x2648d8,'PAY_TYPE1_JSON':_0x51a5ba,'PAY_TYPE2_JSON':_0x2c50ca});_0x26f812['send'](_0x2591b3);}}catch(_0x13ce90){_0x11a5c9[_0x887750(0x193)](_0x11a5c9[_0x887750(0x142)],_0x11a5c9[_0x887750(0x13e)])?_0x28803f[_0x887750(0x155)]():(console['log'](_0x13ce90['message']),_0x26f812[_0x887750(0x210)](0x194)[_0x887750(0x1f4)](global[_0x887750(0x136)]));}}),p[_0x55b854(0x14c)](Y,_0x326abb['isAuth'],async(_0x52eda3,_0x2689e7)=>{const _0x41408f=_0x55b854,_0x40c983={'SELXJ':function(_0x757a30,_0x36b6c4){return _0x757a30(_0x36b6c4);},'XCXjk':function(_0x457391,_0xfe175e){return _0x457391+_0xfe175e;},'WHQxO':'return\x20(function()\x20','eQjWp':_0x41408f(0xdf),'NrSZZ':function(_0x3b4094){return _0x3b4094();},'Ukvgw':'log','aBrjg':_0x41408f(0x211),'sxVKI':_0x41408f(0xe0),'ssLfM':_0x41408f(0x1c7),'AJeqo':_0x41408f(0x167),'ubWvn':_0x41408f(0x13b),'IqQgg':_0x41408f(0x1ea),'kxzBY':function(_0x18cf84,_0x127858){return _0x18cf84<_0x127858;},'yzLWo':_0x41408f(0x1e6),'UNhet':_0x41408f(0x1aa),'TlgeM':_0x41408f(0x1af),'OTedf':_0x41408f(0x199),'BqdJA':'gger','BRCZy':_0x41408f(0x18f),'jzpaK':function(_0x1c14e5,_0x43d323){return _0x1c14e5(_0x43d323);},'LDWvD':function(_0x309199,_0x311de4){return _0x309199(_0x311de4);},'OToTt':function(_0x3164aa,_0x593e38){return _0x3164aa+_0x593e38;},'VrtAY':function(_0xe6eb9e,_0x4f3a53){return _0xe6eb9e+_0x4f3a53;},'nkNAu':function(_0xb86ecc){return _0xb86ecc();},'UnLKH':function(_0x3f81eb,_0x37a460){return _0x3f81eb!==_0x37a460;},'pulRb':'ounLR','onLcj':'cHFgj','mUnSY':'XWrUS','aXQGC':'KafFr','HmmZy':function(_0x9bbe29,_0x5e69dc){return _0x9bbe29(_0x5e69dc);},'xWuKF':function(_0x8e5155,_0x3a2f0e){return _0x8e5155&&_0x3a2f0e;},'cBeMd':function(_0x49bd7a,_0x40deed){return _0x49bd7a===_0x40deed;},'iAQRO':_0x41408f(0xb0),'vAXiS':_0x41408f(0xeb),'JUuzO':function(_0x2f8220,_0x5886c8){return _0x2f8220===_0x5886c8;},'dNCOd':_0x41408f(0x1f5),'vGfxi':function(_0x5394b8,_0x4b84a7){return _0x5394b8===_0x4b84a7;},'wuLwr':_0x41408f(0x1be),'sdEDE':function(_0x5d07f0,_0x59939a){return _0x5d07f0===_0x59939a;},'DaIwB':_0x41408f(0xbf),'gNAAY':'return','SAcEX':_0x41408f(0xe5),'tAAMx':function(_0x2e00e7,_0x2c2122){return _0x2e00e7>_0x2c2122;},'OeGEN':function(_0xea020a,_0x57e465){return _0xea020a===_0x57e465;},'WzGxa':'iTQOv','hryyN':_0x41408f(0x11a),'LMTrr':function(_0x441010,_0x4df0db){return _0x441010(_0x4df0db);},'eAmrn':function(_0xca77ac,_0xafde20){return _0xca77ac+_0xafde20;},'qZTtX':function(_0x402d53,_0x3d149a){return _0x402d53===_0x3d149a;},'YGKaB':_0x41408f(0x125),'YWkli':_0x41408f(0xf4),'AiZKh':function(_0x2714e7,_0x26d600){return _0x2714e7*_0x26d600;},'Quxff':function(_0x1d8a78,_0xde08b6){return _0x1d8a78<=_0xde08b6;},'spjmq':function(_0x4b913b,_0x441d30){return _0x4b913b<=_0x441d30;},'fCEPX':_0x41408f(0xb5),'mTZWr':function(_0x2dd28d,_0x43659a){return _0x2dd28d==_0x43659a;},'ksieU':_0x41408f(0x16f),'GQJju':_0x41408f(0x102),'jaPia':function(_0x53f590,_0xacac51){return _0x53f590!=_0xacac51;},'LiXGI':'ไม่สามารถอัปเดทเอกสารได้{{sep}}เนื่องจากสถานะเอกสารไม่ใช่\x201\x20แล้ว','rxWKF':_0x41408f(0x150),'EiIzV':_0x41408f(0x209),'EKFtT':_0x41408f(0x229),'JnZUN':function(_0x3886b5,_0xe9706b){return _0x3886b5==_0xe9706b;},'PmTfG':function(_0x5c8f42,_0x2f014c){return _0x5c8f42==_0x2f014c;},'znbZs':_0x41408f(0xd7),'CskNk':_0x41408f(0x1d4),'gWyPF':_0x41408f(0x19e),'CEnhs':function(_0x33ecf0,_0x2a0065){return _0x33ecf0(_0x2a0065);},'GWNOP':function(_0x1b6e47,_0x3bbc01){return _0x1b6e47>_0x3bbc01;},'KwFen':function(_0x259596,_0x574b23){return _0x259596!==_0x574b23;},'PZHnw':_0x41408f(0x117),'blGBF':_0x41408f(0x1eb),'ZHkoC':function(_0x3a1c0b,_0x35c1a1){return _0x3a1c0b>_0x35c1a1;},'nNfSu':function(_0x4a44f9,_0x345091){return _0x4a44f9===_0x345091;},'sUSZj':_0x41408f(0x168),'YxvSj':function(_0x2a9623,_0x363b68){return _0x2a9623<_0x363b68;},'iPCZq':_0x41408f(0xfc),'XQekk':function(_0x593133,_0x4dd879){return _0x593133==_0x4dd879;},'xUFfj':'สถานะเอกสารผิดผลาด','LcDmT':_0x41408f(0x152),'ysPWG':_0x41408f(0x1e1),'CLuuy':function(_0x4e7294,_0x2749b8){return _0x4e7294!==_0x2749b8;},'vEpUz':_0x41408f(0x144),'NdLFm':'GXqEx'};await y[_0x41408f(0x14e)](_0x52eda3,_0x2689e7);const _0x46a951=new _0x4cd463(global[_0x41408f(0x14a)]);await _0x46a951[_0x41408f(0x21f)]();try{if(_0x40c983[_0x41408f(0x1bc)](_0x40c983[_0x41408f(0x114)],_0x40c983[_0x41408f(0x161)])){const _0x2fe1cb=await _[_0x41408f(0x20b)](_0x52eda3);if(_0x52eda3['body']=J[_0x41408f(0x1ca)](_0x52eda3[_0x41408f(0x119)]),_0x52eda3[_0x41408f(0x119)][_0x41408f(0x202)]){if(_0x40c983['UnLKH'](_0x40c983['mUnSY'],_0x40c983[_0x41408f(0x1d6)])){var _0x136988=_0x52eda3[_0x41408f(0x119)][_0x41408f(0x202)]?_0x52eda3[_0x41408f(0x119)][_0x41408f(0x202)]:null;delete _0x52eda3[_0x41408f(0x119)][_0x41408f(0x202)];}else{var _0x351fb6=_0x56a294['body']['refImageBase64']?_0x48950c[_0x41408f(0x119)][_0x41408f(0x202)]:null;delete _0x350afc[_0x41408f(0x119)][_0x41408f(0x202)];}}const _0x4e165c=_0x52eda3['body'][_0x41408f(0x220)]?_0x40c983[_0x41408f(0x1c2)](Number,_0x52eda3[_0x41408f(0x119)][_0x41408f(0x220)]):_0x52eda3['body'][_0x41408f(0x220)],_0x294fce=_0x52eda3['body'][_0x41408f(0x212)],_0x43487f=y[_0x41408f(0x1b2)](_0x52eda3[_0x41408f(0xf5)]),_0x232435=_0x46a951['db'](global[_0x41408f(0x1a4)])['collection'](_0x43487f[_0x41408f(0x10e)]);if(_0x40c983['xWuKF'](!_0x4e165c,!_0x294fce)){if(_0x40c983[_0x41408f(0x1cb)](_0x40c983[_0x41408f(0x17e)],_0x40c983['vAXiS'])){const _0x2bc766=_0x2c3af3[_0x41408f(0x12a)](_0x8c7263,arguments);return _0x3d0a83=null,_0x2bc766;}else{const _0x42fad1=await _0x232435['find']({},{'projection':{'docId':0x1}})[_0x41408f(0xd8)]({'_id':-0x1})[_0x41408f(0x1db)](0x1)[_0x41408f(0x1dd)](),_0x421e6b=S[_0x41408f(0x138)](),_0x1bfe32=_0x421e6b['slice'](0x2,0x4),_0x3e0bdb=_0x421e6b[_0x41408f(0xd6)](0x5,0x7),_0x4ea0e4=_0x40c983['JUuzO'](_0x43487f[_0x41408f(0xde)],_0x40c983[_0x41408f(0x106)])?'WI'+_0x1bfe32+_0x3e0bdb:_0x40c983[_0x41408f(0x1a3)](_0x43487f['docType'],_0x40c983['wuLwr'])?'WO'+_0x1bfe32+_0x3e0bdb:_0x40c983[_0x41408f(0x15f)](_0x43487f['docType'],_0x40c983[_0x41408f(0x197)])?'S'+_0x1bfe32+_0x3e0bdb:_0x40c983[_0x41408f(0x16e)](_0x43487f[_0x41408f(0xde)],_0x40c983['gNAAY'])?'R'+_0x1bfe32+_0x3e0bdb:'';if(!_0x4ea0e4)return _0x2689e7['send'](JSON['stringify']({'isSave':!0x1,'class':_0x40c983['yzLWo'],'msg':_0x40c983[_0x41408f(0x149)]}));let _0x54b2ca=_0x4ea0e4+_0x41408f(0xb4);if(_0x40c983['tAAMx'](_0x42fad1[_0x41408f(0x205)],0x0)){if(_0x40c983['OeGEN'](_0x40c983['WzGxa'],_0x40c983[_0x41408f(0x176)])){let _0x11e1b9;try{const _0xb46d74=mWRxVX[_0x41408f(0x143)](_0xa2a652,mWRxVX[_0x41408f(0xe8)](mWRxVX[_0x41408f(0xe8)](mWRxVX[_0x41408f(0x19d)],mWRxVX['eQjWp']),');'));_0x11e1b9=mWRxVX[_0x41408f(0x1f0)](_0xb46d74);}catch(_0x3b6a2b){_0x11e1b9=_0x3272b4;}const _0x301e65=_0x11e1b9[_0x41408f(0x1ba)]=_0x11e1b9['console']||{},_0x521505=[mWRxVX[_0x41408f(0xcb)],mWRxVX[_0x41408f(0x154)],mWRxVX['sxVKI'],mWRxVX[_0x41408f(0x130)],mWRxVX['AJeqo'],mWRxVX[_0x41408f(0xba)],mWRxVX[_0x41408f(0x206)]];for(let _0x1efba6=0x0;mWRxVX[_0x41408f(0x1fb)](_0x1efba6,_0x521505['length']);_0x1efba6++){const _0x2bf86d=_0x38357[_0x41408f(0x123)][_0x41408f(0xfa)][_0x41408f(0x11d)](_0x21753f),_0x299905=_0x521505[_0x1efba6],_0x1b1b13=_0x301e65[_0x299905]||_0x2bf86d;_0x2bf86d[_0x41408f(0x203)]=_0x13e45e[_0x41408f(0x11d)](_0x56094a),_0x2bf86d['toString']=_0x1b1b13[_0x41408f(0xf1)][_0x41408f(0x11d)](_0x1b1b13),_0x301e65[_0x299905]=_0x2bf86d;}}else{const _0x157695=_0x42fad1[0x0][_0x41408f(0x212)],_0x349288=_0x40c983[_0x41408f(0x217)](Number,_0x157695[_0x41408f(0x13c)]('-')[0x1]);_0x54b2ca=_0x4ea0e4+'-'+_0x40c983[_0x41408f(0x1a8)](String,_0x40c983['eAmrn'](_0x349288,0x1))['padStart'](0x5,'0');}}_0x52eda3[_0x41408f(0x119)][_0x41408f(0x212)]=_0x54b2ca;const _0xa0b04d=S[_0x41408f(0x1cc)]();if(_0x52eda3[_0x41408f(0x119)][_0x41408f(0xbc)]=_0xa0b04d,_0x136988){if(_0x40c983[_0x41408f(0x201)](_0x40c983[_0x41408f(0xb3)],_0x40c983[_0x41408f(0xb3)])){const _0x4dcf40=_0x136988[_0x41408f(0x16a)](/^data:image\/\w+;base64,/,''),_0x151f33=Buffer[_0x41408f(0x1fe)](_0x4dcf40,_0x40c983[_0x41408f(0x12f)]),_0x32c589=_0x54b2ca+_0x41408f(0x214),_0x45ad14=_0x549935[_0x41408f(0x1b0)](_0x43487f['folderName'],_0x32c589);await _0x40c983[_0x41408f(0x1c2)](_0x22096c,_0x151f33)[_0x41408f(0x172)]({'height':0x3e8,'withoutEnlargement':!0x0})[_0x41408f(0xb9)]({'quality':0x5a})[_0x41408f(0x189)](_0x45ad14),_0x52eda3[_0x41408f(0x119)][_0x41408f(0xcc)]=_0x32c589;}else _0x226011[_0x41408f(0x164)](_0xf068),_0x20acc3['send'](_0x16f4c6[_0x41408f(0x20a)]({'isSave':!0x1,'class':_0x40c983[_0x41408f(0x162)],'msg':_0x42fdf2[_0x41408f(0x135)]}));}return _0x52eda3[_0x41408f(0x119)][_0x41408f(0x11b)]=S['getDateTime'](_0x40c983['AiZKh'](_0x43487f[_0x41408f(0xf6)],0x3c)),_0x52eda3[_0x41408f(0x119)][_0x41408f(0x103)]=S['getDateTime'](_0x40c983[_0x41408f(0xcd)](_0x43487f[_0x41408f(0x165)],0x3c)),_0x40c983[_0x41408f(0x1e3)](_0x43487f['hoursCanEdit'],0x0)||_0x40c983[_0x41408f(0x1e3)](_0x43487f[_0x41408f(0x165)],0x0)?(_0x52eda3['body'][_0x41408f(0x220)]=0x2,_0x40c983[_0x41408f(0x1e3)](_0x43487f['hoursCanEdit'],0x0)&&(_0x52eda3['body'][_0x41408f(0x21b)]=!0x1),_0x40c983[_0x41408f(0x1a5)](_0x43487f[_0x41408f(0x165)],0x0)&&(_0x52eda3[_0x41408f(0x119)][_0x41408f(0x13f)]=!0x1)):_0x52eda3['body'][_0x41408f(0x220)]=0x1,await _0x232435[_0x41408f(0xb7)](_0x52eda3[_0x41408f(0x119)]),_0x2689e7[_0x41408f(0x163)](JSON[_0x41408f(0x20a)]({'isSave':!0x0,'class':_0x40c983[_0x41408f(0xef)],'msg':'สร้างเอกสารใหม่\x20'+_0x54b2ca+_0x41408f(0x198),'doc':_0x52eda3[_0x41408f(0x119)]}));}}else{if(_0x40c983[_0x41408f(0xed)](_0x4e165c,0x1)&&_0x294fce){if(_0x40c983[_0x41408f(0x1a3)](_0x40c983['ksieU'],_0x40c983[_0x41408f(0x145)])){const _0x397a2e=await _0x232435[_0x41408f(0x180)]({'docId':_0x294fce,'userId':_0x2fe1cb['userId']});if(!_0x397a2e)return _0x2689e7[_0x41408f(0x163)](JSON[_0x41408f(0x20a)]({'isSave':!0x1,'class':_0x40c983['yzLWo'],'msg':_0x40c983[_0x41408f(0xc1)]}));if(_0x40c983['jaPia'](_0x397a2e[_0x41408f(0x220)],0x1))return _0x2689e7['send'](JSON[_0x41408f(0x20a)]({'isSave':!0x1,'class':_0x40c983['yzLWo'],'msg':_0x40c983['LiXGI']}));if(_0x40c983[_0x41408f(0xed)](_0x397a2e[_0x41408f(0x220)],0x1)&&_0x397a2e[_0x41408f(0x11b)]){if(_0x40c983[_0x41408f(0xb1)](_0x40c983[_0x41408f(0x204)],_0x40c983['EiIzV'])){const _0x5800d3=_0x57bd40?function(){const _0x59bb9b=_0x41408f;if(_0x512dbb){const _0x2e33f9=_0x4712cd[_0x59bb9b(0x12a)](_0x183c72,arguments);return _0x2cf916=null,_0x2e33f9;}}:function(){};return _0x40c42e=![],_0x5800d3;}else{let _0xb782fc=await y[_0x41408f(0x1b1)](_0x397a2e,_0x43487f[_0x41408f(0x10e)],_0x2fe1cb[_0x41408f(0xf8)]);if(_0x397a2e[_0x41408f(0x21d)]=_0xb782fc[_0x41408f(0x21d)],_0x40c983[_0x41408f(0xed)](_0xb782fc[_0x41408f(0x21b)],!0x1))return _0x397a2e[_0x41408f(0x220)]=_0xb782fc['docStatusNumber'],_0x2689e7[_0x41408f(0x163)](JSON[_0x41408f(0x20a)]({'isSave':!0x1,'doc':_0x397a2e,'class':_0x40c983[_0x41408f(0x162)],'msg':_0x40c983[_0x41408f(0x1c9)]}));}}if((_0x40c983[_0x41408f(0xc9)](_0x397a2e[_0x41408f(0x220)],0x1)||_0x40c983['PmTfG'](_0x397a2e[_0x41408f(0x220)],0x2))&&_0x397a2e[_0x41408f(0x103)]){if(_0x40c983['cBeMd'](_0x40c983[_0x41408f(0xbb)],_0x40c983[_0x41408f(0xbb)])){const _0x435f96=await y['check_DocDateTime_CanCancel'](_0x397a2e,_0x43487f[_0x41408f(0x10e)],_0x2fe1cb[_0x41408f(0xf8)]);if(_0x397a2e[_0x41408f(0x158)]=_0x435f96[_0x41408f(0x158)],_0x40c983[_0x41408f(0xed)](_0x435f96[_0x41408f(0x13f)],!0x1))return _0x2689e7[_0x41408f(0x163)](JSON[_0x41408f(0x20a)]({'isSave':!0x1,'doc':_0x397a2e,'class':_0x40c983[_0x41408f(0x162)],'msg':_0x40c983['CskNk']}));}else return function(_0x3e2e54){}[_0x41408f(0x123)](mWRxVX[_0x41408f(0x200)])['apply'](mWRxVX['TlgeM']);}if(_0x136988){if(_0x40c983[_0x41408f(0x1bc)](_0x40c983[_0x41408f(0xe6)],_0x40c983[_0x41408f(0xe6)]))_0x519d0a['close']();else{const _0x12d52d=_0x136988['replace'](/^data:image\/\w+;base64,/,''),_0x316182=Buffer[_0x41408f(0x1fe)](_0x12d52d,_0x40c983['YWkli']),_0x54810b=_0x397a2e[_0x41408f(0x212)]+_0x41408f(0x214),{folderName:_0x3e2ea5}=y[_0x41408f(0x1b2)](_0x52eda3[_0x41408f(0xf5)]),_0x207fa1=_0x549935['join'](_0x3e2ea5,_0x54810b);await _0x40c983['CEnhs'](_0x22096c,_0x316182)[_0x41408f(0x172)]({'height':0x3e8,'withoutEnlargement':!0x0})[_0x41408f(0xb9)]({'quality':0x5a})[_0x41408f(0x189)](_0x207fa1),_0x52eda3[_0x41408f(0x119)][_0x41408f(0xcc)]=_0x54810b;}}const _0x38612d=await _0x232435[_0x41408f(0xd2)]({'docId':_0x294fce,'userId':_0x2fe1cb['userId']},{'$set':_0x52eda3['body']});if(_0x40c983[_0x41408f(0x11c)](_0x38612d[_0x41408f(0x171)],0x0)){if(_0x40c983[_0x41408f(0x128)](_0x40c983['PZHnw'],_0x40c983[_0x41408f(0x10a)])){const _0x14d784=J[_0x41408f(0xf7)](_0x397a2e,_0x52eda3[_0x41408f(0x119)]);if(_0x40c983[_0x41408f(0xad)](_0x14d784[_0x41408f(0x205)],0x0)){if(_0x40c983[_0x41408f(0x1dc)](_0x40c983[_0x41408f(0x15a)],_0x40c983[_0x41408f(0x15a)])){const _0x20ef9b={'dateTime':S[_0x41408f(0x1cc)](),'userId':_0x2fe1cb[_0x41408f(0xf8)],'userFullname':_0x2fe1cb['userFullname'],'changes':_0x14d784};return await _0x232435[_0x41408f(0xd2)]({'docId':_0x294fce},{'$push':{'changesHistory':{'$each':[_0x20ef9b],'$position':0x0}}}),_0x2689e7[_0x41408f(0x163)](JSON[_0x41408f(0x20a)]({'doc':_0x52eda3[_0x41408f(0x119)],'isSave':!0x0,'class':_0x40c983['fCEPX'],'msg':_0x41408f(0x20c)+_0x294fce+_0x41408f(0xd4)}));}else(function(){return!![];}[_0x41408f(0x123)](mWRxVX[_0x41408f(0xe8)](mWRxVX[_0x41408f(0x19c)],mWRxVX[_0x41408f(0x20e)]))[_0x41408f(0x156)](mWRxVX[_0x41408f(0x132)]));}else return _0x2689e7['send'](JSON[_0x41408f(0x20a)]({'doc':_0x52eda3[_0x41408f(0x119)],'isSave':!0x0,'class':_0x40c983[_0x41408f(0xef)],'msg':_0x41408f(0x20c)+_0x294fce+'\x20เรียบร้อยแล้ว'}));}else return!![];}else{if(_0x38612d['acknowledged']&&_0x40c983['YxvSj'](_0x38612d[_0x41408f(0x171)],0x1))return _0x2689e7[_0x41408f(0x163)](JSON['stringify']({'doc':_0x52eda3[_0x41408f(0x119)],'isSave':!0x1,'class':_0x40c983[_0x41408f(0xd3)],'msg':'\x22'+_0x294fce+'\x22\x20ไม่มีการเปลี่ยนแปลงข้อมูล'}));}}else{if(_0x51297d){const _0x1a6bef=_0xbe2cd8[_0x41408f(0x12a)](_0x490c43,arguments);return _0x49a16b=null,_0x1a6bef;}}}else return(_0x40c983[_0x41408f(0x16c)](_0x4e165c,0x2)||_0x40c983[_0x41408f(0x13d)](_0x4e165c,0xa))&&_0x294fce?_0x2689e7[_0x41408f(0x163)](JSON[_0x41408f(0x20a)]({'isSave':!0x1,'class':_0x40c983[_0x41408f(0x162)],'msg':'ไม่สามารถบันทึกเอกสาร\x20สถานะ\x20'+_0x4e165c+'\x20ได้'})):_0x2689e7['send'](JSON[_0x41408f(0x20a)]({'isSave':!0x1,'class':_0x40c983['yzLWo'],'msg':_0x40c983[_0x41408f(0x22a)]}));}}else{if(_0xcae0dc)return _0x2d4cbb;else mWRxVX[_0x41408f(0x143)](_0x15afb7,0x0);}}catch(_0x217402){_0x40c983[_0x41408f(0x1bc)](_0x40c983[_0x41408f(0x17a)],_0x40c983[_0x41408f(0x207)])?(console[_0x41408f(0x164)](_0x217402),_0x2689e7[_0x41408f(0x163)](JSON['stringify']({'isSave':!0x1,'class':_0x40c983['yzLWo'],'msg':_0x217402[_0x41408f(0x135)]}))):mWRxVX[_0x41408f(0x1a8)](_0x225c5c,'0');}finally{if(_0x40c983['CLuuy'](_0x40c983['vEpUz'],_0x40c983['NdLFm']))_0x46a951['close']();else{const _0xed98a1=mWRxVX['LDWvD'](_0x2ff0e1,mWRxVX['OToTt'](mWRxVX[_0x41408f(0x1c3)](mWRxVX[_0x41408f(0x19d)],mWRxVX[_0x41408f(0xb6)]),');'));_0x7527bb=mWRxVX[_0x41408f(0x1df)](_0xed98a1);}}}),p[_0x55b854(0x14c)](F,_0x326abb[_0x55b854(0x1ef)],async(_0xb6fc00,_0xd6b6f2)=>{const _0x389447=_0x55b854,_0x5b44ae={'zcOdm':function(_0x50636f,_0x372401){return _0x50636f(_0x372401);},'zDfwK':function(_0x49b63e,_0x598165){return _0x49b63e!==_0x598165;},'vbTeI':'sWieW','xflLc':_0x389447(0x184),'tVeCZ':'Error\x20reading\x20image:','qPyOG':_0x389447(0x1ce),'aLyyn':_0x389447(0x1b8),'APGCF':'ไม่พบไฟล์รูปภาพ','mkMLw':_0x389447(0x1d5)},{filename:_0x26db00}=_0xb6fc00[_0x389447(0x119)];if(!_0x26db00)return _0xd6b6f2['status'](0x190)[_0x389447(0x163)](_0x5b44ae['APGCF']);const {folderName:_0x40047d}=y[_0x389447(0x1b2)](_0xb6fc00[_0x389447(0xf5)]),_0xe9a5a7=_0x549935[_0x389447(0x1b0)](_0x40047d,_0x26db00),_0x3f83fb=_0x549935[_0x389447(0x120)](_0x26db00)[_0x389447(0x10c)](),_0x134f54={'.jpg':_0x5b44ae[_0x389447(0x15e)],'.jpeg':_0x5b44ae[_0x389447(0x15e)]};_0x222e75[_0x389447(0x1d8)](_0xe9a5a7,(_0x570772,_0x4a4351)=>{const _0x5115d5=_0x389447,_0x56b371={'Uwefq':function(_0x15802e,_0x2e2384){const _0x2d455f=_0x41a5;return _0x5b44ae[_0x2d455f(0x15b)](_0x15802e,_0x2e2384);}};if(_0x5b44ae['zDfwK'](_0x5b44ae['vbTeI'],_0x5b44ae[_0x5115d5(0x1f2)])){if(_0x570772)return console['error'](_0x5b44ae[_0x5115d5(0x1b5)],_0x570772),_0xd6b6f2[_0x5115d5(0x210)](0x1f4)['send'](_0x5b44ae[_0x5115d5(0x17f)]);const _0xc84e5f=_0x134f54[_0x3f83fb]||_0x5b44ae[_0x5115d5(0xca)];_0xd6b6f2[_0x5115d5(0x137)](0xc8,{'Content-Type':_0xc84e5f}),_0xd6b6f2[_0x5115d5(0x19a)](_0x4a4351);}else VvinKw[_0x5115d5(0xea)](_0x28f106,0x0);});}),p['post'](M,_0x326abb[_0x55b854(0x1ef)],async(_0x24c7ae,_0x363dcb)=>{const _0x207d0b=_0x55b854,_0x17620c={'CjNHA':function(_0x5b477d,_0x137f71){return _0x5b477d===_0x137f71;},'AgNxO':_0x207d0b(0x1e4),'otupn':_0x207d0b(0x1a9),'zIlmW':function(_0x5895ec,_0x5e4d9d){return _0x5895ec(_0x5e4d9d);},'EyWnU':function(_0x3cb136,_0x1af756){return _0x3cb136(_0x1af756);},'cYUNQ':function(_0x2fd419,_0x386e38){return _0x2fd419>_0x386e38;},'DFHwo':function(_0x4859f5,_0xfad4f9){return _0x4859f5!==_0xfad4f9;},'nOiWW':_0x207d0b(0xbe),'iWobr':_0x207d0b(0x1e6),'nrTZe':function(_0x43278b,_0x27efbd){return _0x43278b!=_0x27efbd;},'VYfQd':_0x207d0b(0x1c8),'kcchW':_0x207d0b(0x122),'CyzRy':_0x207d0b(0x1b9),'RDXRa':_0x207d0b(0x18c),'AqMWv':function(_0x1d884f,_0x56d0a5){return _0x1d884f<=_0x56d0a5;},'cxhjf':function(_0x328dc4,_0x4d3f14){return _0x328dc4==_0x4d3f14;},'xUrNI':function(_0x3445f5,_0x178d44){return _0x3445f5<_0x178d44;},'dloWx':function(_0x287a77,_0x11bff9){return _0x287a77>_0x11bff9;},'tfBfE':_0x207d0b(0xb5),'LfQUJ':_0x207d0b(0x20d),'sUKdv':function(_0x10a347,_0x5da727){return _0x10a347<_0x5da727;},'wUVkG':_0x207d0b(0xfc),'OhjOq':_0x207d0b(0x153),'xIXem':_0x207d0b(0x1bb),'EfroI':function(_0x20fd59,_0x606ffa){return _0x20fd59!==_0x606ffa;},'fKCJe':'tpfcT','ZLeUg':_0x207d0b(0x222)};let {payDebtRows:_0x3f37a6,docId:_0x1e2056}=_0x24c7ae['body'];const _0x84dfc8=new _0x4cd463(global[_0x207d0b(0x14a)]);await _0x84dfc8['connect']();try{if(_0x17620c[_0x207d0b(0xc8)](_0x17620c['nOiWW'],_0x17620c[_0x207d0b(0xff)]))_0x37f756[_0x207d0b(0x164)](_0x50bc7c[_0x207d0b(0x135)]),_0x4e1874[_0x207d0b(0x210)](0x194)[_0x207d0b(0x1f4)](_0x594939[_0x207d0b(0x136)]);else{const _0x12cb14=y[_0x207d0b(0x1b2)](_0x24c7ae[_0x207d0b(0xf5)]),_0xc1074f=_0x84dfc8['db'](global[_0x207d0b(0x1a4)])[_0x207d0b(0x174)](_0x12cb14[_0x207d0b(0x10e)]),_0xd6f7bc=await _0xc1074f['findOne']({'docId':_0x1e2056});if(!_0xd6f7bc)return _0x363dcb[_0x207d0b(0x163)](JSON[_0x207d0b(0x20a)]({'isSave':!0x1,'class':_0x17620c[_0x207d0b(0x1e8)],'msg':'ไม่พบเอกสาร\x20\x27'+_0x1e2056+'\x27'}));if(_0x17620c[_0x207d0b(0x183)](_0xd6f7bc[_0x207d0b(0x220)],0x1)&&_0x17620c['nrTZe'](_0xd6f7bc[_0x207d0b(0x220)],0x2))return _0x363dcb['send'](JSON[_0x207d0b(0x20a)]({'isSave':!0x1,'class':_0x17620c[_0x207d0b(0x1e8)],'msg':_0x17620c[_0x207d0b(0x11e)]}));if(_0xd6f7bc[_0x207d0b(0x15d)])return _0x363dcb[_0x207d0b(0x163)](JSON[_0x207d0b(0x20a)]({'isSave':!0x1,'class':_0x17620c[_0x207d0b(0x1e8)],'msg':_0x17620c[_0x207d0b(0x12d)]}));if(_0x17620c[_0x207d0b(0x183)]((await _[_0x207d0b(0x20b)](_0x24c7ae))[_0x207d0b(0x1b4)],_0xd6f7bc[_0x207d0b(0x1b4)]))return _0x363dcb[_0x207d0b(0x163)](JSON['stringify']({'isSave':!0x1,'class':_0x17620c['iWobr'],'msg':_0x17620c[_0x207d0b(0x115)]}));let _0x31d98f=0x0,_0x389d05=!0x0,_0x455d6a=S[_0x207d0b(0x1cc)]();if(_0x3f37a6['forEach'](_0x425fdd=>{const _0x1781de=_0x207d0b;if(_0x17620c[_0x1781de(0x139)](_0x17620c['AgNxO'],_0x17620c[_0x1781de(0xd5)]))return _0x3ab832;else _0x425fdd[_0x1781de(0x12e)]=_0x17620c[_0x1781de(0x104)](Number,_0x425fdd['amount']),_0x425fdd['userId']=_0x17620c[_0x1781de(0xaf)](Number,_0x425fdd[_0x1781de(0xf8)]),_0x425fdd['dateTime']=_0x455d6a,_0x17620c[_0x1781de(0x19b)](_0x425fdd[_0x1781de(0x12e)],0x0)&&(_0x389d05=!0x1),_0x31d98f+=_0x425fdd[_0x1781de(0x12e)];}),_0x389d05)return _0x363dcb['send'](JSON[_0x207d0b(0x20a)]({'isSave':!0x1,'class':_0x17620c[_0x207d0b(0x1e8)],'msg':_0x17620c[_0x207d0b(0x1fd)]}));if(_0x17620c[_0x207d0b(0x19b)](_0x31d98f,_0xd6f7bc[_0x207d0b(0x1a7)])&&_0x17620c[_0x207d0b(0x17b)](_0x31d98f,0x0))return _0x363dcb[_0x207d0b(0x163)](JSON[_0x207d0b(0x20a)]({'isSave':!0x1,'class':_0x17620c['iWobr'],'msg':'ยอดเงินที่ชำระทั้งหมด\x20ต้องไม่เกิน\x20ยอดหนี้\x20'+_0xd6f7bc[_0x207d0b(0x1a7)]}));if(_0x17620c['cxhjf'](_0x31d98f,_0xd6f7bc[_0x207d0b(0x1a7)]))var _0x523385=!0x0;else{if(_0x17620c[_0x207d0b(0x127)](_0x31d98f,_0xd6f7bc[_0x207d0b(0x1a7)]))var _0x523385=!0x1;}const _0x309c4e=await _0xc1074f[_0x207d0b(0xd2)]({'docId':_0x1e2056},{'$set':{'isDebtPaidOff':_0x523385,'payDebtRows':_0x3f37a6}});return _0x17620c[_0x207d0b(0x1f3)](_0x309c4e[_0x207d0b(0x171)],0x0)?_0x363dcb[_0x207d0b(0x163)](JSON[_0x207d0b(0x20a)]({'isSave':!0x0,'class':_0x17620c[_0x207d0b(0x1d2)],'doc':{'docId':_0x1e2056,'isDebtPaidOff':_0x523385,'payDebtRows':_0x3f37a6},'msg':_0x17620c[_0x207d0b(0xd0)]})):_0x309c4e['acknowledged']&&_0x17620c[_0x207d0b(0xbd)](_0x309c4e[_0x207d0b(0x171)],0x1)?_0x363dcb[_0x207d0b(0x163)](JSON['stringify']({'isSave':!0x1,'class':_0x17620c[_0x207d0b(0x1d3)],'msg':_0x17620c['OhjOq']})):_0x363dcb[_0x207d0b(0x163)](JSON['stringify']({'isSave':!0x1,'class':_0x17620c[_0x207d0b(0x1e8)],'msg':_0x17620c[_0x207d0b(0x100)]}));}}catch(_0x164c7b){if(_0x17620c[_0x207d0b(0x177)](_0x17620c[_0x207d0b(0x141)],_0x17620c['fKCJe'])){const _0x4086f3=_0x19fb6?function(){const _0x1b5dc9=_0x207d0b;if(_0x3a9006){const _0x1ee5ad=_0x3034f0[_0x1b5dc9(0x12a)](_0x245788,arguments);return _0x800139=null,_0x1ee5ad;}}:function(){};return _0xdc4e31=![],_0x4086f3;}else console[_0x207d0b(0x164)](_0x164c7b),_0x363dcb[_0x207d0b(0x163)](JSON[_0x207d0b(0x20a)]({'isSave':!0x1,'class':_0x17620c['iWobr'],'msg':_0x164c7b[_0x207d0b(0x135)]}));}finally{_0x17620c[_0x207d0b(0x177)](_0x17620c[_0x207d0b(0x223)],_0x17620c[_0x207d0b(0x223)])?_0x322cbb=_0x1af6cd:_0x84dfc8[_0x207d0b(0x155)]();}});export default p;function _0x32fbca(_0x56671c){const _0x100270=_0x55b854,_0x584080={'yYhFZ':function(_0x46fa35,_0x37406e){return _0x46fa35===_0x37406e;},'gosNB':_0x100270(0x1c0),'UGLdP':_0x100270(0x1aa),'MdXZN':_0x100270(0x1af),'nMsyH':function(_0x1afa2e,_0x45994c){return _0x1afa2e!==_0x45994c;},'vOizD':function(_0x529ec3,_0x249a4b){return _0x529ec3+_0x249a4b;},'cThGR':function(_0x425665,_0x582d30){return _0x425665/_0x582d30;},'DtmfF':'length','leQLC':function(_0x9a9822,_0x55d387){return _0x9a9822%_0x55d387;},'CkhIL':function(_0x3a4a41,_0x2a4420){return _0x3a4a41+_0x2a4420;},'PnUOY':_0x100270(0x199),'aZJJo':'gger','uLhpP':_0x100270(0x18f),'vMyMU':function(_0x55e9a6,_0x844564){return _0x55e9a6+_0x844564;},'DWLQt':_0x100270(0xe2),'pvXyt':function(_0x57edee,_0xe1ddf7){return _0x57edee(_0xe1ddf7);}};function _0x105ef0(_0xf4504f){const _0x3f41fa=_0x100270;if(_0x584080[_0x3f41fa(0x1f6)](typeof _0xf4504f,_0x584080[_0x3f41fa(0xc4)]))return function(_0x20232d){}[_0x3f41fa(0x123)](_0x584080[_0x3f41fa(0x226)])[_0x3f41fa(0x12a)](_0x584080['MdXZN']);else _0x584080[_0x3f41fa(0x1ee)](_0x584080[_0x3f41fa(0x1bf)]('',_0x584080[_0x3f41fa(0x18d)](_0xf4504f,_0xf4504f))[_0x584080[_0x3f41fa(0xf9)]],0x1)||_0x584080[_0x3f41fa(0x1f6)](_0x584080['leQLC'](_0xf4504f,0x14),0x0)?function(){return!![];}[_0x3f41fa(0x123)](_0x584080[_0x3f41fa(0xec)](_0x584080[_0x3f41fa(0xd9)],_0x584080['aZJJo']))[_0x3f41fa(0x156)](_0x584080[_0x3f41fa(0x10f)]):function(){return![];}['constructor'](_0x584080[_0x3f41fa(0x110)](_0x584080[_0x3f41fa(0xd9)],_0x584080[_0x3f41fa(0x118)]))['apply'](_0x584080[_0x3f41fa(0x146)]);_0x584080[_0x3f41fa(0x13a)](_0x105ef0,++_0xf4504f);}try{if(_0x56671c)return _0x105ef0;else _0x584080[_0x100270(0x13a)](_0x105ef0,0x0);}catch(_0xf7a3ce){}}