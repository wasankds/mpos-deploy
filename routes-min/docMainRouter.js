const _0xd54f86=_0x551f;(function(_0x36f87b,_0x1be3eb){const _0x14d94c=_0x551f,_0x303e08=_0x36f87b();while(!![]){try{const _0x3bfedb=parseInt(_0x14d94c(0x202))/0x1*(parseInt(_0x14d94c(0x192))/0x2)+parseInt(_0x14d94c(0xf0))/0x3*(-parseInt(_0x14d94c(0x109))/0x4)+parseInt(_0x14d94c(0x112))/0x5+-parseInt(_0x14d94c(0x1de))/0x6+parseInt(_0x14d94c(0x14c))/0x7+parseInt(_0x14d94c(0xf7))/0x8*(parseInt(_0x14d94c(0x1ce))/0x9)+parseInt(_0x14d94c(0x14d))/0xa*(-parseInt(_0x14d94c(0x1ea))/0xb);if(_0x3bfedb===_0x1be3eb)break;else _0x303e08['push'](_0x303e08['shift']());}catch(_0x3e9637){_0x303e08['push'](_0x303e08['shift']());}}}(_0x48cf,0xd4f81));const _0x1dea4b=(function(){const _0x496519=_0x551f,_0x18fb46={'ERkeN':function(_0x4a81e8,_0x4575ff){return _0x4a81e8+_0x4575ff;},'XnvWJ':_0x496519(0x231),'wdkNl':_0x496519(0x106),'HveBD':_0x496519(0x148),'ksisO':function(_0x50c969,_0x219e8e){return _0x50c969===_0x219e8e;},'jdmKh':_0x496519(0x253),'vtsmT':_0x496519(0x10c),'uGBXx':_0x496519(0x21b),'zXFQz':'ujHUs','XPkXz':function(_0x395d79,_0x14b9af){return _0x395d79!==_0x14b9af;},'GWjRm':_0x496519(0x114),'YNHaD':_0x496519(0x157)};let _0x4721d4=!![];return function(_0x37dca7,_0x4593cc){const _0x3ff52c=_0x496519;if(_0x18fb46[_0x3ff52c(0x26a)](_0x18fb46['GWjRm'],_0x18fb46[_0x3ff52c(0x1fa)])){const _0x651c91=_0x4721d4?function(){const _0x2d72d6=_0x3ff52c,_0x1527c1={'vgBBJ':function(_0x5b71f4,_0x3da8b4){const _0x200cfc=_0x551f;return _0x18fb46[_0x200cfc(0x132)](_0x5b71f4,_0x3da8b4);},'uHhtr':_0x18fb46[_0x2d72d6(0xfa)],'BTlzL':_0x18fb46[_0x2d72d6(0x1eb)],'OxUfd':_0x18fb46[_0x2d72d6(0x238)]};if(_0x18fb46[_0x2d72d6(0x17e)](_0x18fb46[_0x2d72d6(0x1aa)],_0x18fb46[_0x2d72d6(0x267)]))_0x1bb1aa=_0x335a89;else{if(_0x4593cc){if(_0x18fb46[_0x2d72d6(0x17e)](_0x18fb46[_0x2d72d6(0x245)],_0x18fb46[_0x2d72d6(0x1a1)]))(function(){return!![];}[_0x2d72d6(0x251)](_0x1527c1[_0x2d72d6(0x1d8)](_0x1527c1[_0x2d72d6(0x152)],_0x1527c1[_0x2d72d6(0x21a)]))[_0x2d72d6(0x174)](_0x1527c1[_0x2d72d6(0x258)]));else{const _0x10cf7e=_0x4593cc[_0x2d72d6(0x177)](_0x37dca7,arguments);return _0x4593cc=null,_0x10cf7e;}}}}:function(){};return _0x4721d4=![],_0x651c91;}else{const _0x92e5bf=_0x43f57e[_0x3ff52c(0x251)][_0x3ff52c(0x133)][_0x3ff52c(0x150)](_0x4675cc),_0xc28940=_0x3be5e6[_0x2dee9d],_0x14f11d=_0x2d1607[_0xc28940]||_0x92e5bf;_0x92e5bf['__proto__']=_0x18b3e2[_0x3ff52c(0x150)](_0x47473f),_0x92e5bf['toString']=_0x14f11d[_0x3ff52c(0x119)][_0x3ff52c(0x150)](_0x14f11d),_0x6d58fb[_0xc28940]=_0x92e5bf;}};}());function _0x551f(_0x3c7682,_0x1b2a16){const _0x4e70e2=_0x48cf();return _0x551f=function(_0x48d9dd,_0x30f617){_0x48d9dd=_0x48d9dd-0xeb;let _0x56464a=_0x4e70e2[_0x48d9dd];return _0x56464a;},_0x551f(_0x3c7682,_0x1b2a16);}function _0x48cf(){const _0x274cad=['SXfWL','kFKVN','resize','gsAgC','fqQea','BgrXa','qsttP','NYBLi','SRvhD','fQkAz','base64','debu','vdDSB','tYBAy','collection','EyfSB','fXJva','jtcGr','HveBD','get_Info_ByPath','PmwQf','mtpQk','return\x20(function()\x20','YuceL','hoursCanCancel','tCXti','OnaYI','ไม่สามารถบันทึกเอกสารได้{{sep}}เนื่องจากเลยกำหนดยกเลิกเอกสารแล้ว','YXWjC','Fvwhd','NnAXE','uGBXx','find','RHtsO','replace','ไม่สามารถชำระหนี้ได้{{sep}}เนื่องจากสถานะเอกสารไม่ใช่\x201\x20หรือ\x202','function\x20*\x5c(\x20*\x5c)','BflkK','PrXWx','RQEmb','message','zcENi','Vsymx','constructor','RpQAt','PIfZo','docStatusNumber','pRQCC','yOreg','dateTimeCanEdit','OxUfd','bwSMb','TbSzz','vTXwA','amount','query','wWXce','isDebtPaidOff','/myData.js','UQrTd','ไม่สามารถบันทึกเอกสาร\x20สถานะ\x20','input','canCancel','WLiOK','mKbSF','vtsmT','tZAzQ','guFhr','XPkXz','sljLC','gUJRY','VgyYe','QHkeF','xtCQB','ไม่พบไฟล์รูปภาพ','3hQBSTP','euxxO','includes','QqDxc','tswGH','hxUIz','HeoqH','312TjcnLq','PATH_WAREHOUSE_IN','ljxFK','XnvWJ','sHOyA','yohLy','UTLBT','LeYGn','ไม่พบเอกสาร\x20\x27','bNAOr','pGFiJ','LkNvH','PATH_RETURN','exception','gmaYQ','gger','FoVqQ','bjZCK','6385068PSuNJt','OFUby','ijHoI','CDdCm','GOakv','status','FnGrR','{}.constructor(\x22return\x20this\x22)(\x20)','PUxDw','4354855OXvYlW','RAupa','yqBZW','ErerY','yGqoP','application/octet-stream','เกิดข้อผิดพลาดในการดึงรูปภาพ','toString','\x20เรียบร้อยแล้ว','uUmiL','DRLez','IkJUw','CMXQa','gEPiq','__proto__','return','imBTS','mHQEA','PAY_TYPE2','kNEVz','eEFgq','padStart','qIJxw','Ghdfd','ljBsx','BdimJ','WKJzo','zRTiB','userFullname','KUyJy','QzGre','gAHqj','ERkeN','prototype','unEXE','zcIQk','fKHNj','MmZNz','docMain','split','\x20เรียบร้อยแล้ว{{sep}}[บันทึกการแก้ไข]','sendFile','file404','bvIZl','QHYwA','สร้างเอกสารใหม่\x20','isAuth','jgGRl','GxXrY','HxksQ','folderName','init','counter','branchId','action','UkzPf','yNAjo','KCnzl','349412bCdUhI','230vwxLgj','image/jpeg','อัปเดท\x20','bind','GzApj','uHhtr','uHFfB','\x20ได้','JFJzP','DOC_STATUS_TITLE','AptaY','yptVQ','uiAiv','SQRCd','readFile','nkvsK','jmeIk','null','insertOne','glxfG','modifiedCount','info','gzJdz','uIKHH','เลยกำหนดแก้ไข\x20สถานะถูก{{sep}}เปลี่ยนเป็น\x202\x20อัตโนมัติ','/myDocMain.js','WRTCR','pxfuc','post','ยอดเงินที่ชำระ\x20ไม่ได้เปลี่ยนแปลงจากเดิม','log','PAGE','extname','PAY_TYPE','WrFtH','NnfCq','kTXWM','meHiC','XmTRy','call','YwNNt','path','apply','BVXxm','uJeSO','sort','gsiHU','../','check_DocDateTime_CanEdit','ksisO','ivAiA','lOwks','WeLGO','getChangeHistory','FlVYI','/view-image','XoCAP','LGZyy','/save','pSWmz','LCecs','docId','ZsPyK','\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','VyMbe','toLowerCase','บันทึกเรียบร้อยแล้ว','Xiqku','ecGff','3470866BXtcLw','Tseee','VUBsO','OJhSk','docDateTime','lakwM','UwvRL','dateTimeCanCancel','findOne','body','table','cViHP','warn','LAewO','omBVs','zXFQz','ไม่สามารถชำระหนี้ได้','collectionName','green','Error\x20reading\x20image:','vzNxB','rsnYf','yjaRM','DhCIN','jdmKh','OdxHU','getDate','getSessionData','ConAq','MUREb','dVtZU','KEnyu','console','error','JXepb','from','acknowledged','ujPaj','PAY_TYPE1','dateTimeEditRemain','stringify','klZxv','chain','xySUW','warehouseIn','DwBZL','renderView','paymentAmount2','tGBsi','RCWYH','yEUHh','limit','test','VMlcD','QMShH','PyLcy','CKFJF','connect','JEZPY','OjYly','392787xxgMkw','VUwAf','vnski','end','writeHead','convert_DataType','jqacR','sACKB','NQWwG','wGeuf','vgBBJ','XSIOu','OyByI','CMjRL','close','QmqTx','3697656VDrsyO','LwBOH','GDlFO','dbUrl','vvuoB','dateTimeCancelRemain','qvWTn','SZNeP','getDateTime','/myUsers.js','FaxDg','qGPte','609081NTGjlp','wdkNl','hfiaU','HafRl','docType','gTifu','updateOne','HUjnV','npcCX','ไม่สามารถชำระหนี้ได้{{sep}}เนื่องจากเอกสารนี้ไม่ใช่ของสาขาที่ท่านสังกัด','slice','userId','จำนวนเงินที่ชำระ\x20ต้องมากกว่า\x200\x20ทุกแถว','ZSbnP','LKxcU','yellow','YNHaD','LtdvY','nFflv','rEmmi','canEdit','red','BgrWV','stateObject','1ttZZGR','getMainDocPathObj','hoursCanEdit','ไม่พบประเภทเอกสาร','refImageBase64','.jpg','ovSyY','onVxK','dateTime','ไม่พบเอกสารที่ต้องการอัปเดท\x20หรือ{{sep}}ไม่สามารถบันทึกเอกสารที่ตนเองไม่ได้สร้าง','dbName','trace','wrnYv','length','hCCCC','send','vXUdp','refImage','NMyrw','crJZs','userAuthority','YcdDY','join','ยอดเงินที่ชำระทั้งหมด\x20ต้องไม่เกิน\x20ยอดหนี้\x20','BTlzL','gUJZn','eJGBM','PATH_SALES','KbRer','hBjwV','jGkfP','wzPOG','PEDcP','TfxwE','JlVKl','GzZzp'];_0x48cf=function(){return _0x274cad;};return _0x48cf();}(function(){const _0x211729=_0x551f,_0x1206f5={'POFyX':_0x211729(0xef),'GDlFO':_0x211729(0x14e),'jgGRl':_0x211729(0x1ff),'Xiqku':_0x211729(0x1a5),'pSWmz':_0x211729(0x118),'OjYly':'application/octet-stream','vlYTk':function(_0x53378e,_0x28f5c1){return _0x53378e!==_0x28f5c1;},'imBTS':_0x211729(0xed),'uPLHk':_0x211729(0x24a),'uHFfB':_0x211729(0x18c),'LkNvH':function(_0x1b6652,_0x36c3cd){return _0x1b6652(_0x36c3cd);},'GzApj':_0x211729(0x145),'fQkAz':function(_0x4de5c5,_0x2d9441){return _0x4de5c5+_0x2d9441;},'tJHgw':_0x211729(0x1bc),'IldSU':function(_0x558c11,_0x52fca7){return _0x558c11+_0x52fca7;},'DwBZL':_0x211729(0x263),'WRTCR':function(_0x3546db,_0x4c1ba0){return _0x3546db===_0x4c1ba0;},'HafRl':_0x211729(0x15d),'fqQea':_0x211729(0x265),'GOakv':_0x211729(0x1fb),'MFQYl':function(_0x53fb66){return _0x53fb66();},'CNRCB':function(_0x5d5820,_0x3494ba,_0x56ec90){return _0x5d5820(_0x3494ba,_0x56ec90);}};_0x1206f5['CNRCB'](_0x1dea4b,this,function(){const _0x5ab6c9=_0x211729,_0x4ab9b0={'TMPqp':_0x1206f5[_0x5ab6c9(0x190)],'VksiE':_0x1206f5[_0x5ab6c9(0x188)],'hnrss':_0x1206f5[_0x5ab6c9(0x1cd)]};if(_0x1206f5['vlYTk'](_0x1206f5[_0x5ab6c9(0x122)],_0x1206f5[_0x5ab6c9(0x122)])){const {filename:_0x211487}=_0xb534eb[_0x5ab6c9(0x19b)];if(!_0x211487)return _0x5174e8[_0x5ab6c9(0x10e)](0x190)[_0x5ab6c9(0x211)](_0x1206f5['POFyX']);const {folderName:_0x3e5196}=_0x23dbab[_0x5ab6c9(0x239)](_0x52e452[_0x5ab6c9(0x176)]),_0x119dff=_0x5f47b4[_0x5ab6c9(0x218)](_0x3e5196,_0x211487),_0x40dc65=_0x50eac7['extname'](_0x211487)[_0x5ab6c9(0x18e)](),_0x99fdf3={'.jpg':_0x1206f5['GDlFO'],'.jpeg':_0x1206f5[_0x5ab6c9(0x1e0)]};_0x5da1db['readFile'](_0x119dff,(_0x3d95c1,_0x34d914)=>{const _0x2b9d59=_0x5ab6c9;if(_0x3d95c1)return _0x159c61[_0x2b9d59(0x1b3)](_0x4ab9b0['TMPqp'],_0x3d95c1),_0x25e459[_0x2b9d59(0x10e)](0x1f4)['send'](_0x4ab9b0['VksiE']);const _0xb6b29=_0x99fdf3[_0x40dc65]||_0x4ab9b0['hnrss'];_0x5c843b[_0x2b9d59(0x1d2)](0xc8,{'Content-Type':_0xb6b29}),_0x35cdf4['end'](_0x34d914);});}else{const _0x158d3b=new RegExp(_0x1206f5['uPLHk']),_0x1d594c=new RegExp(_0x1206f5[_0x5ab6c9(0x153)],'i'),_0x5b537d=_0x1206f5[_0x5ab6c9(0x102)](_0x5efc8d,_0x1206f5[_0x5ab6c9(0x151)]);if(!_0x158d3b['test'](_0x1206f5[_0x5ab6c9(0x22f)](_0x5b537d,_0x1206f5['tJHgw']))||!_0x1d594c[_0x5ab6c9(0x1c6)](_0x1206f5['IldSU'](_0x5b537d,_0x1206f5[_0x5ab6c9(0x1bf)])))_0x1206f5[_0x5ab6c9(0x167)](_0x1206f5[_0x5ab6c9(0x1ed)],_0x1206f5[_0x5ab6c9(0x22a)])?(_0x5d1475['log'](_0xd8ca9b),_0x2af544[_0x5ab6c9(0x211)](_0x400a0c[_0x5ab6c9(0x1ba)]({'isSave':!0x1,'class':_0x1206f5[_0x5ab6c9(0x141)],'msg':_0x56132d[_0x5ab6c9(0x24e)]}))):_0x1206f5[_0x5ab6c9(0x102)](_0x5b537d,'0');else{if(_0x1206f5['WRTCR'](_0x1206f5[_0x5ab6c9(0x10d)],_0x1206f5[_0x5ab6c9(0x10d)]))_0x1206f5['MFQYl'](_0x5efc8d);else{const _0x1530e1=_0x149926[_0x5ab6c9(0x177)](_0x3c4f3e,arguments);return _0x422b4c=null,_0x1530e1;}}}})();}());const _0x30f617=(function(){const _0x41a284=_0x551f,_0xaecee7={'pULwm':'Error\x20reading\x20image:','xySUW':_0x41a284(0x118),'bjZCK':_0x41a284(0x117),'hCCCC':function(_0x494aaa,_0x35125a){return _0x494aaa===_0x35125a;},'NnAXE':_0x41a284(0x11c),'eJGBM':'IJpci','PyLcy':function(_0x40e5fc,_0x2f4c47){return _0x40e5fc!==_0x2f4c47;},'Ghdfd':_0x41a284(0x255),'Fvwhd':_0x41a284(0x22b),'aAzZB':'VrWNK'};let _0x34a7b5=!![];return function(_0x5cb350,_0x1325b4){const _0x31e553=_0x41a284;if(_0xaecee7[_0x31e553(0x1c9)](_0xaecee7[_0x31e553(0x243)],_0xaecee7['aAzZB'])){const _0x236d75=_0x34a7b5?function(){const _0x210cd=_0x31e553,_0x19a507={'SRvhD':_0xaecee7['pULwm'],'mKbSF':_0xaecee7[_0x210cd(0x1bd)],'gAHqj':_0xaecee7[_0x210cd(0x108)]};if(_0xaecee7[_0x210cd(0x210)](_0xaecee7[_0x210cd(0x244)],_0xaecee7[_0x210cd(0x21c)])){if(_0x58755d)return _0x2cd986[_0x210cd(0x1b3)](_0x19a507[_0x210cd(0x22e)],_0x2da049),_0x7193c1[_0x210cd(0x10e)](0x1f4)[_0x210cd(0x211)](_0x19a507[_0x210cd(0x266)]);const _0x5b5597=_0x204b62[_0x2ab940]||_0x19a507[_0x210cd(0x131)];_0x578f0b[_0x210cd(0x1d2)](0xc8,{'Content-Type':_0x5b5597}),_0x548b96[_0x210cd(0x1d1)](_0xc7dfe0);}else{if(_0x1325b4){if(_0xaecee7[_0x210cd(0x1c9)](_0xaecee7[_0x210cd(0x129)],_0xaecee7['Ghdfd'])){var _0x1819ee=_0x30a850[_0x210cd(0x19b)][_0x210cd(0x206)]?_0x1d1829[_0x210cd(0x19b)][_0x210cd(0x206)]:null;delete _0x2e28fa['body']['refImageBase64'];}else{const _0x52c58f=_0x1325b4[_0x210cd(0x177)](_0x5cb350,arguments);return _0x1325b4=null,_0x52c58f;}}}}:function(){};return _0x34a7b5=![],_0x236d75;}else{const _0x825bf5=_0x1f05a3?function(){if(_0x1338ca){const _0x5c28ef=_0x1d339f['apply'](_0x42c19b,arguments);return _0x125d87=null,_0x5c28ef;}}:function(){};return _0x3f59d1=![],_0x825bf5;}};}()),_0x48d9dd=_0x30f617(this,function(){const _0x1dc0b7=_0x551f,_0x5d1ea0={'iMJKa':function(_0x982846,_0x2acd84){return _0x982846(_0x2acd84);},'UTLBT':function(_0x47aa87,_0x4d719d){return _0x47aa87(_0x4d719d);},'LAewO':function(_0x47a7fc,_0x2ae1e){return _0x47a7fc===_0x2ae1e;},'ConAq':_0x1dc0b7(0x105),'crJZs':_0x1dc0b7(0x1d6),'ujPaj':function(_0x35b100,_0x5e0efd){return _0x35b100+_0x5e0efd;},'jtcGr':_0x1dc0b7(0x23c),'qsttP':'{}.constructor(\x22return\x20this\x22)(\x20)','yNAjo':'Hitxw','gEPiq':function(_0x3867f9){return _0x3867f9();},'vdDSB':_0x1dc0b7(0x16b),'NMyrw':_0x1dc0b7(0x19e),'cfuel':_0x1dc0b7(0x162),'FoVqQ':'error','PgXoM':_0x1dc0b7(0x104),'VyMbe':_0x1dc0b7(0x19c),'RpQAt':_0x1dc0b7(0x20d),'GQAVZ':function(_0x50f715,_0x4d3c6c){return _0x50f715<_0x4d3c6c;},'OFUby':function(_0x559fdc,_0x286109){return _0x559fdc===_0x286109;},'lOwks':_0x1dc0b7(0x143),'PrXWx':'tDycH'},_0xa16dca=function(){const _0x18c128=_0x1dc0b7,_0x33c763={'tCXti':function(_0xf74c1d,_0x5ec394){const _0x14c83b=_0x551f;return _0x5d1ea0[_0x14c83b(0xfd)](_0xf74c1d,_0x5ec394);}};if(_0x5d1ea0[_0x18c128(0x19f)](_0x5d1ea0[_0x18c128(0x1ae)],_0x5d1ea0['ConAq'])){let _0x37b60a;try{if(_0x5d1ea0[_0x18c128(0x19f)](_0x5d1ea0[_0x18c128(0x215)],_0x5d1ea0[_0x18c128(0x215)]))_0x37b60a=_0x5d1ea0[_0x18c128(0xfd)](Function,_0x5d1ea0[_0x18c128(0x1b7)](_0x5d1ea0[_0x18c128(0x1b7)](_0x5d1ea0[_0x18c128(0x237)],_0x5d1ea0[_0x18c128(0x22c)]),');'))();else return!![];}catch(_0x40e020){if(_0x5d1ea0['LAewO'](_0x5d1ea0[_0x18c128(0x14a)],_0x5d1ea0['yNAjo']))_0x37b60a=window;else{if(_0x367f95)return _0x3629b5;else _0x5d1ea0['iMJKa'](_0x404a19,0x0);}}return _0x37b60a;}else _0x33c763[_0x18c128(0x23f)](_0x4cd13d,0x0);},_0x311010=_0x5d1ea0[_0x1dc0b7(0x11f)](_0xa16dca),_0x2eecc9=_0x311010[_0x1dc0b7(0x1b2)]=_0x311010[_0x1dc0b7(0x1b2)]||{},_0x26b9d8=[_0x5d1ea0[_0x1dc0b7(0x232)],_0x5d1ea0[_0x1dc0b7(0x214)],_0x5d1ea0['cfuel'],_0x5d1ea0[_0x1dc0b7(0x107)],_0x5d1ea0['PgXoM'],_0x5d1ea0[_0x1dc0b7(0x18d)],_0x5d1ea0[_0x1dc0b7(0x252)]];for(let _0x48ae92=0x0;_0x5d1ea0['GQAVZ'](_0x48ae92,_0x26b9d8[_0x1dc0b7(0x20f)]);_0x48ae92++){if(_0x5d1ea0[_0x1dc0b7(0x10a)](_0x5d1ea0[_0x1dc0b7(0x180)],_0x5d1ea0[_0x1dc0b7(0x24c)])){let _0x19428d;try{_0x19428d=_0x5d1ea0[_0x1dc0b7(0xfd)](_0x156816,_0x5d1ea0['ujPaj'](_0x5d1ea0[_0x1dc0b7(0x1b7)](_0x5d1ea0[_0x1dc0b7(0x237)],_0x5d1ea0[_0x1dc0b7(0x22c)]),');'))();}catch(_0x571df3){_0x19428d=_0x5bd3fd;}return _0x19428d;}else{const _0x3bd8e7=_0x30f617['constructor'][_0x1dc0b7(0x133)]['bind'](_0x30f617),_0x4b6dfe=_0x26b9d8[_0x48ae92],_0x32131d=_0x2eecc9[_0x4b6dfe]||_0x3bd8e7;_0x3bd8e7[_0x1dc0b7(0x120)]=_0x30f617[_0x1dc0b7(0x150)](_0x30f617),_0x3bd8e7[_0x1dc0b7(0x119)]=_0x32131d[_0x1dc0b7(0x119)][_0x1dc0b7(0x150)](_0x32131d),_0x2eecc9[_0x4b6dfe]=_0x3bd8e7;}}});_0x48d9dd();import _0x436d15 from'path';import _0x5d31e7 from'fs';import _0x16e2dc from'sharp';import _0x2cfcd5 from'express';const p=_0x2cfcd5['Router']();import{MongoClient as _0x21093b}from'mongodb';import _0x145051 from'../middleware/mainAuth.js';const P=await import('../'+mymoduleFolder+'/myModule.js'),S=await import(_0xd54f86(0x17c)+mymoduleFolder+'/myDateTime.js'),_=await import('../'+mymoduleFolder+_0xd54f86(0x1e7)),J=await import(_0xd54f86(0x17c)+mymoduleFolder+_0xd54f86(0x260)),y=await import(_0xd54f86(0x17c)+mymoduleFolder+_0xd54f86(0x166)),w=global[_0xd54f86(0xf8)],A=global['PATH_WAREHOUSE_OUT'],E=global[_0xd54f86(0x21d)],D=global[_0xd54f86(0x103)],U=[w,A,E,D],Y=[w+_0xd54f86(0x187),A+_0xd54f86(0x187),E+_0xd54f86(0x187),D+'/save'],F=[w+_0xd54f86(0x184),A+_0xd54f86(0x184),D+'/view-image'],M=[E+'/pay-debt'];p['get'](U,_0x145051[_0xd54f86(0x140)],async(_0x4a73e8,_0x560ef9)=>{const _0x411ef3=_0xd54f86,_0x2347ff={'RLYZw':function(_0x2763e8,_0x164bd4){return _0x2763e8(_0x164bd4);},'CKFJF':function(_0x453dbb,_0x5030c1){return _0x453dbb+_0x5030c1;},'hBjwV':_0x411ef3(0x23c),'wGeuf':_0x411ef3(0x110),'yptVQ':'while\x20(true)\x20{}','WKJzo':_0x411ef3(0x146),'qvWTn':function(_0x4cd7ca,_0x19d26f){return _0x4cd7ca===_0x19d26f;},'vnski':_0x411ef3(0xfb),'glxfG':'vCITo','FaxDg':'sales','wWXce':'return','WrFtH':_0x411ef3(0x15e),'CMjRL':_0x411ef3(0x138),'uIKHH':'msg','NnfCq':function(_0x57b16c,_0x222a5a){return _0x57b16c!==_0x222a5a;},'kNEVz':_0x411ef3(0x235)},{docId:_0x4e31ca,sip:_0x4232b9}=_0x4a73e8[_0x411ef3(0x25d)];try{if(_0x2347ff[_0x411ef3(0x1e4)](_0x2347ff[_0x411ef3(0x1d0)],_0x2347ff[_0x411ef3(0x160)]))_0x284954=HdjQcl['RLYZw'](_0x3b09a2,HdjQcl[_0x411ef3(0x1ca)](HdjQcl[_0x411ef3(0x1ca)](HdjQcl[_0x411ef3(0x21f)],HdjQcl[_0x411ef3(0x1d7)]),');'))();else{const _0x517b7e=await _[_0x411ef3(0x1ad)](_0x4a73e8),_0x263a49=await y['getMainDocPathObj'](_0x4a73e8,_0x560ef9,_0x517b7e[_0x411ef3(0x216)]),_0x16dd94=y[_0x411ef3(0x239)](_0x4a73e8[_0x411ef3(0x176)]);if([_0x2347ff[_0x411ef3(0x1e8)],_0x2347ff[_0x411ef3(0x25e)]][_0x411ef3(0xf2)](_0x16dd94[_0x411ef3(0x1ee)]))var _0x363256=JSON[_0x411ef3(0x1ba)](global[_0x411ef3(0x16e)]),_0x59370c=JSON['stringify'](global[_0x411ef3(0x1b8)]),_0x5dc251=JSON['stringify'](global[_0x411ef3(0x124)]);else var _0x363256=_0x2347ff['WrFtH'],_0x59370c=_0x2347ff['WrFtH'],_0x5dc251=_0x2347ff[_0x411ef3(0x16f)];const _0x3db26a=await P[_0x411ef3(0x1c0)](_0x2347ff[_0x411ef3(0x1db)],_0x560ef9,{'title':_0x263a49[_0x411ef3(0x16c)],'time':S[_0x411ef3(0x1ac)](),'msg':_0x4a73e8['flash'](_0x2347ff[_0x411ef3(0x164)]),'user':_0x517b7e,'settings':await P['getSettings'](),..._0x263a49,..._0x16dd94,'DOC_STATUS_TITLE':global[_0x411ef3(0x156)],'DOC_ID':_0x4e31ca,'SIP':_0x4232b9,'hoursCanEdit':_0x16dd94[_0x411ef3(0x204)],'hoursCanCancel':_0x16dd94[_0x411ef3(0x23e)],'PAY_TYPE_JSON':_0x363256,'PAY_TYPE1_JSON':_0x59370c,'PAY_TYPE2_JSON':_0x5dc251});_0x560ef9['send'](_0x3db26a);}}catch(_0x51e08b){if(_0x2347ff[_0x411ef3(0x170)](_0x2347ff[_0x411ef3(0x125)],_0x2347ff[_0x411ef3(0x125)]))return function(_0x2b4a3a){}['constructor'](HdjQcl[_0x411ef3(0x158)])[_0x411ef3(0x177)](HdjQcl[_0x411ef3(0x12c)]);else console[_0x411ef3(0x16b)](_0x51e08b[_0x411ef3(0x24e)]),_0x560ef9[_0x411ef3(0x10e)](0x194)[_0x411ef3(0x13b)](global[_0x411ef3(0x13c)]);}}),p[_0xd54f86(0x169)](Y,_0x145051['isAuth'],async(_0x50d8d0,_0x171f1c)=>{const _0x3923f7=_0xd54f86,_0x110764={'SXfWL':function(_0x1862cf,_0xcb5902){return _0x1862cf(_0xcb5902);},'KUyJy':function(_0x4964c0){return _0x4964c0();},'LGZyy':function(_0x1e0db7,_0x3a7b2b){return _0x1e0db7+_0x3a7b2b;},'PEDcP':_0x3923f7(0x231),'gTifu':'gger','hxUIz':_0x3923f7(0x201),'NYBLi':_0x3923f7(0x24a),'KCnzl':_0x3923f7(0x18c),'RQEmb':_0x3923f7(0x145),'tGBsi':function(_0x845ef4,_0x22569b){return _0x845ef4+_0x22569b;},'XSIOu':_0x3923f7(0x1bc),'ZSbnP':'input','QzGre':function(_0x4320bc,_0x3e93fd){return _0x4320bc(_0x3e93fd);},'DrkEn':function(_0x58fc0a,_0x3404da,_0x323f40){return _0x58fc0a(_0x3404da,_0x323f40);},'PUxDw':function(_0xc81ab4,_0x4c8dc0){return _0xc81ab4(_0x4c8dc0);},'HeoqH':function(_0x3ae862,_0x4df9f8){return _0x3ae862(_0x4df9f8);},'ljxFK':function(_0x232ce5,_0x57bc07){return _0x232ce5>_0x57bc07;},'lakwM':function(_0x4fa893,_0x5b2955){return _0x4fa893!==_0x5b2955;},'ivAiA':_0x3923f7(0x212),'unEXE':function(_0x27c10c,_0x1a306c){return _0x27c10c===_0x1a306c;},'BgrWV':'JbWHi','JEZPY':function(_0x43572e,_0x59b8f9){return _0x43572e(_0x59b8f9);},'cViHP':function(_0x477682,_0x533b36){return _0x477682&&_0x533b36;},'sljLC':'ezmeq','zcENi':_0x3923f7(0x1be),'pGFiJ':function(_0x2d7d10,_0x87ccfb){return _0x2d7d10===_0x87ccfb;},'vsiXs':'warehouseOut','VMlcD':'sales','HMjNj':function(_0x2b6cea,_0x1140f7){return _0x2b6cea===_0x1140f7;},'SQRCd':_0x3923f7(0x121),'JXepb':_0x3923f7(0x1ff),'gzJdz':_0x3923f7(0x205),'RCWYH':function(_0x3f5e1a,_0x35996a){return _0x3f5e1a>_0x35996a;},'Zxsvw':function(_0x2547bf,_0x17b46e){return _0x2547bf===_0x17b46e;},'kTXWM':'SbcHw','GxXrY':function(_0x36a595,_0x35fdaa){return _0x36a595(_0x35fdaa);},'RAupa':function(_0x14d7db,_0xf6305c){return _0x14d7db(_0xf6305c);},'onVxK':function(_0x1597b6,_0x5640ac){return _0x1597b6+_0x5640ac;},'gsAgC':function(_0x2dd7af,_0x4ca765){return _0x2dd7af!==_0x4ca765;},'eIKCo':_0x3923f7(0x136),'ecGff':'fzKjc','mtpQk':_0x3923f7(0x230),'BVXxm':function(_0xd0540,_0x1728e0){return _0xd0540(_0x1728e0);},'BflkK':function(_0x4007aa,_0x388b7b){return _0x4007aa*_0x388b7b;},'Vsymx':function(_0x46867c,_0x1e69e8){return _0x46867c*_0x1e69e8;},'IkJUw':function(_0x2bc6f6,_0xb4e7be){return _0x2bc6f6<=_0xb4e7be;},'vdowf':function(_0x5dab05,_0x59aa79){return _0x5dab05<=_0x59aa79;},'TfxwE':_0x3923f7(0x1a4),'KEnyu':function(_0xbd7a1,_0x49f377){return _0xbd7a1==_0x49f377;},'uJeSO':_0x3923f7(0x1ec),'YuceL':'NkEuv','jGkfP':_0x3923f7(0x20b),'LCecs':function(_0x5cf6e1,_0x317f5e){return _0x5cf6e1!=_0x317f5e;},'NAclf':'ไม่สามารถอัปเดทเอกสารได้{{sep}}เนื่องจากสถานะเอกสารไม่ใช่\x201\x20แล้ว','klZxv':_0x3923f7(0x193),'YXWjC':_0x3923f7(0x1f8),'XoCAP':_0x3923f7(0x165),'ljBsx':function(_0x2e4abd,_0x5da0c6){return _0x2e4abd==_0x5da0c6;},'iLjGk':_0x3923f7(0x1a8),'yHwkQ':function(_0x21d5a4,_0x33a086){return _0x21d5a4==_0x33a086;},'ErerY':_0x3923f7(0x241),'MUREb':'fMEWa','jqacR':_0x3923f7(0x15c),'gsiHU':_0x3923f7(0x224),'npcCX':function(_0x17cf04,_0x19a21f){return _0x17cf04>_0x19a21f;},'OdxHU':function(_0x50693b,_0x1e83a5){return _0x50693b!==_0x1e83a5;},'CMXQa':'JnXzv','XmTRy':function(_0x3c68c1,_0x3b0975){return _0x3c68c1<_0x3b0975;},'FupLB':_0x3923f7(0x1f9),'gUJRY':function(_0x423e35,_0x1447cb){return _0x423e35==_0x1447cb;},'ypYPG':function(_0x369897,_0x55113d){return _0x369897==_0x55113d;},'xtCQB':'สถานะเอกสารผิดผลาด','rEmmi':'ucmXM','FlVYI':_0x3923f7(0x225),'bwSMb':function(_0x373fde,_0xfb63c1){return _0x373fde===_0xfb63c1;},'QMShH':_0x3923f7(0x1a6)};await y[_0x3923f7(0x203)](_0x50d8d0,_0x171f1c);const _0x305d85=new _0x21093b(global[_0x3923f7(0x1e1)]);await _0x305d85[_0x3923f7(0x1cb)]();try{if(_0x110764['lakwM'](_0x110764[_0x3923f7(0x17f)],_0x110764[_0x3923f7(0x17f)]))NAIwSR[_0x3923f7(0x226)](_0x4c9cdd,'0');else{const _0x4a37cc=await _[_0x3923f7(0x1ad)](_0x50d8d0);if(_0x50d8d0['body']=J[_0x3923f7(0x1d3)](_0x50d8d0['body']),_0x50d8d0[_0x3923f7(0x19b)][_0x3923f7(0x206)]){if(_0x110764[_0x3923f7(0x134)](_0x110764['BgrWV'],_0x110764[_0x3923f7(0x200)])){var _0xfe31b8=_0x50d8d0['body']['refImageBase64']?_0x50d8d0[_0x3923f7(0x19b)]['refImageBase64']:null;delete _0x50d8d0[_0x3923f7(0x19b)][_0x3923f7(0x206)];}else NAIwSR[_0x3923f7(0x12f)](_0x3cb9bc);}const _0x5cd569=_0x50d8d0[_0x3923f7(0x19b)][_0x3923f7(0x254)]?_0x110764[_0x3923f7(0x1cc)](Number,_0x50d8d0['body'][_0x3923f7(0x254)]):_0x50d8d0['body'][_0x3923f7(0x254)],_0x5075ca=_0x50d8d0[_0x3923f7(0x19b)][_0x3923f7(0x18a)],_0x5b0c=y[_0x3923f7(0x239)](_0x50d8d0[_0x3923f7(0x176)]),_0x19a954=_0x305d85['db'](global['dbName'])[_0x3923f7(0x234)](_0x5b0c[_0x3923f7(0x1a3)]);if(_0x110764[_0x3923f7(0x19d)](!_0x5cd569,!_0x5075ca)){if(_0x110764['lakwM'](_0x110764['sljLC'],_0x110764[_0x3923f7(0x26b)]))_0x16d8e4[_0x3923f7(0x16b)](_0x1e8f14[_0x3923f7(0x24e)]),_0x5bf7c3[_0x3923f7(0x10e)](0x194)[_0x3923f7(0x13b)](_0x31377f[_0x3923f7(0x13c)]);else{const _0x5ac782=await _0x19a954[_0x3923f7(0x246)]({},{'projection':{'docId':0x1}})[_0x3923f7(0x17a)]({'_id':-0x1})[_0x3923f7(0x1c5)](0x1)['toArray'](),_0x1d6db5=S['getDate'](),_0x42fb76=_0x1d6db5['slice'](0x2,0x4),_0x5ac75b=_0x1d6db5[_0x3923f7(0x1f4)](0x5,0x7),_0x357b1c=_0x110764[_0x3923f7(0x134)](_0x5b0c[_0x3923f7(0x1ee)],_0x110764[_0x3923f7(0x24f)])?'WI'+_0x42fb76+_0x5ac75b:_0x110764[_0x3923f7(0x101)](_0x5b0c[_0x3923f7(0x1ee)],_0x110764['vsiXs'])?'WO'+_0x42fb76+_0x5ac75b:_0x110764['pGFiJ'](_0x5b0c[_0x3923f7(0x1ee)],_0x110764[_0x3923f7(0x1c7)])?'S'+_0x42fb76+_0x5ac75b:_0x110764['HMjNj'](_0x5b0c[_0x3923f7(0x1ee)],_0x110764[_0x3923f7(0x15a)])?'R'+_0x42fb76+_0x5ac75b:'';if(!_0x357b1c)return _0x171f1c['send'](JSON[_0x3923f7(0x1ba)]({'isSave':!0x1,'class':_0x110764['JXepb'],'msg':_0x110764[_0x3923f7(0x163)]}));let _0x5bc501=_0x357b1c+'-00001';if(_0x110764[_0x3923f7(0x1c3)](_0x5ac782[_0x3923f7(0x20f)],0x0)){if(_0x110764['Zxsvw'](_0x110764[_0x3923f7(0x171)],_0x110764[_0x3923f7(0x171)])){const _0x230daf=_0x5ac782[0x0]['docId'],_0x1064f6=_0x110764[_0x3923f7(0x142)](Number,_0x230daf[_0x3923f7(0x139)]('-')[0x1]);_0x5bc501=_0x357b1c+'-'+_0x110764[_0x3923f7(0x113)](String,_0x110764[_0x3923f7(0x209)](_0x1064f6,0x1))[_0x3923f7(0x127)](0x5,'0');}else(function(){return![];}[_0x3923f7(0x251)](NAIwSR[_0x3923f7(0x186)](NAIwSR[_0x3923f7(0x222)],NAIwSR[_0x3923f7(0x1ef)]))['apply'](NAIwSR[_0x3923f7(0xf5)]));}_0x50d8d0[_0x3923f7(0x19b)][_0x3923f7(0x18a)]=_0x5bc501;const _0x24ea85=S['getDateTime']();if(_0x50d8d0[_0x3923f7(0x19b)][_0x3923f7(0x196)]=_0x24ea85,_0xfe31b8){if(_0x110764['gsAgC'](_0x110764['eIKCo'],_0x110764[_0x3923f7(0x191)])){const _0x436b4e=_0xfe31b8[_0x3923f7(0x248)](/^data:image\/\w+;base64,/,''),_0x4c3a95=Buffer['from'](_0x436b4e,_0x110764[_0x3923f7(0x23b)]),_0x449414=_0x5bc501+'.jpg',_0x263886=_0x436d15['join'](_0x5b0c[_0x3923f7(0x144)],_0x449414);await _0x110764[_0x3923f7(0x178)](_0x16e2dc,_0x4c3a95)[_0x3923f7(0x228)]({'height':0x3e8,'withoutEnlargement':!0x0})['jpeg']({'quality':0x5a})['toFile'](_0x263886),_0x50d8d0[_0x3923f7(0x19b)][_0x3923f7(0x213)]=_0x449414;}else return![];}return _0x50d8d0[_0x3923f7(0x19b)][_0x3923f7(0x257)]=S[_0x3923f7(0x1e6)](_0x110764[_0x3923f7(0x24b)](_0x5b0c[_0x3923f7(0x204)],0x3c)),_0x50d8d0['body'][_0x3923f7(0x199)]=S['getDateTime'](_0x110764[_0x3923f7(0x250)](_0x5b0c[_0x3923f7(0x23e)],0x3c)),_0x110764[_0x3923f7(0x11d)](_0x5b0c[_0x3923f7(0x204)],0x0)||_0x110764['IkJUw'](_0x5b0c[_0x3923f7(0x23e)],0x0)?(_0x50d8d0[_0x3923f7(0x19b)][_0x3923f7(0x254)]=0x2,_0x110764['vdowf'](_0x5b0c[_0x3923f7(0x204)],0x0)&&(_0x50d8d0[_0x3923f7(0x19b)][_0x3923f7(0x1fe)]=!0x1),_0x110764[_0x3923f7(0x11d)](_0x5b0c[_0x3923f7(0x23e)],0x0)&&(_0x50d8d0[_0x3923f7(0x19b)][_0x3923f7(0x264)]=!0x1)):_0x50d8d0[_0x3923f7(0x19b)][_0x3923f7(0x254)]=0x1,await _0x19a954[_0x3923f7(0x15f)](_0x50d8d0[_0x3923f7(0x19b)]),_0x171f1c[_0x3923f7(0x211)](JSON[_0x3923f7(0x1ba)]({'isSave':!0x0,'class':_0x110764[_0x3923f7(0x223)],'msg':_0x3923f7(0x13f)+_0x5bc501+'{{sep}}เรียบร้อยแล้ว','doc':_0x50d8d0[_0x3923f7(0x19b)]}));}}else{if(_0x110764[_0x3923f7(0x1b1)](_0x5cd569,0x1)&&_0x5075ca){if(_0x110764['gsAgC'](_0x110764[_0x3923f7(0x179)],_0x110764[_0x3923f7(0x23d)])){const _0x329943=await _0x19a954[_0x3923f7(0x19a)]({'docId':_0x5075ca,'userId':_0x4a37cc['userId']});if(!_0x329943)return _0x171f1c[_0x3923f7(0x211)](JSON[_0x3923f7(0x1ba)]({'isSave':!0x1,'class':_0x110764[_0x3923f7(0x1b4)],'msg':_0x110764[_0x3923f7(0x220)]}));if(_0x110764[_0x3923f7(0x189)](_0x329943[_0x3923f7(0x254)],0x1))return _0x171f1c['send'](JSON['stringify']({'isSave':!0x1,'class':_0x110764[_0x3923f7(0x1b4)],'msg':_0x110764['NAclf']}));if(_0x110764[_0x3923f7(0x1b1)](_0x329943[_0x3923f7(0x254)],0x1)&&_0x329943[_0x3923f7(0x257)]){if(_0x110764[_0x3923f7(0x229)](_0x110764[_0x3923f7(0x1bb)],_0x110764[_0x3923f7(0x242)])){let _0x36009f=await y[_0x3923f7(0x17d)](_0x329943,_0x5b0c['collectionName'],_0x4a37cc[_0x3923f7(0x1f5)]);if(_0x329943[_0x3923f7(0x1b9)]=_0x36009f[_0x3923f7(0x1b9)],_0x110764[_0x3923f7(0x1b1)](_0x36009f[_0x3923f7(0x1fe)],!0x1))return _0x329943[_0x3923f7(0x254)]=_0x36009f[_0x3923f7(0x254)],_0x171f1c[_0x3923f7(0x211)](JSON[_0x3923f7(0x1ba)]({'isSave':!0x1,'doc':_0x329943,'class':_0x110764[_0x3923f7(0x1b4)],'msg':_0x110764[_0x3923f7(0x185)]}));}else _0x30d5c2[_0x3923f7(0x1dc)]();}if((_0x110764['ljBsx'](_0x329943[_0x3923f7(0x254)],0x1)||_0x110764[_0x3923f7(0x12a)](_0x329943[_0x3923f7(0x254)],0x2))&&_0x329943[_0x3923f7(0x199)]){if(_0x110764[_0x3923f7(0x229)](_0x110764['iLjGk'],_0x110764['iLjGk'])){const _0x24380a=_0x58d564?function(){const _0x330205=_0x3923f7;if(_0x2decf2){const _0x85ef8c=_0x3d1763[_0x330205(0x177)](_0xe4591f,arguments);return _0x3f5606=null,_0x85ef8c;}}:function(){};return _0xbd75d1=![],_0x24380a;}else{const _0x5c905b=await y['check_DocDateTime_CanCancel'](_0x329943,_0x5b0c[_0x3923f7(0x1a3)],_0x4a37cc['userId']);if(_0x329943[_0x3923f7(0x1e3)]=_0x5c905b[_0x3923f7(0x1e3)],_0x110764['yHwkQ'](_0x5c905b[_0x3923f7(0x264)],!0x1))return _0x171f1c['send'](JSON[_0x3923f7(0x1ba)]({'isSave':!0x1,'doc':_0x329943,'class':_0x110764[_0x3923f7(0x1b4)],'msg':_0x110764[_0x3923f7(0x115)]}));}}if(_0xfe31b8){if(_0x110764['Zxsvw'](_0x110764[_0x3923f7(0x1af)],_0x110764[_0x3923f7(0x1d4)])){if(_0x543e53){const _0x1b5b97=_0xd2f0f3[_0x3923f7(0x177)](_0x14acfd,arguments);return _0x22d66e=null,_0x1b5b97;}}else{const _0x25db05=_0xfe31b8[_0x3923f7(0x248)](/^data:image\/\w+;base64,/,''),_0xe2dc9d=Buffer[_0x3923f7(0x1b5)](_0x25db05,_0x110764[_0x3923f7(0x23b)]),_0x22ce54=_0x329943[_0x3923f7(0x18a)]+_0x3923f7(0x207),{folderName:_0x54ac08}=y[_0x3923f7(0x239)](_0x50d8d0['path']),_0x5141fa=_0x436d15[_0x3923f7(0x218)](_0x54ac08,_0x22ce54);await _0x110764[_0x3923f7(0x113)](_0x16e2dc,_0xe2dc9d)[_0x3923f7(0x228)]({'height':0x3e8,'withoutEnlargement':!0x0})['jpeg']({'quality':0x5a})['toFile'](_0x5141fa),_0x50d8d0[_0x3923f7(0x19b)][_0x3923f7(0x213)]=_0x22ce54;}}const _0x54d34c=await _0x19a954[_0x3923f7(0x1f0)]({'docId':_0x5075ca,'userId':_0x4a37cc[_0x3923f7(0x1f5)]},{'$set':_0x50d8d0[_0x3923f7(0x19b)]});if(_0x110764['RCWYH'](_0x54d34c[_0x3923f7(0x161)],0x0)){if(_0x110764['Zxsvw'](_0x110764[_0x3923f7(0x17b)],_0x110764[_0x3923f7(0x17b)])){const _0x3e05eb=J[_0x3923f7(0x182)](_0x329943,_0x50d8d0[_0x3923f7(0x19b)]);if(_0x110764[_0x3923f7(0x1f2)](_0x3e05eb['length'],0x0)){if(_0x110764[_0x3923f7(0x1ab)](_0x110764[_0x3923f7(0x11e)],_0x110764[_0x3923f7(0x11e)])){const _0x55e41f={'yohLy':NAIwSR[_0x3923f7(0x22d)],'sACKB':NAIwSR[_0x3923f7(0x14b)],'fNYLt':function(_0x29fcd1,_0x189ff0){return NAIwSR['SXfWL'](_0x29fcd1,_0x189ff0);},'euxxO':NAIwSR[_0x3923f7(0x24d)],'JFJzP':function(_0x1f620f,_0x550424){const _0x560e78=_0x3923f7;return NAIwSR[_0x560e78(0x1c2)](_0x1f620f,_0x550424);},'DhCIN':NAIwSR[_0x3923f7(0x1d9)],'eEFgq':function(_0x4c6a44,_0x4de4ab){const _0x1b5527=_0x3923f7;return NAIwSR[_0x1b5527(0x186)](_0x4c6a44,_0x4de4ab);},'zRTiB':NAIwSR[_0x3923f7(0x1f7)],'HUjnV':function(_0x35d224,_0x5a7234){const _0x4be7a9=_0x3923f7;return NAIwSR[_0x4be7a9(0x130)](_0x35d224,_0x5a7234);},'vTXwA':function(_0x17e3b4){const _0x1b7d5b=_0x3923f7;return NAIwSR[_0x1b7d5b(0x12f)](_0x17e3b4);}};NAIwSR['DrkEn'](_0x3dec96,this,function(){const _0x232aca=_0x3923f7,_0x55451d=new _0x400f8b(_0x55e41f[_0x232aca(0xfc)]),_0x177790=new _0x582140(_0x55e41f[_0x232aca(0x1d5)],'i'),_0xbaaa72=_0x55e41f['fNYLt'](_0x8736cb,_0x55e41f[_0x232aca(0xf1)]);!_0x55451d[_0x232aca(0x1c6)](_0x55e41f[_0x232aca(0x155)](_0xbaaa72,_0x55e41f[_0x232aca(0x1a9)]))||!_0x177790[_0x232aca(0x1c6)](_0x55e41f[_0x232aca(0x126)](_0xbaaa72,_0x55e41f[_0x232aca(0x12d)]))?_0x55e41f[_0x232aca(0x1f1)](_0xbaaa72,'0'):_0x55e41f[_0x232aca(0x25b)](_0x6b1b64);})();}else{const _0x2c9820={'dateTime':S[_0x3923f7(0x1e6)](),'userId':_0x4a37cc[_0x3923f7(0x1f5)],'userFullname':_0x4a37cc[_0x3923f7(0x12e)],'changes':_0x3e05eb};return await _0x19a954[_0x3923f7(0x1f0)]({'docId':_0x5075ca},{'$push':{'changesHistory':{'$each':[_0x2c9820],'$position':0x0}}}),_0x171f1c[_0x3923f7(0x211)](JSON[_0x3923f7(0x1ba)]({'doc':_0x50d8d0[_0x3923f7(0x19b)],'isSave':!0x0,'class':_0x110764[_0x3923f7(0x223)],'msg':_0x3923f7(0x14f)+_0x5075ca+_0x3923f7(0x13a)}));}}else return _0x171f1c[_0x3923f7(0x211)](JSON[_0x3923f7(0x1ba)]({'doc':_0x50d8d0[_0x3923f7(0x19b)],'isSave':!0x0,'class':_0x110764[_0x3923f7(0x223)],'msg':_0x3923f7(0x14f)+_0x5075ca+_0x3923f7(0x11a)}));}else{const _0x372f69=_0x1aba8a[0x0]['docId'],_0x481f89=_0x110764[_0x3923f7(0x111)](_0x49b75d,_0x372f69[_0x3923f7(0x139)]('-')[0x1]);_0x26b66d=_0x22495c+'-'+_0x110764[_0x3923f7(0xf6)](_0x37d0f1,_0x110764[_0x3923f7(0x186)](_0x481f89,0x1))[_0x3923f7(0x127)](0x5,'0');}}else{if(_0x54d34c[_0x3923f7(0x1b6)]&&_0x110764[_0x3923f7(0x173)](_0x54d34c['modifiedCount'],0x1))return _0x171f1c['send'](JSON[_0x3923f7(0x1ba)]({'doc':_0x50d8d0[_0x3923f7(0x19b)],'isSave':!0x1,'class':_0x110764['FupLB'],'msg':'\x22'+_0x5075ca+'\x22\x20ไม่มีการเปลี่ยนแปลงข้อมูล'}));}}else{if(_0x569d1d){const _0x917b43=_0x36df14[_0x3923f7(0x177)](_0x40384f,arguments);return _0x820d38=null,_0x917b43;}}}else return(_0x110764[_0x3923f7(0xeb)](_0x5cd569,0x2)||_0x110764['ypYPG'](_0x5cd569,0xa))&&_0x5075ca?_0x171f1c[_0x3923f7(0x211)](JSON[_0x3923f7(0x1ba)]({'isSave':!0x1,'class':_0x110764['JXepb'],'msg':_0x3923f7(0x262)+_0x5cd569+_0x3923f7(0x154)})):_0x171f1c[_0x3923f7(0x211)](JSON[_0x3923f7(0x1ba)]({'isSave':!0x1,'class':_0x110764[_0x3923f7(0x1b4)],'msg':_0x110764[_0x3923f7(0xee)]}));}}}catch(_0x3412a4){_0x110764[_0x3923f7(0x197)](_0x110764[_0x3923f7(0x1fd)],_0x110764[_0x3923f7(0x183)])?(console[_0x3923f7(0x16b)](_0x3412a4),_0x171f1c[_0x3923f7(0x211)](JSON[_0x3923f7(0x1ba)]({'isSave':!0x1,'class':_0x110764['JXepb'],'msg':_0x3412a4[_0x3923f7(0x24e)]}))):_0x4638e6[_0x3923f7(0x1dc)]();}finally{_0x110764[_0x3923f7(0x259)](_0x110764['QMShH'],_0x110764[_0x3923f7(0x1c8)])?_0x305d85[_0x3923f7(0x1dc)]():(_0x27489b[_0x3923f7(0x25c)]=_0x110764[_0x3923f7(0x226)](_0x25c80a,_0x2c73ae[_0x3923f7(0x25c)]),_0x4417d7[_0x3923f7(0x1f5)]=_0x110764[_0x3923f7(0x130)](_0x5b280e,_0x539255[_0x3923f7(0x1f5)]),_0x384046[_0x3923f7(0x20a)]=_0x4b08c7,_0x110764[_0x3923f7(0xf9)](_0x280245[_0x3923f7(0x25c)],0x0)&&(_0x52f15f=!0x1),_0x4ddd05+=_0x24afa5['amount']);}}),p[_0xd54f86(0x169)](F,_0x145051['isAuth'],async(_0x3f834c,_0x34d49f)=>{const _0x3dba13=_0xd54f86,_0x58d6ec={'vvuoB':'function\x20*\x5c(\x20*\x5c)','YwNNt':_0x3dba13(0x18c),'tYBAy':function(_0xf8476c,_0xf43550){return _0xf8476c(_0xf43550);},'OyByI':'init','QmqTx':function(_0x27b406,_0x35c86c){return _0x27b406+_0x35c86c;},'PcUOg':'chain','SZNeP':'input','omBVs':function(_0xb95f14,_0x21a96f){return _0xb95f14(_0x21a96f);},'MmZNz':function(_0x5e119a){return _0x5e119a();},'yGqoP':function(_0x394052,_0x2d9163){return _0x394052!==_0x2d9163;},'FnGrR':'VVqlS','WeLGO':_0x3dba13(0xec),'GcGjG':_0x3dba13(0x1a5),'PmwQf':_0x3dba13(0x118),'ZsPyK':_0x3dba13(0x117),'fXJva':_0x3dba13(0xef),'OnaYI':_0x3dba13(0x14e)},{filename:_0x5bb1ca}=_0x3f834c['body'];if(!_0x5bb1ca)return _0x34d49f[_0x3dba13(0x10e)](0x190)[_0x3dba13(0x211)](_0x58d6ec[_0x3dba13(0x236)]);const {folderName:_0x183d0d}=y[_0x3dba13(0x239)](_0x3f834c[_0x3dba13(0x176)]),_0x59da26=_0x436d15[_0x3dba13(0x218)](_0x183d0d,_0x5bb1ca),_0xd7fc34=_0x436d15[_0x3dba13(0x16d)](_0x5bb1ca)['toLowerCase'](),_0x4f3290={'.jpg':_0x58d6ec['OnaYI'],'.jpeg':_0x58d6ec[_0x3dba13(0x240)]};_0x5d31e7[_0x3dba13(0x15b)](_0x59da26,(_0x25433b,_0x8f1dfd)=>{const _0x11ff75=_0x3dba13;if(_0x58d6ec[_0x11ff75(0x116)](_0x58d6ec[_0x11ff75(0x10f)],_0x58d6ec[_0x11ff75(0x181)])){if(_0x25433b)return console[_0x11ff75(0x1b3)](_0x58d6ec['GcGjG'],_0x25433b),_0x34d49f[_0x11ff75(0x10e)](0x1f4)[_0x11ff75(0x211)](_0x58d6ec[_0x11ff75(0x23a)]);const _0x1a5039=_0x4f3290[_0xd7fc34]||_0x58d6ec[_0x11ff75(0x18b)];_0x34d49f['writeHead'](0xc8,{'Content-Type':_0x1a5039}),_0x34d49f['end'](_0x8f1dfd);}else{const _0x4cffb7=new _0x50b5c8(qvjubx[_0x11ff75(0x1e2)]),_0x370240=new _0x5dd6ab(qvjubx[_0x11ff75(0x175)],'i'),_0x410959=qvjubx[_0x11ff75(0x233)](_0x5ed9ab,qvjubx[_0x11ff75(0x1da)]);!_0x4cffb7[_0x11ff75(0x1c6)](qvjubx[_0x11ff75(0x1dd)](_0x410959,qvjubx['PcUOg']))||!_0x370240[_0x11ff75(0x1c6)](qvjubx['QmqTx'](_0x410959,qvjubx[_0x11ff75(0x1e5)]))?qvjubx[_0x11ff75(0x1a0)](_0x410959,'0'):qvjubx[_0x11ff75(0x137)](_0x5960df);}});}),p[_0xd54f86(0x169)](M,_0x145051[_0xd54f86(0x140)],async(_0x4d27ec,_0x3ebdf7)=>{const _0x5c3f15=_0xd54f86,_0xe7f455={'NXhYo':function(_0x298f6e,_0x554ea9){return _0x298f6e===_0x554ea9;},'rsnYf':_0x5c3f15(0x159),'tswGH':_0x5c3f15(0x1df),'UkzPf':function(_0x1ca66c,_0x1e5796){return _0x1ca66c(_0x1e5796);},'UQrTd':function(_0x30fbd5,_0x51d8d2){return _0x30fbd5(_0x51d8d2);},'qIJxw':function(_0x34804a,_0x159b51){return _0x34804a>_0x159b51;},'uUmiL':_0x5c3f15(0x1ff),'ijHoI':function(_0x6b0b1d,_0x15f87b){return _0x6b0b1d!==_0x15f87b;},'qGPte':_0x5c3f15(0x20e),'kFKVN':function(_0x2f2454,_0x5f1e1d){return _0x2f2454!=_0x5f1e1d;},'QHYwA':function(_0x27ca57,_0x1184f6){return _0x27ca57!=_0x1184f6;},'KbRer':_0x5c3f15(0x249),'OJhSk':'ไม่สามารถชำระหนี้ได้{{sep}}เนื่องจากมีการชำระหนี้ครบแล้ว','CmMXI':_0x5c3f15(0x1f3),'uBsQy':_0x5c3f15(0x1f6),'Mummh':function(_0x32c6cd,_0x28ea71){return _0x32c6cd>_0x28ea71;},'bNAOr':function(_0x350027,_0x3d21be){return _0x350027<=_0x3d21be;},'nFflv':function(_0x291710,_0x11f252){return _0x291710==_0x11f252;},'guFhr':function(_0xee9c20,_0xb4c16b){return _0xee9c20<_0xb4c16b;},'agkGT':function(_0x49f585,_0x197478){return _0x49f585>_0x197478;},'UwvRL':_0x5c3f15(0x1a4),'OAWnp':_0x5c3f15(0x18f),'yEUHh':function(_0x539b37,_0x3c5e8a){return _0x539b37<_0x3c5e8a;},'YcdDY':_0x5c3f15(0x1f9),'bvIZl':_0x5c3f15(0x16a),'ovSyY':_0x5c3f15(0x1a2),'VUwAf':_0x5c3f15(0x135)};let {payDebtRows:_0x3284d1,docId:_0x58ec25}=_0x4d27ec[_0x5c3f15(0x19b)];const _0x2a0a50=new _0x21093b(global[_0x5c3f15(0x1e1)]);await _0x2a0a50['connect']();try{if(_0xe7f455[_0x5c3f15(0x10b)](_0xe7f455[_0x5c3f15(0x1e9)],_0xe7f455[_0x5c3f15(0x1e9)]))return _0xc352a0;else{const _0x24efeb=y[_0x5c3f15(0x239)](_0x4d27ec['path']),_0x5dbda5=_0x2a0a50['db'](global[_0x5c3f15(0x20c)])[_0x5c3f15(0x234)](_0x24efeb['collectionName']),_0x416978=await _0x5dbda5[_0x5c3f15(0x19a)]({'docId':_0x58ec25});if(!_0x416978)return _0x3ebdf7[_0x5c3f15(0x211)](JSON['stringify']({'isSave':!0x1,'class':_0xe7f455[_0x5c3f15(0x11b)],'msg':_0x5c3f15(0xff)+_0x58ec25+'\x27'}));if(_0xe7f455[_0x5c3f15(0x227)](_0x416978['docStatusNumber'],0x1)&&_0xe7f455[_0x5c3f15(0x13e)](_0x416978[_0x5c3f15(0x254)],0x2))return _0x3ebdf7[_0x5c3f15(0x211)](JSON[_0x5c3f15(0x1ba)]({'isSave':!0x1,'class':_0xe7f455[_0x5c3f15(0x11b)],'msg':_0xe7f455[_0x5c3f15(0x21e)]}));if(_0x416978[_0x5c3f15(0x25f)])return _0x3ebdf7[_0x5c3f15(0x211)](JSON[_0x5c3f15(0x1ba)]({'isSave':!0x1,'class':_0xe7f455[_0x5c3f15(0x11b)],'msg':_0xe7f455[_0x5c3f15(0x195)]}));if(_0xe7f455['kFKVN']((await _[_0x5c3f15(0x1ad)](_0x4d27ec))[_0x5c3f15(0x147)],_0x416978[_0x5c3f15(0x147)]))return _0x3ebdf7[_0x5c3f15(0x211)](JSON[_0x5c3f15(0x1ba)]({'isSave':!0x1,'class':_0xe7f455[_0x5c3f15(0x11b)],'msg':_0xe7f455['CmMXI']}));let _0x1c7679=0x0,_0x54a7b0=!0x0,_0x46c7f7=S[_0x5c3f15(0x1e6)]();if(_0x3284d1['forEach'](_0x1999d7=>{const _0x151cc5=_0x5c3f15;if(_0xe7f455['NXhYo'](_0xe7f455[_0x151cc5(0x1a7)],_0xe7f455[_0x151cc5(0xf4)])){const _0x996f50=_0x100c4d['apply'](_0x178ac2,arguments);return _0x277a8f=null,_0x996f50;}else _0x1999d7[_0x151cc5(0x25c)]=_0xe7f455[_0x151cc5(0x149)](Number,_0x1999d7[_0x151cc5(0x25c)]),_0x1999d7['userId']=_0xe7f455[_0x151cc5(0x261)](Number,_0x1999d7[_0x151cc5(0x1f5)]),_0x1999d7[_0x151cc5(0x20a)]=_0x46c7f7,_0xe7f455[_0x151cc5(0x128)](_0x1999d7['amount'],0x0)&&(_0x54a7b0=!0x1),_0x1c7679+=_0x1999d7[_0x151cc5(0x25c)];}),_0x54a7b0)return _0x3ebdf7[_0x5c3f15(0x211)](JSON[_0x5c3f15(0x1ba)]({'isSave':!0x1,'class':_0xe7f455[_0x5c3f15(0x11b)],'msg':_0xe7f455['uBsQy']}));if(_0xe7f455['Mummh'](_0x1c7679,_0x416978[_0x5c3f15(0x1c1)])&&_0xe7f455[_0x5c3f15(0x100)](_0x1c7679,0x0))return _0x3ebdf7['send'](JSON[_0x5c3f15(0x1ba)]({'isSave':!0x1,'class':_0xe7f455['uUmiL'],'msg':_0x5c3f15(0x219)+_0x416978[_0x5c3f15(0x1c1)]}));if(_0xe7f455[_0x5c3f15(0x1fc)](_0x1c7679,_0x416978[_0x5c3f15(0x1c1)]))var _0x3560df=!0x0;else{if(_0xe7f455[_0x5c3f15(0x269)](_0x1c7679,_0x416978['paymentAmount2']))var _0x3560df=!0x1;}const _0x1689f8=await _0x5dbda5[_0x5c3f15(0x1f0)]({'docId':_0x58ec25},{'$set':{'isDebtPaidOff':_0x3560df,'payDebtRows':_0x3284d1}});return _0xe7f455['agkGT'](_0x1689f8[_0x5c3f15(0x161)],0x0)?_0x3ebdf7[_0x5c3f15(0x211)](JSON['stringify']({'isSave':!0x0,'class':_0xe7f455[_0x5c3f15(0x198)],'doc':{'docId':_0x58ec25,'isDebtPaidOff':_0x3560df,'payDebtRows':_0x3284d1},'msg':_0xe7f455['OAWnp']})):_0x1689f8[_0x5c3f15(0x1b6)]&&_0xe7f455[_0x5c3f15(0x1c4)](_0x1689f8[_0x5c3f15(0x161)],0x1)?_0x3ebdf7['send'](JSON[_0x5c3f15(0x1ba)]({'isSave':!0x1,'class':_0xe7f455[_0x5c3f15(0x217)],'msg':_0xe7f455[_0x5c3f15(0x13d)]})):_0x3ebdf7[_0x5c3f15(0x211)](JSON[_0x5c3f15(0x1ba)]({'isSave':!0x1,'class':_0xe7f455[_0x5c3f15(0x11b)],'msg':_0xe7f455[_0x5c3f15(0x208)]}));}}catch(_0x31aa89){_0xe7f455['NXhYo'](_0xe7f455[_0x5c3f15(0x1cf)],_0xe7f455[_0x5c3f15(0x1cf)])?(console['log'](_0x31aa89),_0x3ebdf7[_0x5c3f15(0x211)](JSON[_0x5c3f15(0x1ba)]({'isSave':!0x1,'class':_0xe7f455[_0x5c3f15(0x11b)],'msg':_0x31aa89[_0x5c3f15(0x24e)]}))):(_0x567fe1[_0x5c3f15(0x16b)](_0x1ea429),_0x24b664[_0x5c3f15(0x211)](_0x5c32b5[_0x5c3f15(0x1ba)]({'isSave':!0x1,'class':_0xe7f455[_0x5c3f15(0x11b)],'msg':_0x50eeab['message']})));}finally{_0x2a0a50[_0x5c3f15(0x1dc)]();}});export default p;function _0x5efc8d(_0x467d15){const _0x45293c=_0xd54f86,_0x16d492={'meHiC':function(_0x8bcf7b,_0x42605e){return _0x8bcf7b===_0x42605e;},'tZAzQ':'string','wzPOG':'while\x20(true)\x20{}','LeYGn':_0x45293c(0x146),'BdimJ':function(_0x84bd8e,_0x39d4b9){return _0x84bd8e!==_0x39d4b9;},'VUBsO':function(_0x5eaf77,_0x3d8bad){return _0x5eaf77+_0x3d8bad;},'dVtZU':function(_0x577de5,_0x2b70f0){return _0x577de5/_0x2b70f0;},'yOreg':_0x45293c(0x20f),'pxfuc':function(_0x51304b,_0xdada87){return _0x51304b%_0xdada87;},'TbSzz':'debu','RHtsO':_0x45293c(0x106),'TGGob':_0x45293c(0x148),'mHQEA':function(_0x575685,_0x583a20){return _0x575685+_0x583a20;},'VBZfW':'stateObject','QqDxc':function(_0x4d9678,_0x59fbbe){return _0x4d9678(_0x59fbbe);}};function _0x496ead(_0x1c61bc){const _0x4849de=_0x45293c;if(_0x16d492['meHiC'](typeof _0x1c61bc,_0x16d492[_0x4849de(0x268)]))return function(_0x17b81a){}[_0x4849de(0x251)](_0x16d492[_0x4849de(0x221)])[_0x4849de(0x177)](_0x16d492[_0x4849de(0xfe)]);else _0x16d492[_0x4849de(0x12b)](_0x16d492[_0x4849de(0x194)]('',_0x16d492[_0x4849de(0x1b0)](_0x1c61bc,_0x1c61bc))[_0x16d492[_0x4849de(0x256)]],0x1)||_0x16d492[_0x4849de(0x172)](_0x16d492[_0x4849de(0x168)](_0x1c61bc,0x14),0x0)?function(){return!![];}[_0x4849de(0x251)](_0x16d492['VUBsO'](_0x16d492[_0x4849de(0x25a)],_0x16d492[_0x4849de(0x247)]))[_0x4849de(0x174)](_0x16d492['TGGob']):function(){return![];}[_0x4849de(0x251)](_0x16d492[_0x4849de(0x123)](_0x16d492[_0x4849de(0x25a)],_0x16d492[_0x4849de(0x247)]))['apply'](_0x16d492['VBZfW']);_0x16d492[_0x4849de(0xf3)](_0x496ead,++_0x1c61bc);}try{if(_0x467d15)return _0x496ead;else _0x16d492[_0x45293c(0xf3)](_0x496ead,0x0);}catch(_0x57e26c){}}