const _0x474d91=_0x432d;(function(_0x378b27,_0x36a22b){const _0xd7668c=_0x432d,_0x150503=_0x378b27();while(!![]){try{const _0x59c704=-parseInt(_0xd7668c(0x19c))/0x1*(-parseInt(_0xd7668c(0x1c5))/0x2)+-parseInt(_0xd7668c(0x187))/0x3*(-parseInt(_0xd7668c(0x175))/0x4)+-parseInt(_0xd7668c(0x222))/0x5+parseInt(_0xd7668c(0x2a6))/0x6*(parseInt(_0xd7668c(0x19d))/0x7)+parseInt(_0xd7668c(0x13c))/0x8*(-parseInt(_0xd7668c(0x20b))/0x9)+parseInt(_0xd7668c(0x195))/0xa+-parseInt(_0xd7668c(0x283))/0xb;if(_0x59c704===_0x36a22b)break;else _0x150503['push'](_0x150503['shift']());}catch(_0x295ee3){_0x150503['push'](_0x150503['shift']());}}}(_0x2871,0x6891c));const _0x178fa7=(function(){const _0x11fe86=_0x432d,_0x25ffe6={'EuOuz':_0x11fe86(0x282),'Ryjgo':function(_0x14cd45,_0x487c2d){return _0x14cd45!==_0x487c2d;},'NAWuk':'uzTRV','NhhBT':function(_0x5499a2,_0x389bbc){return _0x5499a2===_0x389bbc;},'KxPxn':_0x11fe86(0x1f8),'vBCcJ':'ilLSA','pISCd':'oYJfZ','xvOHc':'uRCSi'};let _0x199141=!![];return function(_0x1f3dec,_0x418a2e){const _0x20d0dd=_0x11fe86;if(_0x25ffe6[_0x20d0dd(0x2ae)](_0x25ffe6[_0x20d0dd(0x1f2)],_0x25ffe6['xvOHc'])){const _0x565d09=_0x199141?function(){const _0x2ff772=_0x20d0dd,_0x1fda2d={'fJEub':_0x25ffe6[_0x2ff772(0x293)]};if(_0x25ffe6['Ryjgo'](_0x25ffe6['NAWuk'],_0x25ffe6[_0x2ff772(0x28a)]))_0x443a92[_0x2ff772(0x1bb)](_0x301479),_0x59affc[_0x2ff772(0x1d5)](_0x12649e[_0x2ff772(0x245)]({'isSave':!0x1,'class':_0x1fda2d[_0x2ff772(0x22c)],'msg':_0x1e0c09[_0x2ff772(0x25c)]}));else{if(_0x418a2e){if(_0x25ffe6[_0x2ff772(0x277)](_0x25ffe6[_0x2ff772(0x28f)],_0x25ffe6['vBCcJ'])){if(_0x59eb77){const _0x1207e2=_0x3416fb['apply'](_0x3a643a,arguments);return _0x3842ce=null,_0x1207e2;}}else{const _0x1e51ac=_0x418a2e[_0x2ff772(0x188)](_0x1f3dec,arguments);return _0x418a2e=null,_0x1e51ac;}}}}:function(){};return _0x199141=![],_0x565d09;}else return!![];};}());(function(){const _0x4d7c39=_0x432d,_0x5298ae={'jfPBB':'function\x20*\x5c(\x20*\x5c)','bakuo':_0x4d7c39(0x24d),'hGxEg':function(_0x5c9511,_0x3613ac){return _0x5c9511(_0x3613ac);},'jrVhN':_0x4d7c39(0x1c3),'nXGnj':function(_0x137dfb,_0x321b54){return _0x137dfb+_0x321b54;},'SCZkp':_0x4d7c39(0x1fc),'HuzQh':function(_0x2ccb89,_0xf30b36){return _0x2ccb89+_0xf30b36;},'ZIQAo':_0x4d7c39(0x16a),'jmMCi':function(_0x5af8c6){return _0x5af8c6();},'heSQp':function(_0x1de9e4,_0x4f235b){return _0x1de9e4===_0x4f235b;},'kNSxP':_0x4d7c39(0x213),'WSuCU':_0x4d7c39(0x2a5),'xPCXB':function(_0x25b5e6,_0xd13984){return _0x25b5e6(_0xd13984);},'NGWwP':function(_0x4d9f15,_0x1410ec){return _0x4d9f15+_0x1410ec;},'fHyYT':function(_0x31bf98,_0x4a164c){return _0x31bf98+_0x4a164c;},'LsNcD':function(_0x506bee,_0x3b9d7f){return _0x506bee!==_0x3b9d7f;},'KmdSX':'kpzuw','hfBri':_0x4d7c39(0x14f),'MASOU':function(_0x58c19b,_0x13a97a){return _0x58c19b(_0x13a97a);},'WWScf':_0x4d7c39(0x225),'oSRlM':function(_0x380564){return _0x380564();},'fwCZD':function(_0x41133a,_0x51e8f0,_0x3befa9){return _0x41133a(_0x51e8f0,_0x3befa9);}};_0x5298ae[_0x4d7c39(0x1d4)](_0x178fa7,this,function(){const _0x3dac2f=_0x4d7c39;if(_0x5298ae['heSQp'](_0x5298ae[_0x3dac2f(0x14e)],_0x5298ae[_0x3dac2f(0x1bd)])){const _0x5a7cab=_0x224c65[_0x3dac2f(0x23c)]['prototype'][_0x3dac2f(0x1d2)](_0xd91b57),_0x1be9aa=_0x5c891c[_0x374789],_0x1089a5=_0x3ed269[_0x1be9aa]||_0x5a7cab;_0x5a7cab['__proto__']=_0x2a8a9d['bind'](_0x57efb4),_0x5a7cab[_0x3dac2f(0x161)]=_0x1089a5[_0x3dac2f(0x161)][_0x3dac2f(0x1d2)](_0x1089a5),_0x1d24e1[_0x1be9aa]=_0x5a7cab;}else{const _0x2e33ba=new RegExp(_0x5298ae['jfPBB']),_0x316468=new RegExp(_0x5298ae[_0x3dac2f(0x17d)],'i'),_0x2048d7=_0x5298ae[_0x3dac2f(0x17e)](_0x7380ad,_0x5298ae[_0x3dac2f(0x16c)]);if(!_0x2e33ba[_0x3dac2f(0x196)](_0x5298ae[_0x3dac2f(0x1e2)](_0x2048d7,_0x5298ae[_0x3dac2f(0x285)]))||!_0x316468[_0x3dac2f(0x196)](_0x5298ae['fHyYT'](_0x2048d7,_0x5298ae[_0x3dac2f(0x15f)]))){if(_0x5298ae['LsNcD'](_0x5298ae[_0x3dac2f(0x2ad)],_0x5298ae[_0x3dac2f(0x142)]))_0x5298ae[_0x3dac2f(0x1cc)](_0x2048d7,'0');else{const _0x42205c=new _0x55e714(_0x5298ae['jfPBB']),_0x4169cd=new _0x43f08e(_0x5298ae['bakuo'],'i'),_0x9d04=_0x5298ae['hGxEg'](_0x2a31c3,_0x5298ae[_0x3dac2f(0x16c)]);!_0x42205c[_0x3dac2f(0x196)](_0x5298ae[_0x3dac2f(0x1ba)](_0x9d04,_0x5298ae['SCZkp']))||!_0x4169cd['test'](_0x5298ae[_0x3dac2f(0x204)](_0x9d04,_0x5298ae[_0x3dac2f(0x15f)]))?_0x5298ae[_0x3dac2f(0x1bc)](_0x9d04,'0'):_0x5298ae[_0x3dac2f(0x234)](_0x38cedc);}}else{if(_0x5298ae[_0x3dac2f(0x25e)](_0x5298ae[_0x3dac2f(0x19f)],_0x5298ae['WWScf']))_0x5298ae['oSRlM'](_0x7380ad);else{var _0xc697b9=_0x2f6b75[_0x3dac2f(0x14d)][_0x3dac2f(0x2a1)]?_0x46a7bb[_0x3dac2f(0x14d)][_0x3dac2f(0x2a1)]:null;delete _0x30bbc5[_0x3dac2f(0x14d)][_0x3dac2f(0x2a1)];}}}})();}());function _0x2871(){const _0x1a7d3a=['kgRCx','lYPyB','ADTWb','sIxqU','ukyca','nvdqb','PATH_WAREHOUSE_IN','isAuth','xwhBg','GWYuV','KxOeE','TDcGF','file404','nXGnj','log','hGxEg','WSuCU','warehouseIn','DwhGp','docStatusNumber','info','GrTCd','init','Vvjsl','96XxFckE','yTGqV','action','image/jpeg','dwABz','query','toArray','MASOU','insertOne','ltGgF','rFAyv','xPOLd','OJpju','bind','getDate','fwCZD','send','RITtx','application/octet-stream','SWkJI','dateTimeCanEdit','YmMxI','collectionName','fBkzh','QBHop','jpeg','FPyjm','SZMHI','ZCjpa','NGWwP','wEazp','NumJT','ไม่สามารถชำระหนี้ได้{{sep}}เนื่องจากมีการชำระหนี้ครบแล้ว','tByhO','HKVOO','PAY_TYPE1','userAuthority','sLoFo','rIOBi','\x20เรียบร้อยแล้ว','eLJny','path','feUMG','tHaho','ExHTa','pISCd','wPuLr','from','counter','jdwqB','BacaH','rRCDt','Router','BmuXv','Hqjqr','chain','HESJH','length','getChangeHistory','czorN','dRRiD','IltOR','/save','HuzQh','aJvIz','roXnw','PATH_RETURN','IhNVO','CHGHB','-00001','33705UXCuXz','ไม่พบไฟล์รูปภาพ','mdNkI','/myUsers.js','/myModule.js','wyqdt','XVhXb','UxpKf','GVRAI','fkFGI','iSxsB','CbuVV','dbUrl','string','modifiedCount','zjONN','dJByq','HrZqq','Rekkb','gUTlo','call','findOne','DOC_STATUS_TITLE','1786865BfLPWy','{{sep}}เรียบร้อยแล้ว','vAbqr','Segix','TyYJf','KUNNJ','hoursCanCancel','CuMjM','dateTimeCanCancel','msg','fJEub','CFLzW','BgDct','บันทึกเรียบร้อยแล้ว','ยอดเงินที่ชำระทั้งหมด\x20ต้องไม่เกิน\x20ยอดหนี้\x20','LNAKx','post','qkLRo','jmMCi','readFile','lOyyg','docType','.jpg','join','DnbLT','writeHead','constructor','padStart','qvGtL','ukvVb','trace','close','Pqxpq','collection','sendFile','stringify','viUGN','wqHNR','slice','FUHbQ','while\x20(true)\x20{}','umAip','OyIwy','\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','getSessionData','LzndJ','../','paymentAmount2','pSyIM','dateTimeCancelRemain','gCJYl','liFpS','console','sMbUu','debu','xHdsK','jMcuZ','JlIhQ','message','yFrfK','heSQp','toLowerCase','end','xyGVi','xcCuu','IKvPA','function\x20*\x5c(\x20*\x5c)','refImage','dtedJ','ไม่สามารถบันทึกเอกสารได้{{sep}}เนื่องจากเลยกำหนดยกเลิกเอกสารแล้ว','lIksm','userId','replace','table','HKQUy','extname','HHXcF','fMEFO','getSettings','ไม่พบเอกสารที่ต้องการอัปเดท\x20หรือ{{sep}}ไม่สามารถบันทึกเอกสารที่ตนเองไม่ได้สร้าง','ngZXH','EUBgV','ไม่สามารถชำระหนี้ได้{{sep}}เนื่องจากเอกสารนี้ไม่ใช่ของสาขาที่ท่านสังกัด','wLIIo','WSRDj','NhhBT','renderView','warn','ไม่พบเอกสาร\x20\x27','VXyrr','meePx','error','docDateTime','Error\x20reading\x20image:','getMainDocPathObj','zkMtz','red','748253hKvsEN','PtHqG','SCZkp','prototype','null','PAY_TYPE','BIMKh','NAWuk','wEhIo','อัปเดท\x20','lorMo','ไม่พบประเภทเอกสาร','KxPxn','PutkV','XdsNi','green','EuOuz','/view-image','yellow','toPRY','sVTxg','GccbF','mJoyY','lIQKa','HXNjm','return','xyTfJ','toFile','gger','THKhW','refImageBase64','\x20ได้','RJWkh','ไม่สามารถอัปเดทเอกสารได้{{sep}}เนื่องจากสถานะเอกสารไม่ใช่\x201\x20แล้ว','lWfUD','162kJdfnT','HEUYj','jFaJS','return\x20(function()\x20','connect','DhIkd','exception','KmdSX','Ryjgo','MYCkx','ohaUO','เกิดข้อผิดพลาดในการดึงรูปภาพ','BHJmr','ZhcJg','dateTime','สร้างเอกสารใหม่\x20','updateOne','NjblE','SXyYR','llcfh','{}.constructor(\x22return\x20this\x22)(\x20)','1776ufCZpM','WVzGo','acknowledged','ouppk','folderName','\x22\x20ไม่มีการเปลี่ยนแปลงข้อมูล','hfBri','cnkRL','CtMvw','jNZYX','UmydS','RtvVU','hoursCanEdit','wxtou','rqrlv','FWYXQ','ยอดเงินที่ชำระ\x20ไม่ได้เปลี่ยนแปลงจากเดิม','body','kNSxP','lstVL','gzZIM','includes','สถานะเอกสารผิดผลาด','EiYIz','docMain','bMUKo','PcduS','oPbei','aTBso','เลยกำหนดแก้ไข\x20สถานะถูก{{sep}}เปลี่ยนเป็น\x202\x20อัตโนมัติ','ImxWW','FVUnt','OMmhN','getDateTime','PATH_SALES','ZIQAo','ไม่สามารถบันทึกเอกสาร\x20สถานะ\x20','toString','จำนวนเงินที่ชำระ\x20ต้องมากกว่า\x200\x20ทุกแถว','saDkf','ZynyE','YlTpj','amount','IZePE','dpzGa','ไม่สามารถชำระหนี้ได้{{sep}}เนื่องจากสถานะเอกสารไม่ใช่\x201\x20หรือ\x202','input','status','jrVhN','zPPXW','wcqGr','uVPho','check_DocDateTime_CanCancel','__proto__','conys','QbHUu','heiDP','54568DjnsIK','resize','stateObject','nJxuy','branchId','dateTimeEditRemain','shUvI','RfXih','bakuo','xPCXB','PKPSF','lwjUn','ggCTd','warehouseOut','jMLbg','/myDocMain.js','dbName','ZMQHF','39gEBJNI','apply','kwWBC','get','canEdit','docId','jcRMO','/myData.js','SrREV','TXghH','BtgZL','HNmXC','get_Info_ByPath','FiwyG','7704550YeKcIb','test','YUPvg','WQwLB','PATH_WAREHOUSE_OUT','liIzX','convert_DataType','8773jBScZC','81977QUqJnr','jAKDf','WWScf','VQRmW','xTaKC','Welvm','KEbiD','wYmqf','reIiC','split','YnEjN','sFpen','RAfBx','JauEK','apngc','base64'];_0x2871=function(){return _0x1a7d3a;};return _0x2871();}const _0x236b62=(function(){const _0x4ef90d=_0x432d,_0x4dcc8a={'nvdqb':function(_0x151f46,_0xe2de10){return _0x151f46===_0xe2de10;},'YnEjN':_0x4ef90d(0x192),'nXBsx':function(_0x136b66,_0x2975c6){return _0x136b66!==_0x2975c6;},'IhNVO':_0x4ef90d(0x24f),'XAjIe':_0x4ef90d(0x1d1),'IKvPA':function(_0x387050,_0x34e1a5){return _0x387050(_0x34e1a5);},'qvGtL':function(_0x1f70d6,_0x165ff5){return _0x1f70d6(_0x165ff5);},'xyGVi':function(_0x13d3f8,_0xa93d5c){return _0x13d3f8>_0xa93d5c;},'lIQKa':function(_0x5d8842,_0x53255e){return _0x5d8842===_0x53255e;},'lTPOK':_0x4ef90d(0x17b),'aJvIz':_0x4ef90d(0x233)};let _0x3692ce=!![];return function(_0x465cc6,_0x18ec75){const _0x3e91e3=_0x4ef90d,_0x15eff5={'THKhW':function(_0x1d3c06,_0x5d8848){const _0x55dbea=_0x432d;return _0x4dcc8a[_0x55dbea(0x263)](_0x1d3c06,_0x5d8848);},'oGVwS':function(_0x48af58,_0x289477){const _0x576b8e=_0x432d;return _0x4dcc8a[_0x576b8e(0x23e)](_0x48af58,_0x289477);},'rFAyv':function(_0x544d11,_0x41649b){const _0x139999=_0x432d;return _0x4dcc8a[_0x139999(0x261)](_0x544d11,_0x41649b);}};if(_0x4dcc8a[_0x3e91e3(0x29a)](_0x4dcc8a['lTPOK'],_0x4dcc8a[_0x3e91e3(0x205)]))_0x4fef75[_0x3e91e3(0x166)]=_0x15eff5[_0x3e91e3(0x2a0)](_0x2d1d97,_0x2b55a2[_0x3e91e3(0x166)]),_0x23f824[_0x3e91e3(0x269)]=_0x15eff5['oGVwS'](_0x31e247,_0x21b552[_0x3e91e3(0x269)]),_0x51a7ee['dateTime']=_0xd780cb,_0x15eff5[_0x3e91e3(0x1cf)](_0x3db5ed[_0x3e91e3(0x166)],0x0)&&(_0x5d7130=!0x1),_0x5b3a1c+=_0x3e2688[_0x3e91e3(0x166)];else{const _0x2fd9f3=_0x3692ce?function(){const _0x2660f1=_0x3e91e3;if(_0x4dcc8a[_0x2660f1(0x1b2)](_0x4dcc8a[_0x2660f1(0x1a7)],_0x4dcc8a[_0x2660f1(0x1a7)])){if(_0x18ec75){if(_0x4dcc8a['nXBsx'](_0x4dcc8a[_0x2660f1(0x208)],_0x4dcc8a['XAjIe'])){const _0x3a1225=_0x18ec75[_0x2660f1(0x188)](_0x465cc6,arguments);return _0x18ec75=null,_0x3a1225;}else{const _0x3610ff=_0x57ede0[_0x2660f1(0x188)](_0x1a72b6,arguments);return _0x2b98e3=null,_0x3610ff;}}}else return _0x31d410;}:function(){};return _0x3692ce=![],_0x2fd9f3;}};}()),_0x846d83=_0x236b62(this,function(){const _0x355119=_0x432d,_0x13f17c={'lIksm':function(_0x37da5e){return _0x37da5e();},'wYmqf':function(_0x2223eb,_0x3bae17){return _0x2223eb(_0x3bae17);},'heiDP':function(_0xeeca90,_0x124008){return _0xeeca90+_0x124008;},'kwWBC':function(_0x7cdb1d,_0xec9b98){return _0x7cdb1d+_0xec9b98;},'QBHop':_0x355119(0x2a9),'PtHqG':'{}.constructor(\x22return\x20this\x22)(\x20)','TDcGF':function(_0x5d1945,_0x519ede){return _0x5d1945===_0x519ede;},'IZePE':'VTNyk','RfXih':function(_0x3261f4,_0x120b28){return _0x3261f4!==_0x120b28;},'PcduS':_0x355119(0x27c),'aTBso':_0x355119(0x2b8),'SWkJI':function(_0x286f1d,_0xe23ff9){return _0x286f1d(_0xe23ff9);},'NesbJ':function(_0x2bc238,_0x91d812){return _0x2bc238+_0x91d812;},'lwjUn':'dTszC','KkPkt':function(_0x13353f,_0xad51d5){return _0x13353f(_0xad51d5);},'OMmhN':_0x355119(0x1bb),'GWYuV':_0x355119(0x279),'dpzGa':_0x355119(0x1c1),'wEazp':_0x355119(0x27d),'EUBgV':_0x355119(0x2ac),'HKQUy':_0x355119(0x26b),'EiYIz':_0x355119(0x240),'Pqxpq':function(_0x4e147e,_0x1f5f5d){return _0x4e147e<_0x1f5f5d;},'nJxuy':_0x355119(0x257),'WVzGo':_0x355119(0x299)},_0x631e04=function(){const _0x8233ea=_0x355119,_0x271497={'iSxsB':function(_0xecfd5b,_0x45f549){const _0x42937f=_0x432d;return _0x13f17c[_0x42937f(0x1a4)](_0xecfd5b,_0x45f549);},'bMUKo':function(_0x55999c,_0x5df000){const _0x3741d3=_0x432d;return _0x13f17c[_0x3741d3(0x174)](_0x55999c,_0x5df000);},'CuMjM':function(_0xf6b0ff,_0x5aed9d){return _0x13f17c['kwWBC'](_0xf6b0ff,_0x5aed9d);},'jdwqB':_0x13f17c['QBHop'],'rIOBi':_0x13f17c[_0x8233ea(0x284)]};if(_0x13f17c[_0x8233ea(0x1b8)](_0x13f17c[_0x8233ea(0x167)],_0x13f17c[_0x8233ea(0x167)])){let _0x14313a;try{_0x13f17c[_0x8233ea(0x17c)](_0x13f17c[_0x8233ea(0x156)],_0x13f17c[_0x8233ea(0x158)])?_0x14313a=_0x13f17c[_0x8233ea(0x1d8)](Function,_0x13f17c[_0x8233ea(0x189)](_0x13f17c['NesbJ'](_0x13f17c[_0x8233ea(0x1dd)],_0x13f17c[_0x8233ea(0x284)]),');'))():_0x2e69d2=_0x2139ac;}catch(_0x216e68){_0x13f17c[_0x8233ea(0x17c)](_0x13f17c[_0x8233ea(0x180)],_0x13f17c['lwjUn'])?_0x13f17c[_0x8233ea(0x268)](_0x35b01e):_0x14313a=window;}return _0x14313a;}else{let _0x52c75f;try{_0x52c75f=_0x271497[_0x8233ea(0x215)](_0x285d78,_0x271497[_0x8233ea(0x155)](_0x271497[_0x8233ea(0x229)](_0x271497[_0x8233ea(0x1f6)],_0x271497[_0x8233ea(0x1eb)]),');'))();}catch(_0x46e2ef){_0x52c75f=_0x311f93;}return _0x52c75f;}},_0x388f84=_0x13f17c[_0x355119(0x268)](_0x631e04),_0x5f3254=_0x388f84['console']=_0x388f84[_0x355119(0x256)]||{},_0x2a9aa1=[_0x13f17c[_0x355119(0x15c)],_0x13f17c[_0x355119(0x1b6)],_0x13f17c[_0x355119(0x168)],_0x13f17c[_0x355119(0x1e3)],_0x13f17c[_0x355119(0x273)],_0x13f17c[_0x355119(0x26c)],_0x13f17c[_0x355119(0x153)]];for(let _0xd2f66=0x0;_0x13f17c[_0x355119(0x242)](_0xd2f66,_0x2a9aa1[_0x355119(0x1fe)]);_0xd2f66++){if(_0x13f17c[_0x355119(0x1b8)](_0x13f17c[_0x355119(0x178)],_0x13f17c[_0x355119(0x13d)]))_0x13f17c['KkPkt'](_0x14a9f1,'0');else{const _0x5228df=_0x236b62[_0x355119(0x23c)][_0x355119(0x286)][_0x355119(0x1d2)](_0x236b62),_0x13cbf8=_0x2a9aa1[_0xd2f66],_0x4cd4=_0x5f3254[_0x13cbf8]||_0x5228df;_0x5228df[_0x355119(0x171)]=_0x236b62[_0x355119(0x1d2)](_0x236b62),_0x5228df[_0x355119(0x161)]=_0x4cd4[_0x355119(0x161)][_0x355119(0x1d2)](_0x4cd4),_0x5f3254[_0x13cbf8]=_0x5228df;}}});_0x846d83();import _0x35518b from'path';import _0x544ec1 from'fs';function _0x432d(_0x3fde21,_0x3f8e75){const _0x517508=_0x2871();return _0x432d=function(_0x846d83,_0x236b62){_0x846d83=_0x846d83-0x13c;let _0x581c64=_0x517508[_0x846d83];return _0x581c64;},_0x432d(_0x3fde21,_0x3f8e75);}import _0x3535d5 from'sharp';import _0x2a1730 from'express';const p=_0x2a1730[_0x474d91(0x1f9)]();import{MongoClient as _0x461f3f}from'mongodb';import _0x4934d2 from'../middleware/mainAuth.js';const P=await import(_0x474d91(0x250)+mymoduleFolder+_0x474d91(0x20f)),S=await import('../'+mymoduleFolder+'/myDateTime.js'),_=await import(_0x474d91(0x250)+mymoduleFolder+_0x474d91(0x20e)),J=await import('../'+mymoduleFolder+_0x474d91(0x18e)),y=await import(_0x474d91(0x250)+mymoduleFolder+_0x474d91(0x184)),w=global[_0x474d91(0x1b3)],A=global[_0x474d91(0x199)],E=global[_0x474d91(0x15e)],D=global[_0x474d91(0x207)],U=[w,A,E,D],Y=[w+_0x474d91(0x203),A+'/save',E+_0x474d91(0x203),D+_0x474d91(0x203)],F=[w+_0x474d91(0x294),A+_0x474d91(0x294),D+'/view-image'],M=[E+'/pay-debt'];p[_0x474d91(0x18a)](U,_0x4934d2[_0x474d91(0x1b4)],async(_0x94f685,_0x48911f)=>{const _0x48bd3d=_0x474d91,_0x34f9c7={'GrTCd':_0x48bd3d(0x264),'GkOEy':'\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','wyqdt':function(_0x2ee994,_0xe80146){return _0x2ee994(_0xe80146);},'ltGgF':'init','sIxqU':function(_0x14246c,_0xb8cca8){return _0x14246c+_0xb8cca8;},'ZCjpa':_0x48bd3d(0x1fc),'RxsQQ':_0x48bd3d(0x16a),'IltOR':function(_0x550e7e){return _0x550e7e();},'PutkV':function(_0x4bca72,_0x14b0ff,_0x16b5bf){return _0x4bca72(_0x14b0ff,_0x16b5bf);},'uVPho':function(_0x51a9c6,_0xd01f5){return _0x51a9c6===_0xd01f5;},'RITtx':'ijciv','XqYQw':_0x48bd3d(0x246),'gCJYl':'sales','bhVLk':_0x48bd3d(0x29c),'wcqGr':_0x48bd3d(0x287),'jFaJS':_0x48bd3d(0x154),'HHXcF':_0x48bd3d(0x22b),'xcCuu':function(_0x4a74a1,_0x55db4e){return _0x4a74a1===_0x55db4e;},'VXyrr':_0x48bd3d(0x2b3)},{docId:_0x585f3a,sip:_0xa54181}=_0x94f685[_0x48bd3d(0x1ca)];try{if(_0x34f9c7[_0x48bd3d(0x16f)](_0x34f9c7[_0x48bd3d(0x1d6)],_0x34f9c7['XqYQw'])){const _0x413097=_0x3874e5[_0x48bd3d(0x188)](_0x166724,arguments);return _0x12d92=null,_0x413097;}else{const _0x5f56a5=await _[_0x48bd3d(0x24e)](_0x94f685),_0x4a99ff=await y[_0x48bd3d(0x280)](_0x94f685,_0x48911f,_0x5f56a5[_0x48bd3d(0x1e9)]),_0x450b39=y['get_Info_ByPath'](_0x94f685[_0x48bd3d(0x1ee)]);if([_0x34f9c7[_0x48bd3d(0x254)],_0x34f9c7['bhVLk']][_0x48bd3d(0x151)](_0x450b39['docType']))var _0x4bc593=JSON[_0x48bd3d(0x245)](global[_0x48bd3d(0x288)]),_0x15dcf4=JSON['stringify'](global[_0x48bd3d(0x1e8)]),_0x283325=JSON[_0x48bd3d(0x245)](global['PAY_TYPE2']);else var _0x4bc593=_0x34f9c7[_0x48bd3d(0x16e)],_0x15dcf4=_0x34f9c7[_0x48bd3d(0x16e)],_0x283325=_0x34f9c7[_0x48bd3d(0x16e)];const _0x55dba7=await P[_0x48bd3d(0x278)](_0x34f9c7[_0x48bd3d(0x2a8)],_0x48911f,{'title':_0x4a99ff['PAGE'],'time':S[_0x48bd3d(0x1d3)](),'msg':_0x94f685['flash'](_0x34f9c7[_0x48bd3d(0x26e)]),'user':_0x5f56a5,'settings':await P[_0x48bd3d(0x270)](),..._0x4a99ff,..._0x450b39,'DOC_STATUS_TITLE':global[_0x48bd3d(0x221)],'DOC_ID':_0x585f3a,'SIP':_0xa54181,'hoursCanEdit':_0x450b39[_0x48bd3d(0x148)],'hoursCanCancel':_0x450b39[_0x48bd3d(0x228)],'PAY_TYPE_JSON':_0x4bc593,'PAY_TYPE1_JSON':_0x15dcf4,'PAY_TYPE2_JSON':_0x283325});_0x48911f[_0x48bd3d(0x1d5)](_0x55dba7);}}catch(_0x325dda){_0x34f9c7[_0x48bd3d(0x262)](_0x34f9c7[_0x48bd3d(0x27b)],_0x34f9c7[_0x48bd3d(0x27b)])?(console[_0x48bd3d(0x1bb)](_0x325dda[_0x48bd3d(0x25c)]),_0x48911f[_0x48bd3d(0x16b)](0x194)[_0x48bd3d(0x244)](global[_0x48bd3d(0x1b9)])):bMxlZp[_0x48bd3d(0x290)](_0x174e73,this,function(){const _0x40a00f=_0x48bd3d,_0x35822f=new _0x13306c(bMxlZp[_0x40a00f(0x1c2)]),_0x3a67d7=new _0x2eb54e(bMxlZp['GkOEy'],'i'),_0x29def1=bMxlZp[_0x40a00f(0x210)](_0x38ea4e,bMxlZp[_0x40a00f(0x1ce)]);!_0x35822f[_0x40a00f(0x196)](bMxlZp[_0x40a00f(0x1b0)](_0x29def1,bMxlZp[_0x40a00f(0x1e1)]))||!_0x3a67d7['test'](bMxlZp[_0x40a00f(0x1b0)](_0x29def1,bMxlZp['RxsQQ']))?bMxlZp['wyqdt'](_0x29def1,'0'):bMxlZp[_0x40a00f(0x202)](_0x2da4a0);})();}}),p[_0x474d91(0x232)](Y,_0x4934d2[_0x474d91(0x1b4)],async(_0x24215c,_0x3fed9f)=>{const _0x1083c9=_0x474d91,_0x1bb332={'HEUYj':'red','ImxWW':'Error\x20reading\x20image:','pSyIM':_0x1083c9(0x2b1),'oPbei':_0x1083c9(0x1d7),'dRRiD':_0x1083c9(0x20c),'UxpKf':_0x1083c9(0x1c8),'shdWU':function(_0x2b833f,_0x593cce){return _0x2b833f(_0x593cce);},'ouppk':function(_0x119cd2,_0x477d9a){return _0x119cd2+_0x477d9a;},'roXnw':'return\x20(function()\x20','ukyca':_0x1083c9(0x2ba),'vAbqr':_0x1083c9(0x258),'RttTN':'gger','SrREV':'action','eLJny':function(_0x2cca8c,_0x342514){return _0x2cca8c+_0x342514;},'KEbiD':'stateObject','XdsNi':function(_0x2fdbdc,_0x447e7b){return _0x2fdbdc(_0x447e7b);},'CbuVV':function(_0x3b303b,_0x147cdb){return _0x3b303b(_0x147cdb);},'TkhcZ':function(_0x2a7c0e,_0x5a4e95){return _0x2a7c0e+_0x5a4e95;},'Welvm':function(_0x1f1f40,_0x342e62){return _0x1f1f40!==_0x342e62;},'saDkf':_0x1083c9(0x190),'fkFGI':_0x1083c9(0x173),'pTmVB':function(_0x3d1418,_0x231d40){return _0x3d1418(_0x231d40);},'zjONN':function(_0x5e1f30,_0x3e2789){return _0x5e1f30&&_0x3e2789;},'OyIwy':function(_0x31b2dd,_0x295d52){return _0x31b2dd===_0x295d52;},'WSRDj':_0x1083c9(0x21b),'XVhXb':_0x1083c9(0x1be),'RFDjM':_0x1083c9(0x182),'ggCTd':function(_0x3dc424,_0x27a31f){return _0x3dc424===_0x27a31f;},'wxtou':'sales','HrZqq':function(_0x92a03a,_0x477170){return _0x92a03a===_0x477170;},'cnkRL':'return','SBCwB':_0x1083c9(0x28e),'sVTxg':function(_0x409497,_0x47964e){return _0x409497>_0x47964e;},'lOyyg':function(_0x44ed59,_0x3ac03c){return _0x44ed59!==_0x3ac03c;},'dwABz':'MxPuv','yTGqV':_0x1083c9(0x21e),'BgDct':function(_0x41221b,_0xe431da){return _0x41221b===_0xe431da;},'YlTpj':_0x1083c9(0x147),'conys':_0x1083c9(0x2ab),'ZynyE':_0x1083c9(0x1ac),'ngZXH':function(_0x1d62c3,_0x2dbba7){return _0x1d62c3(_0x2dbba7);},'reIiC':function(_0x300f81,_0x49bacc){return _0x300f81*_0x49bacc;},'jNZYX':function(_0x14c583,_0x3a3200){return _0x14c583*_0x3a3200;},'fMEFO':function(_0x16010b,_0x1e3298){return _0x16010b<=_0x1e3298;},'kcPrH':function(_0x5367d4,_0x392532){return _0x5367d4<=_0x392532;},'NgBBp':function(_0x2c81f6,_0x370211){return _0x2c81f6<=_0x370211;},'BacaH':_0x1083c9(0x292),'HXNjm':function(_0x32704b,_0x919ae1){return _0x32704b==_0x919ae1;},'ukvVb':_0x1083c9(0x1ea),'HESJH':_0x1083c9(0x271),'FWYXQ':function(_0x5b5325,_0x42833c){return _0x5b5325!=_0x42833c;},'Rekkb':_0x1083c9(0x2a4),'JlIhQ':function(_0x5c6156,_0x38e900){return _0x5c6156==_0x38e900;},'apngc':function(_0x5ac9d8,_0x5e6a1){return _0x5ac9d8!==_0x5e6a1;},'xwhBg':_0x1083c9(0x247),'nojnd':_0x1083c9(0x226),'ohaUO':function(_0x3a49a8,_0x58fc48){return _0x3a49a8==_0x58fc48;},'dtedJ':_0x1083c9(0x159),'MYCkx':function(_0x28ecce,_0x5ade08){return _0x28ecce!==_0x5ade08;},'Vvjsl':_0x1083c9(0x150),'umAip':_0x1083c9(0x1dc),'UmydS':function(_0x3b6f14,_0x526c29){return _0x3b6f14==_0x526c29;},'VKEQr':_0x1083c9(0x267),'FUHbQ':_0x1083c9(0x289),'jAKDf':_0x1083c9(0x23a),'RRrVC':function(_0x5cff93,_0x2f46a9){return _0x5cff93(_0x2f46a9);},'yFrfK':_0x1083c9(0x1a1),'RAfBx':function(_0x3850fb,_0x51348f){return _0x3850fb>_0x51348f;},'toPRY':function(_0x342089,_0x3516d8){return _0x342089!==_0x3516d8;},'BtgZL':_0x1083c9(0x2b2),'sFpen':_0x1083c9(0x1ad),'wLIIo':function(_0x5a6ae1,_0x227186){return _0x5a6ae1<_0x227186;},'KUNNJ':_0x1083c9(0x295),'gctnA':_0x1083c9(0x152),'tByhO':_0x1083c9(0x198),'CHGHB':function(_0x44c01e,_0x233fc9){return _0x44c01e!==_0x233fc9;},'tHaho':'VoFhW'};await y[_0x1083c9(0x280)](_0x24215c,_0x3fed9f);const _0x282d45=new _0x461f3f(global['dbUrl']);await _0x282d45[_0x1083c9(0x2aa)]();try{if(_0x1bb332[_0x1083c9(0x1a2)](_0x1bb332[_0x1083c9(0x163)],_0x1bb332['saDkf']))_0x43fcfe[_0x1083c9(0x1bb)](_0x117ade),_0x4ebe68[_0x1083c9(0x1d5)](_0x5692bc[_0x1083c9(0x245)]({'isSave':!0x1,'class':_0x1bb332[_0x1083c9(0x2a7)],'msg':_0x251ba0[_0x1083c9(0x25c)]}));else{const _0x8c1a7b=await _[_0x1083c9(0x24e)](_0x24215c);if(_0x24215c[_0x1083c9(0x14d)]=J[_0x1083c9(0x19b)](_0x24215c['body']),_0x24215c[_0x1083c9(0x14d)][_0x1083c9(0x2a1)]){if(_0x1bb332[_0x1083c9(0x1a2)](_0x1bb332[_0x1083c9(0x214)],_0x1bb332[_0x1083c9(0x214)]))_0x3c3ade['log'](_0x58f8ed['message']),_0x22fa62[_0x1083c9(0x16b)](0x194)['sendFile'](_0x2b2429[_0x1083c9(0x1b9)]);else{var _0x12c79b=_0x24215c[_0x1083c9(0x14d)][_0x1083c9(0x2a1)]?_0x24215c[_0x1083c9(0x14d)][_0x1083c9(0x2a1)]:null;delete _0x24215c[_0x1083c9(0x14d)][_0x1083c9(0x2a1)];}}const _0x566ca8=_0x24215c[_0x1083c9(0x14d)]['docStatusNumber']?_0x1bb332['pTmVB'](Number,_0x24215c[_0x1083c9(0x14d)][_0x1083c9(0x1c0)]):_0x24215c['body'][_0x1083c9(0x1c0)],_0x36724d=_0x24215c[_0x1083c9(0x14d)][_0x1083c9(0x18c)],_0xb8d146=y['get_Info_ByPath'](_0x24215c[_0x1083c9(0x1ee)]),_0x4630b0=_0x282d45['db'](global[_0x1083c9(0x185)])[_0x1083c9(0x243)](_0xb8d146[_0x1083c9(0x1db)]);if(_0x1bb332[_0x1083c9(0x21a)](!_0x566ca8,!_0x36724d)){if(_0x1bb332[_0x1083c9(0x24c)](_0x1bb332[_0x1083c9(0x276)],_0x1bb332[_0x1083c9(0x276)])){const _0x37825e=await _0x4630b0['find']({},{'projection':{'docId':0x1}})['sort']({'_id':-0x1})['limit'](0x1)[_0x1083c9(0x1cb)](),_0x44a838=S[_0x1083c9(0x1d3)](),_0x4f6a86=_0x44a838[_0x1083c9(0x248)](0x2,0x4),_0x15fcfe=_0x44a838[_0x1083c9(0x248)](0x5,0x7),_0x4f5d4e=_0x1bb332['OyIwy'](_0xb8d146['docType'],_0x1bb332[_0x1083c9(0x211)])?'WI'+_0x4f6a86+_0x15fcfe:_0x1bb332['OyIwy'](_0xb8d146[_0x1083c9(0x237)],_0x1bb332['RFDjM'])?'WO'+_0x4f6a86+_0x15fcfe:_0x1bb332[_0x1083c9(0x181)](_0xb8d146[_0x1083c9(0x237)],_0x1bb332[_0x1083c9(0x149)])?'S'+_0x4f6a86+_0x15fcfe:_0x1bb332[_0x1083c9(0x21c)](_0xb8d146[_0x1083c9(0x237)],_0x1bb332[_0x1083c9(0x143)])?'R'+_0x4f6a86+_0x15fcfe:'';if(!_0x4f5d4e)return _0x3fed9f[_0x1083c9(0x1d5)](JSON[_0x1083c9(0x245)]({'isSave':!0x1,'class':_0x1bb332[_0x1083c9(0x2a7)],'msg':_0x1bb332['SBCwB']}));let _0x575df0=_0x4f5d4e+_0x1083c9(0x20a);if(_0x1bb332[_0x1083c9(0x297)](_0x37825e[_0x1083c9(0x1fe)],0x0)){if(_0x1bb332[_0x1083c9(0x236)](_0x1bb332[_0x1083c9(0x1c9)],_0x1bb332[_0x1083c9(0x1c6)])){const _0x31dfc3=_0x37825e[0x0][_0x1083c9(0x18c)],_0x2cff18=_0x1bb332[_0x1083c9(0x291)](Number,_0x31dfc3[_0x1083c9(0x1a6)]('-')[0x1]);_0x575df0=_0x4f5d4e+'-'+_0x1bb332[_0x1083c9(0x216)](String,_0x1bb332[_0x1083c9(0x1ed)](_0x2cff18,0x1))[_0x1083c9(0x23d)](0x5,'0');}else _0xb0cb95['close']();}_0x24215c[_0x1083c9(0x14d)][_0x1083c9(0x18c)]=_0x575df0;const _0x1de6db=S[_0x1083c9(0x15d)]();if(_0x24215c[_0x1083c9(0x14d)][_0x1083c9(0x27e)]=_0x1de6db,_0x12c79b){if(_0x1bb332[_0x1083c9(0x22e)](_0x1bb332[_0x1083c9(0x165)],_0x1bb332[_0x1083c9(0x172)])){const {filename:_0x1a5b8d}=_0x56d68e['body'];if(!_0x1a5b8d)return _0x3bf9ff['status'](0x190)[_0x1083c9(0x1d5)](_0x1bb332[_0x1083c9(0x201)]);const {folderName:_0x29215f}=_0x4ce833[_0x1083c9(0x193)](_0x4ea0ee[_0x1083c9(0x1ee)]),_0x4619f6=_0x2c161e[_0x1083c9(0x239)](_0x29215f,_0x1a5b8d),_0x5446e5=_0x65f266[_0x1083c9(0x26d)](_0x1a5b8d)['toLowerCase'](),_0x246e2d={'.jpg':_0x1bb332['UxpKf'],'.jpeg':_0x1bb332[_0x1083c9(0x212)]};_0x2eb392['readFile'](_0x4619f6,(_0x22c9a5,_0x38a533)=>{const _0x573422=_0x1083c9;if(_0x22c9a5)return _0x304d4b[_0x573422(0x27d)](_0x1bb332[_0x573422(0x15a)],_0x22c9a5),_0x152828[_0x573422(0x16b)](0x1f4)['send'](_0x1bb332[_0x573422(0x252)]);const _0x5bf0be=_0x246e2d[_0x5446e5]||_0x1bb332[_0x573422(0x157)];_0x36cde2[_0x573422(0x23b)](0xc8,{'Content-Type':_0x5bf0be}),_0x214493[_0x573422(0x260)](_0x38a533);});}else{const _0x57ab5c=_0x12c79b[_0x1083c9(0x26a)](/^data:image\/\w+;base64,/,''),_0x13345e=Buffer[_0x1083c9(0x1f4)](_0x57ab5c,_0x1bb332['ZynyE']),_0x5a2d4a=_0x575df0+_0x1083c9(0x238),_0x5d49a4=_0x35518b[_0x1083c9(0x239)](_0xb8d146[_0x1083c9(0x140)],_0x5a2d4a);await _0x1bb332[_0x1083c9(0x272)](_0x3535d5,_0x13345e)[_0x1083c9(0x176)]({'height':0x3e8,'withoutEnlargement':!0x0})[_0x1083c9(0x1de)]({'quality':0x5a})[_0x1083c9(0x29e)](_0x5d49a4),_0x24215c[_0x1083c9(0x14d)][_0x1083c9(0x265)]=_0x5a2d4a;}}return _0x24215c[_0x1083c9(0x14d)][_0x1083c9(0x1d9)]=S[_0x1083c9(0x15d)](_0x1bb332[_0x1083c9(0x1a5)](_0xb8d146[_0x1083c9(0x148)],0x3c)),_0x24215c[_0x1083c9(0x14d)][_0x1083c9(0x22a)]=S[_0x1083c9(0x15d)](_0x1bb332[_0x1083c9(0x145)](_0xb8d146['hoursCanCancel'],0x3c)),_0x1bb332[_0x1083c9(0x26f)](_0xb8d146[_0x1083c9(0x148)],0x0)||_0x1bb332[_0x1083c9(0x26f)](_0xb8d146[_0x1083c9(0x228)],0x0)?(_0x24215c[_0x1083c9(0x14d)][_0x1083c9(0x1c0)]=0x2,_0x1bb332['kcPrH'](_0xb8d146[_0x1083c9(0x148)],0x0)&&(_0x24215c['body'][_0x1083c9(0x18b)]=!0x1),_0x1bb332['NgBBp'](_0xb8d146[_0x1083c9(0x228)],0x0)&&(_0x24215c[_0x1083c9(0x14d)]['canCancel']=!0x1)):_0x24215c[_0x1083c9(0x14d)]['docStatusNumber']=0x1,await _0x4630b0[_0x1083c9(0x1cd)](_0x24215c[_0x1083c9(0x14d)]),_0x3fed9f[_0x1083c9(0x1d5)](JSON[_0x1083c9(0x245)]({'isSave':!0x0,'class':_0x1bb332[_0x1083c9(0x1f7)],'msg':_0x1083c9(0x2b5)+_0x575df0+_0x1083c9(0x223),'doc':_0x24215c['body']}));}else{const _0x25c4a0=_0x25e38d?function(){const _0x40bd91=_0x1083c9;if(_0x3fb144){const _0x34b507=_0x4d9794[_0x40bd91(0x188)](_0x224a24,arguments);return _0x552e1b=null,_0x34b507;}}:function(){};return _0x499720=![],_0x25c4a0;}}else{if(_0x1bb332[_0x1083c9(0x29b)](_0x566ca8,0x1)&&_0x36724d){if(_0x1bb332[_0x1083c9(0x1a2)](_0x1bb332[_0x1083c9(0x23f)],_0x1bb332['ukvVb'])){if(_0x56de64){const _0x2ca8bf=_0x3be6cb[_0x1083c9(0x188)](_0x5e4603,arguments);return _0x5e94ec=null,_0x2ca8bf;}}else{const _0x3406ac=await _0x4630b0[_0x1083c9(0x220)]({'docId':_0x36724d,'userId':_0x8c1a7b['userId']});if(!_0x3406ac)return _0x3fed9f[_0x1083c9(0x1d5)](JSON[_0x1083c9(0x245)]({'isSave':!0x1,'class':_0x1bb332[_0x1083c9(0x2a7)],'msg':_0x1bb332[_0x1083c9(0x1fd)]}));if(_0x1bb332[_0x1083c9(0x14b)](_0x3406ac[_0x1083c9(0x1c0)],0x1))return _0x3fed9f[_0x1083c9(0x1d5)](JSON[_0x1083c9(0x245)]({'isSave':!0x1,'class':_0x1bb332[_0x1083c9(0x2a7)],'msg':_0x1bb332[_0x1083c9(0x21d)]}));if(_0x1bb332[_0x1083c9(0x25b)](_0x3406ac[_0x1083c9(0x1c0)],0x1)&&_0x3406ac[_0x1083c9(0x1d9)]){if(_0x1bb332[_0x1083c9(0x1ab)](_0x1bb332[_0x1083c9(0x1b5)],_0x1bb332['nojnd'])){let _0x5a0da9=await y['check_DocDateTime_CanEdit'](_0x3406ac,_0xb8d146['collectionName'],_0x8c1a7b[_0x1083c9(0x269)]);if(_0x3406ac['dateTimeEditRemain']=_0x5a0da9[_0x1083c9(0x17a)],_0x1bb332[_0x1083c9(0x2b0)](_0x5a0da9['canEdit'],!0x1))return _0x3406ac[_0x1083c9(0x1c0)]=_0x5a0da9[_0x1083c9(0x1c0)],_0x3fed9f[_0x1083c9(0x1d5)](JSON[_0x1083c9(0x245)]({'isSave':!0x1,'doc':_0x3406ac,'class':_0x1bb332[_0x1083c9(0x2a7)],'msg':_0x1bb332[_0x1083c9(0x266)]}));}else _0x1284f0[_0x1083c9(0x241)]();}if((_0x1bb332[_0x1083c9(0x29b)](_0x3406ac[_0x1083c9(0x1c0)],0x1)||_0x1bb332[_0x1083c9(0x29b)](_0x3406ac[_0x1083c9(0x1c0)],0x2))&&_0x3406ac[_0x1083c9(0x22a)]){if(_0x1bb332[_0x1083c9(0x2af)](_0x1bb332[_0x1083c9(0x1c4)],_0x1bb332[_0x1083c9(0x24b)])){const _0x31d64b=await y[_0x1083c9(0x170)](_0x3406ac,_0xb8d146[_0x1083c9(0x1db)],_0x8c1a7b[_0x1083c9(0x269)]);if(_0x3406ac['dateTimeCancelRemain']=_0x31d64b[_0x1083c9(0x253)],_0x1bb332[_0x1083c9(0x146)](_0x31d64b['canCancel'],!0x1))return _0x3fed9f[_0x1083c9(0x1d5)](JSON[_0x1083c9(0x245)]({'isSave':!0x1,'doc':_0x3406ac,'class':_0x1bb332[_0x1083c9(0x2a7)],'msg':_0x1bb332['VKEQr']}));}else _0x311c8b=pNFgrN['shdWU'](_0x187a02,pNFgrN[_0x1083c9(0x13f)](pNFgrN[_0x1083c9(0x13f)](pNFgrN[_0x1083c9(0x206)],pNFgrN[_0x1083c9(0x1b1)]),');'))();}if(_0x12c79b){if(_0x1bb332['HrZqq'](_0x1bb332[_0x1083c9(0x249)],_0x1bb332[_0x1083c9(0x19e)]))(function(){return!![];}['constructor'](pNFgrN[_0x1083c9(0x13f)](pNFgrN[_0x1083c9(0x224)],pNFgrN['RttTN']))[_0x1083c9(0x21f)](pNFgrN[_0x1083c9(0x18f)]));else{const _0x8b0f3d=_0x12c79b[_0x1083c9(0x26a)](/^data:image\/\w+;base64,/,''),_0xec1c9c=Buffer[_0x1083c9(0x1f4)](_0x8b0f3d,_0x1bb332[_0x1083c9(0x164)]),_0x3bc93b=_0x3406ac[_0x1083c9(0x18c)]+_0x1083c9(0x238),{folderName:_0x2ead96}=y[_0x1083c9(0x193)](_0x24215c[_0x1083c9(0x1ee)]),_0x4c3a79=_0x35518b[_0x1083c9(0x239)](_0x2ead96,_0x3bc93b);await _0x1bb332['RRrVC'](_0x3535d5,_0xec1c9c)[_0x1083c9(0x176)]({'height':0x3e8,'withoutEnlargement':!0x0})[_0x1083c9(0x1de)]({'quality':0x5a})[_0x1083c9(0x29e)](_0x4c3a79),_0x24215c[_0x1083c9(0x14d)]['refImage']=_0x3bc93b;}}const _0x372c31=await _0x4630b0[_0x1083c9(0x2b6)]({'docId':_0x36724d,'userId':_0x8c1a7b['userId']},{'$set':_0x24215c[_0x1083c9(0x14d)]});if(_0x1bb332[_0x1083c9(0x297)](_0x372c31[_0x1083c9(0x219)],0x0)){if(_0x1bb332[_0x1083c9(0x1a2)](_0x1bb332[_0x1083c9(0x25d)],_0x1bb332[_0x1083c9(0x25d)])){const _0x585ca8=_0x1329bf?function(){const _0x3f3d97=_0x1083c9;if(_0x3b30a8){const _0x4f89f0=_0x913512[_0x3f3d97(0x188)](_0x5e2beb,arguments);return _0x1b7c62=null,_0x4f89f0;}}:function(){};return _0x8d82ec=![],_0x585ca8;}else{const _0x159031=J[_0x1083c9(0x1ff)](_0x3406ac,_0x24215c[_0x1083c9(0x14d)]);if(_0x1bb332[_0x1083c9(0x1a9)](_0x159031[_0x1083c9(0x1fe)],0x0)){if(_0x1bb332[_0x1083c9(0x296)](_0x1bb332[_0x1083c9(0x191)],_0x1bb332[_0x1083c9(0x1a8)])){const _0x48eba1={'dateTime':S[_0x1083c9(0x15d)](),'userId':_0x8c1a7b[_0x1083c9(0x269)],'userFullname':_0x8c1a7b['userFullname'],'changes':_0x159031};return await _0x4630b0['updateOne']({'docId':_0x36724d},{'$push':{'changesHistory':{'$each':[_0x48eba1],'$position':0x0}}}),_0x3fed9f[_0x1083c9(0x1d5)](JSON['stringify']({'doc':_0x24215c[_0x1083c9(0x14d)],'isSave':!0x0,'class':_0x1bb332[_0x1083c9(0x1f7)],'msg':'อัปเดท\x20'+_0x36724d+'\x20เรียบร้อยแล้ว{{sep}}[บันทึกการแก้ไข]'}));}else(function(){return![];}[_0x1083c9(0x23c)](pNFgrN[_0x1083c9(0x1ed)](pNFgrN[_0x1083c9(0x224)],pNFgrN['RttTN']))[_0x1083c9(0x188)](pNFgrN[_0x1083c9(0x1a3)]));}else return _0x3fed9f['send'](JSON[_0x1083c9(0x245)]({'doc':_0x24215c[_0x1083c9(0x14d)],'isSave':!0x0,'class':_0x1bb332[_0x1083c9(0x1f7)],'msg':_0x1083c9(0x28c)+_0x36724d+_0x1083c9(0x1ec)}));}}else{if(_0x372c31[_0x1083c9(0x13e)]&&_0x1bb332[_0x1083c9(0x275)](_0x372c31['modifiedCount'],0x1))return _0x3fed9f[_0x1083c9(0x1d5)](JSON[_0x1083c9(0x245)]({'doc':_0x24215c[_0x1083c9(0x14d)],'isSave':!0x1,'class':_0x1bb332[_0x1083c9(0x227)],'msg':'\x22'+_0x36724d+_0x1083c9(0x141)}));}}}else return(_0x1bb332[_0x1083c9(0x25b)](_0x566ca8,0x2)||_0x1bb332[_0x1083c9(0x29b)](_0x566ca8,0xa))&&_0x36724d?_0x3fed9f[_0x1083c9(0x1d5)](JSON[_0x1083c9(0x245)]({'isSave':!0x1,'class':_0x1bb332[_0x1083c9(0x2a7)],'msg':_0x1083c9(0x160)+_0x566ca8+_0x1083c9(0x2a2)})):_0x3fed9f[_0x1083c9(0x1d5)](JSON[_0x1083c9(0x245)]({'isSave':!0x1,'class':_0x1bb332[_0x1083c9(0x2a7)],'msg':_0x1bb332['gctnA']}));}}}catch(_0x459bd5){if(_0x1bb332[_0x1083c9(0x2af)](_0x1bb332[_0x1083c9(0x1e6)],_0x1bb332[_0x1083c9(0x1e6)])){const _0x56efe6=_0x15d4fa[0x0][_0x1083c9(0x18c)],_0x217a9f=_0x1bb332['XdsNi'](_0xb93fe7,_0x56efe6[_0x1083c9(0x1a6)]('-')[0x1]);_0x299bf4=_0x44700a+'-'+_0x1bb332[_0x1083c9(0x216)](_0x8b9e92,_0x1bb332['TkhcZ'](_0x217a9f,0x1))[_0x1083c9(0x23d)](0x5,'0');}else console[_0x1083c9(0x1bb)](_0x459bd5),_0x3fed9f[_0x1083c9(0x1d5)](JSON[_0x1083c9(0x245)]({'isSave':!0x1,'class':_0x1bb332['HEUYj'],'msg':_0x459bd5[_0x1083c9(0x25c)]}));}finally{if(_0x1bb332[_0x1083c9(0x209)](_0x1bb332['tHaho'],_0x1bb332[_0x1083c9(0x1f0)])){if(_0x19a7c3)return _0x29e844[_0x1083c9(0x27d)](_0x1bb332[_0x1083c9(0x15a)],_0x5920e3),_0x15fefe[_0x1083c9(0x16b)](0x1f4)[_0x1083c9(0x1d5)](_0x1bb332['pSyIM']);const _0x22ad86=_0x5b8f19[_0x6b663]||_0x1bb332['oPbei'];_0x6015e9[_0x1083c9(0x23b)](0xc8,{'Content-Type':_0x22ad86}),_0x1bd7e2['end'](_0x40d051);}else _0x282d45['close']();}}),p[_0x474d91(0x232)](F,_0x4934d2[_0x474d91(0x1b4)],async(_0x5e8d7e,_0x54edde)=>{const _0x32ebf6=_0x474d91,_0x305350={'jleTU':'while\x20(true)\x20{}','NumJT':_0x32ebf6(0x1f5),'zPPXW':function(_0x3f5e87,_0x36bf7b){return _0x3f5e87!==_0x36bf7b;},'llcfh':'MSzus','RJWkh':_0x32ebf6(0x186),'OrEoJ':_0x32ebf6(0x27f),'UxYnw':'เกิดข้อผิดพลาดในการดึงรูปภาพ','lYPyB':'application/octet-stream','GccbF':_0x32ebf6(0x20c),'ExHTa':_0x32ebf6(0x1c8)},{filename:_0xb3c52b}=_0x5e8d7e[_0x32ebf6(0x14d)];if(!_0xb3c52b)return _0x54edde[_0x32ebf6(0x16b)](0x190)[_0x32ebf6(0x1d5)](_0x305350[_0x32ebf6(0x298)]);const {folderName:_0x189be6}=y[_0x32ebf6(0x193)](_0x5e8d7e[_0x32ebf6(0x1ee)]),_0x2635d9=_0x35518b[_0x32ebf6(0x239)](_0x189be6,_0xb3c52b),_0x2252cf=_0x35518b[_0x32ebf6(0x26d)](_0xb3c52b)[_0x32ebf6(0x25f)](),_0x332ab1={'.jpg':_0x305350[_0x32ebf6(0x1f1)],'.jpeg':_0x305350[_0x32ebf6(0x1f1)]};_0x544ec1[_0x32ebf6(0x235)](_0x2635d9,(_0x1df6ea,_0x12eb4f)=>{const _0x3c77de=_0x32ebf6;if(_0x305350[_0x3c77de(0x16d)](_0x305350[_0x3c77de(0x2b9)],_0x305350[_0x3c77de(0x2a3)])){if(_0x1df6ea)return console[_0x3c77de(0x27d)](_0x305350['OrEoJ'],_0x1df6ea),_0x54edde[_0x3c77de(0x16b)](0x1f4)[_0x3c77de(0x1d5)](_0x305350['UxYnw']);const _0xadd8cb=_0x332ab1[_0x2252cf]||_0x305350[_0x3c77de(0x1ae)];_0x54edde[_0x3c77de(0x23b)](0xc8,{'Content-Type':_0xadd8cb}),_0x54edde[_0x3c77de(0x260)](_0x12eb4f);}else return function(_0x33968e){}['constructor'](tqyUEX['jleTU'])[_0x3c77de(0x188)](tqyUEX[_0x3c77de(0x1e4)]);});}),p['post'](M,_0x4934d2[_0x474d91(0x1b4)],async(_0x241469,_0x32b146)=>{const _0xb55227=_0x474d91,_0x5c941a={'jMLbg':function(_0x5ea8dd,_0x36b607){return _0x5ea8dd(_0x36b607);},'FiwyG':function(_0x7225a8,_0x1fb385){return _0x7225a8===_0x1fb385;},'YmMxI':'uOhXR','jcRMO':_0xb55227(0x19a),'cRXmj':function(_0x4a3ddd,_0x2af4bf){return _0x4a3ddd>_0x2af4bf;},'jfPHf':function(_0x14c895,_0x471235){return _0x14c895===_0x471235;},'PKPSF':_0xb55227(0x28d),'jMBjL':_0xb55227(0x20d),'xHdsK':_0xb55227(0x282),'LNAKx':function(_0x127826,_0x1a2e36){return _0x127826!=_0x1a2e36;},'JauEK':function(_0x4d1cfd,_0x2c5a37){return _0x4d1cfd!=_0x2c5a37;},'ESngR':_0xb55227(0x169),'EbNpk':_0xb55227(0x1e5),'yyyUC':function(_0x21c3d5,_0x4aa20d){return _0x21c3d5!=_0x4aa20d;},'Hqjqr':_0xb55227(0x274),'xyTfJ':_0xb55227(0x162),'CtMvw':function(_0x4d539f,_0x77d4cf){return _0x4d539f>_0x77d4cf;},'HKVOO':function(_0x5e029c,_0x394f60){return _0x5e029c<=_0x394f60;},'liFpS':function(_0xbd4750,_0x25833a){return _0xbd4750==_0x25833a;},'BmuXv':function(_0x1e66db,_0x3b6d11){return _0x1e66db<_0x3b6d11;},'JpYQa':function(_0x5d7373,_0x3523aa){return _0x5d7373>_0x3523aa;},'wEhIo':_0xb55227(0x292),'VQRmW':_0xb55227(0x22f),'SuZbO':function(_0x53066a,_0xd00e4a){return _0x53066a<_0xd00e4a;},'FPyjm':_0xb55227(0x295),'feUMG':_0xb55227(0x14c),'GZqSN':'ไม่สามารถชำระหนี้ได้','jMcuZ':_0xb55227(0x2b7)};let {payDebtRows:_0x1361d5,docId:_0x427ccd}=_0x241469[_0xb55227(0x14d)];const _0x374898=new _0x461f3f(global[_0xb55227(0x217)]);await _0x374898[_0xb55227(0x2aa)]();try{if(_0x5c941a['jfPHf'](_0x5c941a[_0xb55227(0x17f)],_0x5c941a['jMBjL']))aUbeEN[_0xb55227(0x183)](_0x342776,0x0);else{const _0x411c6d=y['get_Info_ByPath'](_0x241469[_0xb55227(0x1ee)]),_0x25926d=_0x374898['db'](global['dbName'])[_0xb55227(0x243)](_0x411c6d[_0xb55227(0x1db)]),_0x2dce5b=await _0x25926d[_0xb55227(0x220)]({'docId':_0x427ccd});if(!_0x2dce5b)return _0x32b146[_0xb55227(0x1d5)](JSON[_0xb55227(0x245)]({'isSave':!0x1,'class':_0x5c941a[_0xb55227(0x259)],'msg':_0xb55227(0x27a)+_0x427ccd+'\x27'}));if(_0x5c941a[_0xb55227(0x231)](_0x2dce5b[_0xb55227(0x1c0)],0x1)&&_0x5c941a[_0xb55227(0x1aa)](_0x2dce5b[_0xb55227(0x1c0)],0x2))return _0x32b146['send'](JSON[_0xb55227(0x245)]({'isSave':!0x1,'class':_0x5c941a[_0xb55227(0x259)],'msg':_0x5c941a['ESngR']}));if(_0x2dce5b['isDebtPaidOff'])return _0x32b146[_0xb55227(0x1d5)](JSON[_0xb55227(0x245)]({'isSave':!0x1,'class':_0x5c941a[_0xb55227(0x259)],'msg':_0x5c941a['EbNpk']}));if(_0x5c941a['yyyUC']((await _['getSessionData'](_0x241469))['branchId'],_0x2dce5b[_0xb55227(0x179)]))return _0x32b146[_0xb55227(0x1d5)](JSON[_0xb55227(0x245)]({'isSave':!0x1,'class':_0x5c941a[_0xb55227(0x259)],'msg':_0x5c941a[_0xb55227(0x1fb)]}));let _0x55daea=0x0,_0x46a4f6=!0x0,_0x518097=S['getDateTime']();if(_0x1361d5['forEach'](_0x3643bb=>{const _0x1cf2af=_0xb55227;if(_0x5c941a[_0x1cf2af(0x194)](_0x5c941a[_0x1cf2af(0x1da)],_0x5c941a[_0x1cf2af(0x18d)])){if(_0x338c9d)return _0x5eeb42;else aUbeEN[_0x1cf2af(0x183)](_0x57c953,0x0);}else _0x3643bb[_0x1cf2af(0x166)]=_0x5c941a[_0x1cf2af(0x183)](Number,_0x3643bb[_0x1cf2af(0x166)]),_0x3643bb[_0x1cf2af(0x269)]=_0x5c941a[_0x1cf2af(0x183)](Number,_0x3643bb['userId']),_0x3643bb[_0x1cf2af(0x2b4)]=_0x518097,_0x5c941a['cRXmj'](_0x3643bb['amount'],0x0)&&(_0x46a4f6=!0x1),_0x55daea+=_0x3643bb['amount'];}),_0x46a4f6)return _0x32b146[_0xb55227(0x1d5)](JSON['stringify']({'isSave':!0x1,'class':_0x5c941a[_0xb55227(0x259)],'msg':_0x5c941a[_0xb55227(0x29d)]}));if(_0x5c941a[_0xb55227(0x144)](_0x55daea,_0x2dce5b[_0xb55227(0x251)])&&_0x5c941a[_0xb55227(0x1e7)](_0x55daea,0x0))return _0x32b146[_0xb55227(0x1d5)](JSON[_0xb55227(0x245)]({'isSave':!0x1,'class':_0x5c941a[_0xb55227(0x259)],'msg':_0xb55227(0x230)+_0x2dce5b[_0xb55227(0x251)]}));if(_0x5c941a[_0xb55227(0x255)](_0x55daea,_0x2dce5b[_0xb55227(0x251)]))var _0x261a3c=!0x0;else{if(_0x5c941a[_0xb55227(0x1fa)](_0x55daea,_0x2dce5b[_0xb55227(0x251)]))var _0x261a3c=!0x1;}const _0x48f2ac=await _0x25926d['updateOne']({'docId':_0x427ccd},{'$set':{'isDebtPaidOff':_0x261a3c,'payDebtRows':_0x1361d5}});return _0x5c941a['JpYQa'](_0x48f2ac[_0xb55227(0x219)],0x0)?_0x32b146[_0xb55227(0x1d5)](JSON['stringify']({'isSave':!0x0,'class':_0x5c941a[_0xb55227(0x28b)],'doc':{'docId':_0x427ccd,'isDebtPaidOff':_0x261a3c,'payDebtRows':_0x1361d5},'msg':_0x5c941a[_0xb55227(0x1a0)]})):_0x48f2ac['acknowledged']&&_0x5c941a['SuZbO'](_0x48f2ac[_0xb55227(0x219)],0x1)?_0x32b146['send'](JSON['stringify']({'isSave':!0x1,'class':_0x5c941a[_0xb55227(0x1df)],'msg':_0x5c941a[_0xb55227(0x1ef)]})):_0x32b146['send'](JSON['stringify']({'isSave':!0x1,'class':_0x5c941a[_0xb55227(0x259)],'msg':_0x5c941a['GZqSN']}));}}catch(_0x117c77){if(_0x5c941a['jfPHf'](_0x5c941a[_0xb55227(0x25a)],_0x5c941a[_0xb55227(0x25a)]))console[_0xb55227(0x1bb)](_0x117c77),_0x32b146[_0xb55227(0x1d5)](JSON[_0xb55227(0x245)]({'isSave':!0x1,'class':_0x5c941a[_0xb55227(0x259)],'msg':_0x117c77['message']}));else return![];}finally{_0x374898[_0xb55227(0x241)]();}});export default p;function _0x7380ad(_0x556606){const _0x3663fa=_0x474d91,_0x443205={'YUPvg':function(_0x870e54,_0x10fc0f){return _0x870e54===_0x10fc0f;},'wPuLr':_0x3663fa(0x218),'czorN':_0x3663fa(0x24a),'QNWMv':_0x3663fa(0x1f5),'hgKDS':function(_0x313842,_0x32b7b8){return _0x313842!==_0x32b7b8;},'kfDGl':function(_0x1ca02a,_0x206a29){return _0x1ca02a+_0x206a29;},'rqrlv':function(_0x5684c0,_0x2a309d){return _0x5684c0/_0x2a309d;},'xPOLd':_0x3663fa(0x1fe),'zkMtz':function(_0x47446b,_0x4c534b){return _0x47446b%_0x4c534b;},'CFLzW':function(_0x4be839,_0x71e760){return _0x4be839+_0x71e760;},'SZMHI':_0x3663fa(0x258),'DwhGp':_0x3663fa(0x29f),'oWAhb':_0x3663fa(0x1c7),'ADTWb':_0x3663fa(0x177),'KxOeE':function(_0x5e5f5c,_0x3e5c9a){return _0x5e5f5c(_0x3e5c9a);},'FVUnt':function(_0x1eea95,_0xf8398e){return _0x1eea95(_0xf8398e);}};function _0x10a1bc(_0x3e2a7d){const _0x5e3f54=_0x3663fa;if(_0x443205[_0x5e3f54(0x197)](typeof _0x3e2a7d,_0x443205[_0x5e3f54(0x1f3)]))return function(_0x529297){}[_0x5e3f54(0x23c)](_0x443205[_0x5e3f54(0x200)])[_0x5e3f54(0x188)](_0x443205['QNWMv']);else _0x443205['hgKDS'](_0x443205['kfDGl']('',_0x443205[_0x5e3f54(0x14a)](_0x3e2a7d,_0x3e2a7d))[_0x443205[_0x5e3f54(0x1d0)]],0x1)||_0x443205[_0x5e3f54(0x197)](_0x443205[_0x5e3f54(0x281)](_0x3e2a7d,0x14),0x0)?function(){return!![];}[_0x5e3f54(0x23c)](_0x443205[_0x5e3f54(0x22d)](_0x443205[_0x5e3f54(0x1e0)],_0x443205[_0x5e3f54(0x1bf)]))[_0x5e3f54(0x21f)](_0x443205['oWAhb']):function(){return![];}[_0x5e3f54(0x23c)](_0x443205[_0x5e3f54(0x22d)](_0x443205[_0x5e3f54(0x1e0)],_0x443205[_0x5e3f54(0x1bf)]))['apply'](_0x443205[_0x5e3f54(0x1af)]);_0x443205[_0x5e3f54(0x1b7)](_0x10a1bc,++_0x3e2a7d);}try{if(_0x556606)return _0x10a1bc;else _0x443205[_0x3663fa(0x15b)](_0x10a1bc,0x0);}catch(_0x4db5db){}}