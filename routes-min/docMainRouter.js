const _0x53abab=_0x437f;(function(_0x582c3c,_0x5cdc7d){const _0x40171d=_0x437f,_0x562dd6=_0x582c3c();while(!![]){try{const _0x2f4406=parseInt(_0x40171d(0x17f))/0x1*(parseInt(_0x40171d(0xaf))/0x2)+-parseInt(_0x40171d(0x18e))/0x3*(parseInt(_0x40171d(0xd7))/0x4)+parseInt(_0x40171d(0x10f))/0x5*(-parseInt(_0x40171d(0x1c5))/0x6)+-parseInt(_0x40171d(0xce))/0x7*(parseInt(_0x40171d(0x179))/0x8)+parseInt(_0x40171d(0x1bf))/0x9*(-parseInt(_0x40171d(0xc1))/0xa)+-parseInt(_0x40171d(0x122))/0xb+-parseInt(_0x40171d(0xea))/0xc*(-parseInt(_0x40171d(0x97))/0xd);if(_0x2f4406===_0x5cdc7d)break;else _0x562dd6['push'](_0x562dd6['shift']());}catch(_0x500cb3){_0x562dd6['push'](_0x562dd6['shift']());}}}(_0x4e61,0x87217));const _0xfde2c=(function(){const _0x5d6b8a=_0x437f,_0x2c835f={'hzCwP':function(_0x36c100,_0x4f4780){return _0x36c100===_0x4f4780;},'JRjnh':_0x5d6b8a(0xe5),'vTJgH':function(_0x3f81cb,_0x86fed9){return _0x3f81cb!==_0x86fed9;},'GgQdH':_0x5d6b8a(0xca),'jCatO':function(_0x20278b,_0x18a44f){return _0x20278b(_0x18a44f);},'nfWpL':function(_0x2927ce,_0x12becd){return _0x2927ce(_0x12becd);},'eeRys':function(_0x1532fe,_0xa6fc6e){return _0x1532fe>_0xa6fc6e;},'Evqqf':function(_0x47b128,_0x58f95b){return _0x47b128+_0x58f95b;},'eLcOX':_0x5d6b8a(0x1e2),'SHJgM':_0x5d6b8a(0x18f),'MjVYQ':_0x5d6b8a(0x16f),'hKOoW':'lMcBA'};let _0x36d348=!![];return function(_0x356a78,_0x1c3272){const _0x18c2ed=_0x5d6b8a,_0x2ce47f={'gObjf':function(_0x5683be,_0x3bcaa5){const _0x311828=_0x437f;return _0x2c835f[_0x311828(0x1cb)](_0x5683be,_0x3bcaa5);},'Gvnnp':_0x2c835f[_0x18c2ed(0x1f1)],'DZDZI':_0x2c835f[_0x18c2ed(0x197)],'MPSes':_0x2c835f[_0x18c2ed(0x148)]};if(_0x2c835f[_0x18c2ed(0xc0)](_0x2c835f['hKOoW'],_0x2c835f[_0x18c2ed(0xe7)])){const _0x1c9e95=_0x36d348?function(){const _0xc0519f=_0x18c2ed;if(_0x2c835f[_0xc0519f(0xc0)](_0x2c835f['JRjnh'],_0x2c835f['JRjnh'])){if(_0x1c3272){if(_0x2c835f[_0xc0519f(0x18a)](_0x2c835f[_0xc0519f(0x14b)],_0x2c835f['GgQdH']))(function(){return!![];}[_0xc0519f(0x1af)](_0x2ce47f['gObjf'](_0x2ce47f[_0xc0519f(0x10e)],_0x2ce47f[_0xc0519f(0x1b7)]))['call'](_0x2ce47f[_0xc0519f(0xac)]));else{const _0x5463dd=_0x1c3272[_0xc0519f(0xeb)](_0x356a78,arguments);return _0x1c3272=null,_0x5463dd;}}}else{const _0x3d082e=_0x2cfb95?function(){const _0x297bb1=_0xc0519f;if(_0x460fd6){const _0x1f7bbf=_0xc5deb0[_0x297bb1(0xeb)](_0x42af26,arguments);return _0x3bb19b=null,_0x1f7bbf;}}:function(){};return _0x129938=![],_0x3d082e;}}:function(){};return _0x36d348=![],_0x1c9e95;}else _0xa610b[_0x18c2ed(0x158)]=_0x2c835f[_0x18c2ed(0x17e)](_0x37db8f,_0x4f8082['amount']),_0x4c76e4['userId']=_0x2c835f[_0x18c2ed(0x1eb)](_0x5461ee,_0x4926ce[_0x18c2ed(0x150)]),_0x3c38b1[_0x18c2ed(0x1f0)]=_0xe61e36,_0x2c835f[_0x18c2ed(0x1d9)](_0x27e15f['amount'],0x0)&&(_0x3e648f=!0x1),_0x1254ea+=_0x527c96[_0x18c2ed(0x158)];};}());(function(){const _0x3233b7=_0x437f,_0x52f934={'zUWnz':_0x3233b7(0x8c),'vpDfE':function(_0x30f49e,_0x339489){return _0x30f49e+_0x339489;},'EyuvG':'debu','eHtwp':_0x3233b7(0x18f),'KJIkk':_0x3233b7(0xa2),'dzueL':function(_0x2b371e,_0x4072cc){return _0x2b371e!==_0x4072cc;},'MaOSd':'EqOUS','DSfce':'function\x20*\x5c(\x20*\x5c)','muboz':_0x3233b7(0x1ad),'WJnTg':function(_0x4f8edf,_0x426a41){return _0x4f8edf(_0x426a41);},'KdbLf':_0x3233b7(0xfa),'kxrCS':'chain','cydbl':_0x3233b7(0xb3),'rsfdF':'Fouzs','raYDD':function(_0x42156d,_0x4e49aa){return _0x42156d(_0x4e49aa);},'qTNWO':function(_0x7c5013,_0x164b69){return _0x7c5013!==_0x164b69;},'vRule':_0x3233b7(0x139),'QciGZ':function(_0xe8bb3b){return _0xe8bb3b();},'lVHTc':function(_0x4a79ce,_0xb42771,_0x50e0ce){return _0x4a79ce(_0xb42771,_0x50e0ce);}};_0x52f934[_0x3233b7(0xc2)](_0xfde2c,this,function(){const _0x4c2565=_0x3233b7,_0x18905d={'Pfsrm':function(_0x27a5ca,_0x349940){return _0x52f934['vpDfE'](_0x27a5ca,_0x349940);},'vspsc':_0x52f934[_0x4c2565(0x14f)],'bRUpa':_0x52f934[_0x4c2565(0x185)],'zvEQk':_0x52f934[_0x4c2565(0x8b)]};if(_0x52f934[_0x4c2565(0xe4)](_0x52f934[_0x4c2565(0x1ce)],_0x52f934[_0x4c2565(0x1ce)]))_0x36f247[_0x4c2565(0x1a0)](_0x15a37c),_0x53221a['send'](_0x82c4f4['stringify']({'isSave':!0x1,'class':_0x52f934['zUWnz'],'msg':_0x42c22a[_0x4c2565(0xe6)]}));else{const _0x2c5145=new RegExp(_0x52f934['DSfce']),_0x130f9b=new RegExp(_0x52f934[_0x4c2565(0x11b)],'i'),_0x4c1bc7=_0x52f934[_0x4c2565(0x1c2)](_0x3a8b27,_0x52f934['KdbLf']);!_0x2c5145['test'](_0x52f934['vpDfE'](_0x4c1bc7,_0x52f934[_0x4c2565(0xb4)]))||!_0x130f9b[_0x4c2565(0xc5)](_0x52f934[_0x4c2565(0xc7)](_0x4c1bc7,_0x52f934[_0x4c2565(0x144)]))?_0x52f934[_0x4c2565(0xe4)](_0x52f934[_0x4c2565(0x1a7)],_0x52f934[_0x4c2565(0x1a7)])?function(){return![];}[_0x4c2565(0x1af)](_0x18905d['Pfsrm'](_0x18905d[_0x4c2565(0x1a9)],_0x18905d[_0x4c2565(0x195)]))['apply'](_0x18905d['zvEQk']):_0x52f934['raYDD'](_0x4c1bc7,'0'):_0x52f934[_0x4c2565(0x1d3)](_0x52f934[_0x4c2565(0xa4)],_0x52f934[_0x4c2565(0xa4)])?_0x3d3ca7[_0x4c2565(0x125)]():_0x52f934[_0x4c2565(0x8e)](_0x3a8b27);}})();}());const _0x34eb90=(function(){const _0x217950=_0x437f,_0x1122aa={'nlsRn':_0x217950(0x163),'HbXFu':_0x217950(0x1fa),'IUBHO':_0x217950(0xaa),'VLaaa':function(_0x2305f8,_0x1b036a){return _0x2305f8!==_0x1b036a;},'kAYBB':'BvQSn','tfhyw':_0x217950(0xa7),'RrDqT':_0x217950(0xf6),'WoGeC':function(_0x694d61,_0x8e23db){return _0x694d61===_0x8e23db;},'pyaMZ':_0x217950(0x189),'Rqipt':_0x217950(0x1d7)};let _0x19ef66=!![];return function(_0x2b6e95,_0x133813){const _0x50fdcf=_0x217950;if(_0x1122aa[_0x50fdcf(0x137)](_0x1122aa[_0x50fdcf(0x142)],_0x1122aa[_0x50fdcf(0xc4)])){if(_0x491b4b)return _0x305f50['error'](_0x1122aa[_0x50fdcf(0x9d)],_0x4872c5),_0x4e56fe['status'](0x1f4)[_0x50fdcf(0xd2)](_0x1122aa['HbXFu']);const _0x41d574=_0x75ee8e[_0x3c84ce]||_0x1122aa[_0x50fdcf(0x1b8)];_0x13eaf0[_0x50fdcf(0x198)](0xc8,{'Content-Type':_0x41d574}),_0x241607[_0x50fdcf(0x192)](_0x51e261);}else{const _0x40f949=_0x19ef66?function(){const _0x3313c0=_0x50fdcf;if(_0x1122aa['VLaaa'](_0x1122aa[_0x3313c0(0x159)],_0x1122aa['kAYBB'])){const _0x5112b3=_0x38ec04[_0x3313c0(0xeb)](_0x5164c8,arguments);return _0x813488=null,_0x5112b3;}else{if(_0x133813){if(_0x1122aa[_0x3313c0(0xdc)](_0x1122aa[_0x3313c0(0xd6)],_0x1122aa[_0x3313c0(0xc6)])){const _0x5837f6=_0x133813[_0x3313c0(0xeb)](_0x2b6e95,arguments);return _0x133813=null,_0x5837f6;}else{if(_0x59ec65){const _0x1ab8d9=_0x46646a[_0x3313c0(0xeb)](_0x4221fd,arguments);return _0x124fd3=null,_0x1ab8d9;}}}}}:function(){};return _0x19ef66=![],_0x40f949;}};}()),_0x53aa4e=_0x34eb90(this,function(){const _0x5f110e=_0x437f,_0x2a6a2a={'vecFA':_0x5f110e(0x8c),'ubGat':function(_0x3a8b6d,_0x2b0089){return _0x3a8b6d(_0x2b0089);},'MPEQy':function(_0x35e28b,_0x251316){return _0x35e28b(_0x251316);},'WHRaY':function(_0x6a7b12,_0x2cb0bd){return _0x6a7b12+_0x2cb0bd;},'ecsOE':function(_0x3f91d0,_0x5cbd09){return _0x3f91d0===_0x5cbd09;},'mLoYW':_0x5f110e(0x9b),'GYBxV':_0x5f110e(0x1b3),'WNOTk':_0x5f110e(0x156),'IHwPg':'JHvHe','dHEEn':function(_0x31fe7a,_0x52f3c7){return _0x31fe7a(_0x52f3c7);},'PBzKT':function(_0xcc1312,_0x58d8a7){return _0xcc1312+_0x58d8a7;},'ywVmD':_0x5f110e(0x1ea),'DYRFW':_0x5f110e(0x1e6),'mEgAJ':_0x5f110e(0xd1),'VLLqd':_0x5f110e(0xa5),'MxptD':function(_0x486f1f){return _0x486f1f();},'ORwlQ':'log','YLKFh':_0x5f110e(0x8f),'bjgah':_0x5f110e(0x145),'YeLeK':_0x5f110e(0x138),'CbuWL':_0x5f110e(0x1c7),'ofYfF':'table','OZetT':'trace','ztbBS':function(_0x275096,_0x3d8ae7){return _0x275096<_0x3d8ae7;},'AaoXR':function(_0x8c5b71,_0x352f32){return _0x8c5b71===_0x352f32;},'MFdLf':_0x5f110e(0x1ae),'ZRbEO':_0x5f110e(0x116)},_0x527514=function(){const _0x1c089f=_0x5f110e;if(_0x2a6a2a[_0x1c089f(0x1f6)](_0x2a6a2a['mLoYW'],_0x2a6a2a[_0x1c089f(0xcf)]))_0x3cd897[_0x1c089f(0x1a0)](_0x57457b),_0x5d7fc0['send'](_0x255a5a[_0x1c089f(0x14e)]({'isSave':!0x1,'class':_0x2a6a2a[_0x1c089f(0x1e8)],'msg':_0x587bc0[_0x1c089f(0xe6)]}));else{let _0x2e44c6;try{if(_0x2a6a2a[_0x1c089f(0x1f6)](_0x2a6a2a['WNOTk'],_0x2a6a2a[_0x1c089f(0x115)])){const _0x2f37d9=_0x28abdb[_0x1c089f(0x1af)]['prototype'][_0x1c089f(0x182)](_0x16a0c0),_0x31a2ef=_0x2f1cdc[_0x11aad5],_0x4a6fe1=_0x23a978[_0x31a2ef]||_0x2f37d9;_0x2f37d9['__proto__']=_0x5848f5[_0x1c089f(0x182)](_0x21bda6),_0x2f37d9['toString']=_0x4a6fe1[_0x1c089f(0xff)][_0x1c089f(0x182)](_0x4a6fe1),_0x1fc8ae[_0x31a2ef]=_0x2f37d9;}else _0x2e44c6=_0x2a6a2a['dHEEn'](Function,_0x2a6a2a[_0x1c089f(0x19e)](_0x2a6a2a[_0x1c089f(0x171)](_0x2a6a2a[_0x1c089f(0xb0)],_0x2a6a2a[_0x1c089f(0xf0)]),');'))();}catch(_0x54b612){if(_0x2a6a2a['ecsOE'](_0x2a6a2a[_0x1c089f(0x1dc)],_0x2a6a2a['VLLqd'])){const _0x3af6d8=_0x513b2c[0x0]['docId'],_0x33212a=_0x2a6a2a['ubGat'](_0x25f423,_0x3af6d8[_0x1c089f(0xe9)]('-')[0x1]);_0xd1c400=_0x48847b+'-'+_0x2a6a2a[_0x1c089f(0x94)](_0x52e8ca,_0x2a6a2a['WHRaY'](_0x33212a,0x1))[_0x1c089f(0xb9)](0x5,'0');}else _0x2e44c6=window;}return _0x2e44c6;}},_0x2d65e7=_0x2a6a2a['MxptD'](_0x527514),_0x5ea448=_0x2d65e7[_0x5f110e(0x165)]=_0x2d65e7[_0x5f110e(0x165)]||{},_0x4abfdc=[_0x2a6a2a[_0x5f110e(0x111)],_0x2a6a2a['YLKFh'],_0x2a6a2a['bjgah'],_0x2a6a2a['YeLeK'],_0x2a6a2a[_0x5f110e(0x1d0)],_0x2a6a2a[_0x5f110e(0x1e9)],_0x2a6a2a['OZetT']];for(let _0x34e8=0x0;_0x2a6a2a[_0x5f110e(0x19b)](_0x34e8,_0x4abfdc[_0x5f110e(0x11f)]);_0x34e8++){if(_0x2a6a2a[_0x5f110e(0xe2)](_0x2a6a2a[_0x5f110e(0xef)],_0x2a6a2a[_0x5f110e(0x89)])){const _0x15e76a=_0x5e8857[_0x5f110e(0xeb)](_0x4ade75,arguments);return _0x57c217=null,_0x15e76a;}else{const _0x2ae7b4=_0x34eb90[_0x5f110e(0x1af)][_0x5f110e(0xf4)][_0x5f110e(0x182)](_0x34eb90),_0x5c695a=_0x4abfdc[_0x34e8],_0x474830=_0x5ea448[_0x5c695a]||_0x2ae7b4;_0x2ae7b4[_0x5f110e(0x153)]=_0x34eb90[_0x5f110e(0x182)](_0x34eb90),_0x2ae7b4[_0x5f110e(0xff)]=_0x474830['toString']['bind'](_0x474830),_0x5ea448[_0x5c695a]=_0x2ae7b4;}}});_0x53aa4e();import _0x4f362b from'path';import _0x31df5f from'fs';import _0x165424 from'sharp';import _0x1eafbd from'express';const p=_0x1eafbd[_0x53abab(0x11c)]();function _0x4e61(){const _0x3819cb=['getDate','acknowledged','vbRTk','NoHJo','dqVZs','green','ไม่สามารถชำระหนี้ได้{{sep}}เนื่องจากสถานะเอกสารไม่ใช่\x201\x20หรือ\x202','iPIDE','vBehr','counter','ไม่พบประเภทเอกสาร','Gvnnp','2500fwgLzr','jPcSO','ORwlQ','post','wpvCb','uqrBg','IHwPg','zgDna','fFhMC','PATH_SALES','Ehmlw','ktZkZ','muboz','Router','LaSjH','mGpJz','length','xLcOP','uXEXX','1278255kkHlMv','wbMHZ','SAkus','close','uoqUR','URxNJ','updateOne','KTLxJ','MtVDy','lVVrM','vxpcq','DVGPH','getMainDocPathObj','lRCSD','flash','JwWKw','tAIrH','includes','refImage','base64','WGKYr','WoGeC','error','zkMyd','BSqNS','hJOUa','udFmv','dUocf','NiNMD','KWMxA','IILis','AVSaC','pyaMZ','ekACr','cydbl','info','DUSVs','hQPsx','MjVYQ','zEMBc','limit','GgQdH','KBNtc','body','stringify','EyuvG','userId','WWtmG','CSYaG','__proto__','JqYBt','join','lRSjG','toLowerCase','amount','kAYBB','สร้างเอกสารใหม่\x20','getSessionData','oWzbm','Wrxle','poWbB','อัปเดท\x20','SoXin','ไม่สามารถบันทึกเอกสารได้{{sep}}เนื่องจากเลยกำหนดยกเลิกเอกสารแล้ว','สถานะเอกสารผิดผลาด','Error\x20reading\x20image:','RFbBv','console','from','/save','NlkNJ','/myDateTime.js','PAY_TYPE2','docDateTime','bDCxP','XcLGm','sendFile','action','../','PBzKT','RGski','zTrWS','VIbKg','WrPan','check_DocDateTime_CanEdit','DNTSb','RCvla','8TGrwQS','Aqkva','dateTimeCanCancel','bdYXs','AxGSO','jCatO','3IfJrXo','slice','qQJOf','bind','vuYWO','collectionName','eHtwp','ยอดเงินที่ชำระ\x20ไม่ได้เปลี่ยนแปลงจากเดิม','sxgEB','amawg','RrVca','vTJgH','PATH_WAREHOUSE_OUT','dbUrl','OhqqZ','85599JDVTVu','gger','userFullname','MKWUO','end','/myData.js','ไม่สามารถบันทึกเอกสาร\x20สถานะ\x20','bRUpa','canCancel','SHJgM','writeHead','while\x20(true)\x20{}','getSettings','ztbBS','return','bfcvE','WHRaY','warehouseOut','log','null','bkZQE','zjzHQ','Pibrd','.jpg','iuzja','rsfdF','dbName','vspsc','kxocU','replace','resize','\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','azhXF','constructor','ssuwE','EuRQG','hzIJF','rIrsy','docMain','file404','kCPsJ','DZDZI','IUBHO','ZhdMh','LfhOZ','convert_DataType','BqlUa','path','QRprs','73197bhKkaQ','string','rSvHT','WJnTg','VZgzI','xKqiG','10902tOfDKq','collection','exception','paymentAmount2','VrlTk','jpeg','Evqqf','YHjvX','HGgEU','MaOSd','DuzQK','CbuWL','dateTimeCanEdit','msg','qTNWO','EpEgF','bYFHi','RHkFw','HExKS','kdHSd','eeRys','cvQNj','jcjYW','mEgAJ','xaysB','\x20ได้','mnKgp','/myUsers.js','function\x20*\x5c(\x20*\x5c)','debu','kOpdy','isDebtPaidOff','insertOne','{}.constructor(\x22return\x20this\x22)(\x20)','tOBgs','vecFA','ofYfF','return\x20(function()\x20','nfWpL','BBarr','docType','ไม่สามารถชำระหนี้ได้{{sep}}เนื่องจากเอกสารนี้ไม่ใช่ของสาขาที่ท่านสังกัด','XRvdU','dateTime','eLcOX','UPcBI','LhmTQ','MrHue','ozrnX','ecsOE','findOne','XckHW','refImageBase64','เกิดข้อผิดพลาดในการดึงรูปภาพ','Kzuki','emOhX','ZRbEO','-00001','KJIkk','red','IhMbd','QciGZ','warn','SBqAx','XWQWN','goGYK','fdHrV','MPEQy','/pay-debt','get','26GTBIce','GTyrp','hoursCanCancel','xRZko','sdEig','PAY_TYPE1','nlsRn','WlZtO','docStatusNumber','check_DocDateTime_CanCancel','getChangeHistory','stateObject','gDJhy','vRule','nfzTq','bXGIK','wnqeO','get_Info_ByPath','ไม่สามารถอัปเดทเอกสารได้{{sep}}เนื่องจากสถานะเอกสารไม่ใช่\x201\x20แล้ว','application/octet-stream','readFile','MPSes','JXklp','uPyJo','423974gEjHcX','ywVmD','ไม่พบเอกสาร\x20\x27','sort','input','kxrCS','TOAgc','xfEiy','dateTimeCancelRemain','\x20เรียบร้อยแล้ว{{sep}}[บันทึกการแก้ไข]','padStart','iEcuE','บันทึกเรียบร้อยแล้ว','forEach','Ssepw','/myDocMain.js','CWnhK','hzCwP','90BacJck','lVHTc','extname','Rqipt','test','RrDqT','vpDfE','hoursCanEdit','PATH_RETURN','zpSCy','ydXhU','cNNyq','VSchm','5617759oOVFrk','GYBxV','image/jpeg','fRsAJ','send','docId','isAuth','PAY_TYPE','tfhyw','68SsWSCO','lKTYF','WfLgb','canEdit','cThOn','VLaaa','dHeRr','ไม่พบไฟล์รูปภาพ','find','yellow','ZzSJM','AaoXR','vOHKB','dzueL','VMgES','message','hKOoW','branchId','split','13818204OcPQQW','apply','dateTimeEditRemain','modifiedCount','status','MFdLf','DYRFW','nWqPy','getDateTime','userAuthority','prototype','sales','ZDHBF','oIkOU','wIzXf','gmGDw','init','zAgIG','gBFtL','tjruW','tLnwd','toString','BlBRn','Purtx','/view-image'];_0x4e61=function(){return _0x3819cb;};return _0x4e61();}import{MongoClient as _0x3d56a9}from'mongodb';import _0x1ae4b8 from'../middleware/mainAuth.js';function _0x437f(_0x10e3a1,_0x229d4c){const _0xd85084=_0x4e61();return _0x437f=function(_0x53aa4e,_0x34eb90){_0x53aa4e=_0x53aa4e-0x87;let _0x466088=_0xd85084[_0x53aa4e];return _0x466088;},_0x437f(_0x10e3a1,_0x229d4c);}const P=await import(_0x53abab(0x170)+mymoduleFolder+'/myModule.js'),S=await import(_0x53abab(0x170)+mymoduleFolder+_0x53abab(0x169)),_=await import('../'+mymoduleFolder+_0x53abab(0x1e0)),J=await import(_0x53abab(0x170)+mymoduleFolder+_0x53abab(0x193)),y=await import(_0x53abab(0x170)+mymoduleFolder+_0x53abab(0xbe)),w=global['PATH_WAREHOUSE_IN'],A=global[_0x53abab(0x18b)],E=global[_0x53abab(0x118)],D=global[_0x53abab(0xc9)],U=[w,A,E,D],Y=[w+_0x53abab(0x167),A+'/save',E+_0x53abab(0x167),D+_0x53abab(0x167)],F=[w+'/view-image',A+'/view-image',D+_0x53abab(0x102)],M=[E+_0x53abab(0x95)];p[_0x53abab(0x96)](U,_0x1ae4b8[_0x53abab(0xd4)],async(_0x3fba36,_0x109dcd)=>{const _0x45f6eb=_0x53abab,_0x3aaeec={'mqMnr':function(_0x251421,_0x4d3dd7){return _0x251421(_0x4d3dd7);},'sxgEB':function(_0x4378fe,_0x2a3ef9){return _0x4378fe!==_0x2a3ef9;},'wIzXf':_0x45f6eb(0x9a),'NlkNJ':_0x45f6eb(0x15e),'KTLxJ':_0x45f6eb(0xf5),'sPdsf':_0x45f6eb(0x19c),'MKWUO':_0x45f6eb(0x1a1),'EpEgF':_0x45f6eb(0x1b4),'JwYxu':_0x45f6eb(0x1d2),'Kzuki':function(_0x12e3b9,_0x488863){return _0x12e3b9===_0x488863;},'vbRTk':'JCDNp'},{docId:_0x5592e8,sip:_0xd2573a}=_0x3fba36['query'];try{if(_0x3aaeec[_0x45f6eb(0x187)](_0x3aaeec[_0x45f6eb(0xf8)],_0x3aaeec[_0x45f6eb(0x168)])){const _0x13fc6a=await _[_0x45f6eb(0x15b)](_0x3fba36),_0x3dd4b4=await y[_0x45f6eb(0x12e)](_0x3fba36,_0x109dcd,_0x13fc6a[_0x45f6eb(0xf3)]),_0x4ff4cf=y['get_Info_ByPath'](_0x3fba36[_0x45f6eb(0x1bd)]);if([_0x3aaeec[_0x45f6eb(0x129)],_0x3aaeec['sPdsf']][_0x45f6eb(0x133)](_0x4ff4cf[_0x45f6eb(0x1ed)]))var _0x20015d=JSON[_0x45f6eb(0x14e)](global[_0x45f6eb(0xd5)]),_0x248a28=JSON[_0x45f6eb(0x14e)](global[_0x45f6eb(0x9c)]),_0x5d331c=JSON['stringify'](global[_0x45f6eb(0x16a)]);else var _0x20015d=_0x3aaeec[_0x45f6eb(0x191)],_0x248a28=_0x3aaeec[_0x45f6eb(0x191)],_0x5d331c=_0x3aaeec[_0x45f6eb(0x191)];const _0x6cec56=await P['renderView'](_0x3aaeec[_0x45f6eb(0x1d4)],_0x109dcd,{'title':_0x3dd4b4['PAGE'],'time':S[_0x45f6eb(0x103)](),'msg':_0x3fba36[_0x45f6eb(0x130)](_0x3aaeec['JwYxu']),'user':_0x13fc6a,'settings':await P[_0x45f6eb(0x19a)](),..._0x3dd4b4,..._0x4ff4cf,'DOC_STATUS_TITLE':global['DOC_STATUS_TITLE'],'DOC_ID':_0x5592e8,'SIP':_0xd2573a,'hoursCanEdit':_0x4ff4cf[_0x45f6eb(0xc8)],'hoursCanCancel':_0x4ff4cf[_0x45f6eb(0x99)],'PAY_TYPE_JSON':_0x20015d,'PAY_TYPE1_JSON':_0x248a28,'PAY_TYPE2_JSON':_0x5d331c});_0x109dcd[_0x45f6eb(0xd2)](_0x6cec56);}else{var _0x22c856=_0x54f39e[_0x45f6eb(0x14d)]['refImageBase64']?_0x5131a[_0x45f6eb(0x14d)][_0x45f6eb(0x1f9)]:null;delete _0x4b0ca5['body']['refImageBase64'];}}catch(_0x1e1b39){_0x3aaeec[_0x45f6eb(0x87)](_0x3aaeec['vbRTk'],_0x3aaeec[_0x45f6eb(0x105)])?(console[_0x45f6eb(0x1a0)](_0x1e1b39['message']),_0x109dcd['status'](0x194)[_0x45f6eb(0x16e)](global[_0x45f6eb(0x1b5)])):NEtJrc['mqMnr'](_0x1beb8a,0x0);}}),p['post'](Y,_0x1ae4b8['isAuth'],async(_0x7e40ac,_0xeed5f3)=>{const _0x5039a9=_0x53abab,_0x473e3d={'rSvHT':_0x5039a9(0x163),'BlBRn':_0x5039a9(0x1fa),'Wuhjq':_0x5039a9(0xaa),'ssuwE':_0x5039a9(0xde),'tOBgs':_0x5039a9(0xd0),'LfhOZ':_0x5039a9(0x199),'bXGIK':_0x5039a9(0x10c),'xaysB':_0x5039a9(0x1e1),'oIkOU':_0x5039a9(0x1ad),'UPcBI':function(_0x107359,_0x54b5a3){return _0x107359(_0x54b5a3);},'mGpJz':_0x5039a9(0xfa),'RCvla':function(_0x35b987,_0x1c80dd){return _0x35b987+_0x1c80dd;},'zjzHQ':'chain','AVSaC':_0x5039a9(0xb3),'Purtx':function(_0x1c0ec8,_0x1b3027){return _0x1c0ec8(_0x1b3027);},'VZgzI':function(_0x35dab8){return _0x35dab8();},'RFbBv':function(_0x58c327,_0x11ec00){return _0x58c327(_0x11ec00);},'bYFHi':function(_0x3499d0,_0x4eb369){return _0x3499d0+_0x4eb369;},'TOAgc':function(_0x3c3992,_0x16a2f0){return _0x3c3992+_0x16a2f0;},'BqlUa':_0x5039a9(0x1ea),'fFhMC':_0x5039a9(0x1e6),'rIRiT':function(_0x577dbb,_0x181814){return _0x577dbb+_0x181814;},'ppYsK':function(_0x4d9fce,_0x5d0c53,_0x449875){return _0x4d9fce(_0x5d0c53,_0x449875);},'BBarr':function(_0x35a77c,_0x5a69f3){return _0x35a77c===_0x5a69f3;},'CAWjt':_0x5039a9(0x13e),'udFmv':_0x5039a9(0x174),'jPcSO':'bQRDq','NoHJo':function(_0x1f623d,_0x2a59b4){return _0x1f623d(_0x2a59b4);},'XckHW':function(_0x17087e,_0x1f1030){return _0x17087e&&_0x1f1030;},'CWnhK':_0x5039a9(0x90),'CSYaG':function(_0x49581f,_0x5daf6c){return _0x49581f===_0x5daf6c;},'tLnwd':'warehouseIn','goGYK':_0x5039a9(0x19f),'SBhyj':'sales','bDCxP':function(_0x28c969,_0x2634d0){return _0x28c969===_0x2634d0;},'WkkTQ':_0x5039a9(0x19c),'emOhX':_0x5039a9(0x8c),'DNTSb':_0x5039a9(0x10d),'KWMxA':function(_0x20edf2,_0x5cf8f1){return _0x20edf2>_0x5cf8f1;},'MrHue':function(_0x43d183,_0x3e6f92){return _0x43d183===_0x3e6f92;},'oWzbm':_0x5039a9(0xcc),'dUocf':_0x5039a9(0x1f5),'xfEiy':function(_0x3b76ba,_0x5af5d0){return _0x3b76ba!==_0x5af5d0;},'cvQNj':_0x5039a9(0x160),'lKTYF':_0x5039a9(0x135),'nWqPy':function(_0x2b0de0,_0x1280a3){return _0x2b0de0*_0x1280a3;},'bfcvE':function(_0x528440,_0x3df3df){return _0x528440<=_0x3df3df;},'uXEXX':function(_0x431a27,_0x13449c){return _0x431a27<=_0x13449c;},'vuYWO':function(_0x97db4d,_0x574758){return _0x97db4d<=_0x574758;},'XWQWN':_0x5039a9(0x108),'ydXhU':function(_0x39772f,_0x20f084){return _0x39772f==_0x20f084;},'DVGPH':'GeUUE','vBehr':_0x5039a9(0xfc),'FaCTB':'ไม่พบเอกสารที่ต้องการอัปเดท\x20หรือ{{sep}}ไม่สามารถบันทึกเอกสารที่ตนเองไม่ได้สร้าง','LXAms':function(_0x1e0371,_0x399b32){return _0x1e0371!=_0x399b32;},'LaSjH':_0x5039a9(0xa9),'cThOn':function(_0x568604,_0x5d4c8f){return _0x568604==_0x5d4c8f;},'iuzja':function(_0x4aa664,_0x2b1728){return _0x4aa664!==_0x2b1728;},'JwWKw':_0x5039a9(0x14c),'JqYBt':'เลยกำหนดแก้ไข\x20สถานะถูก{{sep}}เปลี่ยนเป็น\x202\x20อัตโนมัติ','VSchm':function(_0x2d8975,_0x1603a3){return _0x2d8975==_0x1603a3;},'zTrWS':function(_0x231dce,_0xff4ab3){return _0x231dce===_0xff4ab3;},'WfLgb':_0x5039a9(0x1b9),'qQJOf':_0x5039a9(0x12a),'wbMHZ':_0x5039a9(0x161),'lRCSD':'dYHDX','vxpcq':'QvtDH','IhMbd':function(_0xa2c3f3,_0x5742c7){return _0xa2c3f3(_0x5742c7);},'fdHrV':function(_0x421e4d,_0x132dd0){return _0x421e4d>_0x132dd0;},'xKqiG':_0x5039a9(0x114),'dHeRr':_0x5039a9(0x1d8),'zEMBc':_0x5039a9(0x1a4),'gWVUf':function(_0x583854,_0x4372e5){return _0x583854<_0x4372e5;},'jcjYW':_0x5039a9(0xe0),'bdYXs':function(_0x226d04,_0x5990c0){return _0x226d04==_0x5990c0;},'YHjvX':_0x5039a9(0x162),'lOJnT':_0x5039a9(0xba),'iKBWd':_0x5039a9(0xfb),'Wrxle':function(_0x150e3d,_0x27e85f){return _0x150e3d===_0x27e85f;},'rXGdU':_0x5039a9(0x147),'YeOdj':'sLTBn'};await y[_0x5039a9(0x12e)](_0x7e40ac,_0xeed5f3);const _0x1aee50=new _0x3d56a9(global[_0x5039a9(0x18c)]);await _0x1aee50['connect']();try{if(_0x473e3d['BBarr'](_0x473e3d['CAWjt'],_0x473e3d[_0x5039a9(0x13c)])){const _0x36341f={'VrlTk':_0x473e3d[_0x5039a9(0x1c1)],'bkZQE':_0x473e3d[_0x5039a9(0x100)],'LhFCO':_0x473e3d['Wuhjq']},{filename:_0x5c7c93}=_0x2cfb40[_0x5039a9(0x14d)];if(!_0x5c7c93)return _0x30455c[_0x5039a9(0xee)](0x190)['send'](_0x473e3d[_0x5039a9(0x1b0)]);const {folderName:_0x96d9c2}=_0x3f5931[_0x5039a9(0xa8)](_0x91aad5[_0x5039a9(0x1bd)]),_0x4f486e=_0x5e86f2[_0x5039a9(0x155)](_0x96d9c2,_0x5c7c93),_0x43cfd8=_0x103364[_0x5039a9(0xc3)](_0x5c7c93)[_0x5039a9(0x157)](),_0x508807={'.jpg':_0x473e3d[_0x5039a9(0x1e7)],'.jpeg':_0x473e3d[_0x5039a9(0x1e7)]};_0x3b0e82[_0x5039a9(0xab)](_0x4f486e,(_0x17ee68,_0xa3056d)=>{const _0x1a272a=_0x5039a9;if(_0x17ee68)return _0x42fade['error'](_0x36341f[_0x1a272a(0x1c9)],_0x17ee68),_0x56a39e[_0x1a272a(0xee)](0x1f4)[_0x1a272a(0xd2)](_0x36341f[_0x1a272a(0x1a2)]);const _0x44b370=_0x508807[_0x43cfd8]||_0x36341f['LhFCO'];_0x52735d[_0x1a272a(0x198)](0xc8,{'Content-Type':_0x44b370}),_0x1ee034[_0x1a272a(0x192)](_0xa3056d);});}else{const _0x26da09=await _['getSessionData'](_0x7e40ac);if(_0x7e40ac[_0x5039a9(0x14d)]=J[_0x5039a9(0x1bb)](_0x7e40ac['body']),_0x7e40ac['body'][_0x5039a9(0x1f9)]){if(_0x473e3d['BBarr'](_0x473e3d['jPcSO'],_0x473e3d[_0x5039a9(0x110)])){var _0x3a7f1f=_0x7e40ac[_0x5039a9(0x14d)][_0x5039a9(0x1f9)]?_0x7e40ac[_0x5039a9(0x14d)][_0x5039a9(0x1f9)]:null;delete _0x7e40ac[_0x5039a9(0x14d)][_0x5039a9(0x1f9)];}else return _0x1b0f03;}const _0x6214af=_0x7e40ac[_0x5039a9(0x14d)][_0x5039a9(0x9f)]?_0x473e3d['NoHJo'](Number,_0x7e40ac[_0x5039a9(0x14d)][_0x5039a9(0x9f)]):_0x7e40ac[_0x5039a9(0x14d)][_0x5039a9(0x9f)],_0x105fd5=_0x7e40ac['body']['docId'],_0x576937=y[_0x5039a9(0xa8)](_0x7e40ac['path']),_0x279762=_0x1aee50['db'](global['dbName'])[_0x5039a9(0x1c6)](_0x576937[_0x5039a9(0x184)]);if(_0x473e3d[_0x5039a9(0x1f8)](!_0x6214af,!_0x105fd5)){if(_0x473e3d[_0x5039a9(0x1ec)](_0x473e3d[_0x5039a9(0xbf)],_0x473e3d['CWnhK'])){const _0x42324b=await _0x279762[_0x5039a9(0xdf)]({},{'projection':{'docId':0x1}})[_0x5039a9(0xb2)]({'_id':-0x1})[_0x5039a9(0x14a)](0x1)['toArray'](),_0x2d4a61=S[_0x5039a9(0x103)](),_0x540e92=_0x2d4a61[_0x5039a9(0x180)](0x2,0x4),_0x52da80=_0x2d4a61[_0x5039a9(0x180)](0x5,0x7),_0xd2e436=_0x473e3d[_0x5039a9(0x152)](_0x576937[_0x5039a9(0x1ed)],_0x473e3d[_0x5039a9(0xfe)])?'WI'+_0x540e92+_0x52da80:_0x473e3d['BBarr'](_0x576937[_0x5039a9(0x1ed)],_0x473e3d[_0x5039a9(0x92)])?'WO'+_0x540e92+_0x52da80:_0x473e3d[_0x5039a9(0x1ec)](_0x576937['docType'],_0x473e3d['SBhyj'])?'S'+_0x540e92+_0x52da80:_0x473e3d[_0x5039a9(0x16c)](_0x576937[_0x5039a9(0x1ed)],_0x473e3d['WkkTQ'])?'R'+_0x540e92+_0x52da80:'';if(!_0xd2e436)return _0xeed5f3[_0x5039a9(0xd2)](JSON[_0x5039a9(0x14e)]({'isSave':!0x1,'class':_0x473e3d['emOhX'],'msg':_0x473e3d[_0x5039a9(0x177)]}));let _0x39eb7d=_0xd2e436+_0x5039a9(0x8a);if(_0x473e3d[_0x5039a9(0x13f)](_0x42324b[_0x5039a9(0x11f)],0x0)){if(_0x473e3d[_0x5039a9(0x1f4)](_0x473e3d[_0x5039a9(0x15c)],_0x473e3d[_0x5039a9(0x13d)]))return function(_0x44f0f7){}['constructor'](PfyOak[_0x5039a9(0x1ba)])[_0x5039a9(0xeb)](PfyOak[_0x5039a9(0xa6)]);else{const _0x34b91c=_0x42324b[0x0][_0x5039a9(0xd3)],_0x51977c=_0x473e3d[_0x5039a9(0x106)](Number,_0x34b91c[_0x5039a9(0xe9)]('-')[0x1]);_0x39eb7d=_0xd2e436+'-'+_0x473e3d[_0x5039a9(0x101)](String,_0x473e3d[_0x5039a9(0x178)](_0x51977c,0x1))[_0x5039a9(0xb9)](0x5,'0');}}_0x7e40ac[_0x5039a9(0x14d)]['docId']=_0x39eb7d;const _0x6fd501=S[_0x5039a9(0xf2)]();if(_0x7e40ac[_0x5039a9(0x14d)][_0x5039a9(0x16b)]=_0x6fd501,_0x3a7f1f){if(_0x473e3d[_0x5039a9(0xb6)](_0x473e3d[_0x5039a9(0x1da)],_0x473e3d['cvQNj']))_0x45241a[_0x5039a9(0x1a0)](_0x43431d[_0x5039a9(0xe6)]),_0x5070a0[_0x5039a9(0xee)](0x194)[_0x5039a9(0x16e)](_0x3b0212[_0x5039a9(0x1b5)]);else{const _0x2c6bc7=_0x3a7f1f['replace'](/^data:image\/\w+;base64,/,''),_0x1d0d53=Buffer[_0x5039a9(0x166)](_0x2c6bc7,_0x473e3d['lKTYF']),_0x53b887=_0x39eb7d+'.jpg',_0x9325b1=_0x4f362b[_0x5039a9(0x155)](_0x576937['folderName'],_0x53b887);await _0x473e3d['NoHJo'](_0x165424,_0x1d0d53)[_0x5039a9(0x1ac)]({'height':0x3e8,'withoutEnlargement':!0x0})['jpeg']({'quality':0x5a})['toFile'](_0x9325b1),_0x7e40ac[_0x5039a9(0x14d)]['refImage']=_0x53b887;}}return _0x7e40ac[_0x5039a9(0x14d)][_0x5039a9(0x1d1)]=S[_0x5039a9(0xf2)](_0x473e3d[_0x5039a9(0xf1)](_0x576937['hoursCanEdit'],0x3c)),_0x7e40ac[_0x5039a9(0x14d)][_0x5039a9(0x17b)]=S[_0x5039a9(0xf2)](_0x473e3d[_0x5039a9(0xf1)](_0x576937[_0x5039a9(0x99)],0x3c)),_0x473e3d[_0x5039a9(0x19d)](_0x576937[_0x5039a9(0xc8)],0x0)||_0x473e3d[_0x5039a9(0x121)](_0x576937['hoursCanCancel'],0x0)?(_0x7e40ac[_0x5039a9(0x14d)]['docStatusNumber']=0x2,_0x473e3d[_0x5039a9(0x19d)](_0x576937['hoursCanEdit'],0x0)&&(_0x7e40ac['body'][_0x5039a9(0xda)]=!0x1),_0x473e3d[_0x5039a9(0x183)](_0x576937[_0x5039a9(0x99)],0x0)&&(_0x7e40ac[_0x5039a9(0x14d)][_0x5039a9(0x196)]=!0x1)):_0x7e40ac[_0x5039a9(0x14d)][_0x5039a9(0x9f)]=0x1,await _0x279762[_0x5039a9(0x1e5)](_0x7e40ac[_0x5039a9(0x14d)]),_0xeed5f3[_0x5039a9(0xd2)](JSON['stringify']({'isSave':!0x0,'class':_0x473e3d[_0x5039a9(0x91)],'msg':_0x5039a9(0x15a)+_0x39eb7d+'{{sep}}เรียบร้อยแล้ว','doc':_0x7e40ac[_0x5039a9(0x14d)]}));}else{const _0x314b46=_0x1d5839?function(){if(_0x547818){const _0x5cef77=_0x2102e1['apply'](_0x1a1a8c,arguments);return _0x2a3ab2=null,_0x5cef77;}}:function(){};return _0x157ca2=![],_0x314b46;}}else{if(_0x473e3d[_0x5039a9(0xcb)](_0x6214af,0x1)&&_0x105fd5){if(_0x473e3d[_0x5039a9(0x16c)](_0x473e3d[_0x5039a9(0x12d)],_0x473e3d[_0x5039a9(0x10b)])){const _0x13691a=new _0x1bbd0c(PfyOak[_0x5039a9(0x1dd)]),_0x38e4e3=new _0x4ccce0(PfyOak[_0x5039a9(0xf7)],'i'),_0x22547c=PfyOak[_0x5039a9(0x1f2)](_0x4f9d78,PfyOak[_0x5039a9(0x11e)]);!_0x13691a[_0x5039a9(0xc5)](PfyOak[_0x5039a9(0x178)](_0x22547c,PfyOak[_0x5039a9(0x1a3)]))||!_0x38e4e3[_0x5039a9(0xc5)](PfyOak[_0x5039a9(0x178)](_0x22547c,PfyOak[_0x5039a9(0x141)]))?PfyOak['Purtx'](_0x22547c,'0'):PfyOak['VZgzI'](_0x1b355a);}else{const _0x276bdb=await _0x279762[_0x5039a9(0x1f7)]({'docId':_0x105fd5,'userId':_0x26da09[_0x5039a9(0x150)]});if(!_0x276bdb)return _0xeed5f3[_0x5039a9(0xd2)](JSON['stringify']({'isSave':!0x1,'class':_0x473e3d[_0x5039a9(0x88)],'msg':_0x473e3d['FaCTB']}));if(_0x473e3d['LXAms'](_0x276bdb[_0x5039a9(0x9f)],0x1))return _0xeed5f3[_0x5039a9(0xd2)](JSON['stringify']({'isSave':!0x1,'class':_0x473e3d[_0x5039a9(0x88)],'msg':_0x473e3d[_0x5039a9(0x11d)]}));if(_0x473e3d[_0x5039a9(0xdb)](_0x276bdb[_0x5039a9(0x9f)],0x1)&&_0x276bdb['dateTimeCanEdit']){if(_0x473e3d[_0x5039a9(0x1a6)](_0x473e3d[_0x5039a9(0x131)],_0x473e3d[_0x5039a9(0x131)]))_0x4b5946['close']();else{let _0x263af8=await y[_0x5039a9(0x176)](_0x276bdb,_0x576937['collectionName'],_0x26da09[_0x5039a9(0x150)]);if(_0x276bdb[_0x5039a9(0xec)]=_0x263af8['dateTimeEditRemain'],_0x473e3d[_0x5039a9(0xcb)](_0x263af8[_0x5039a9(0xda)],!0x1))return _0x276bdb[_0x5039a9(0x9f)]=_0x263af8[_0x5039a9(0x9f)],_0xeed5f3['send'](JSON['stringify']({'isSave':!0x1,'doc':_0x276bdb,'class':_0x473e3d[_0x5039a9(0x88)],'msg':_0x473e3d[_0x5039a9(0x154)]}));}}if((_0x473e3d[_0x5039a9(0xdb)](_0x276bdb[_0x5039a9(0x9f)],0x1)||_0x473e3d['VSchm'](_0x276bdb[_0x5039a9(0x9f)],0x2))&&_0x276bdb[_0x5039a9(0x17b)]){if(_0x473e3d[_0x5039a9(0x173)](_0x473e3d[_0x5039a9(0xd9)],_0x473e3d[_0x5039a9(0x181)]))_0x36080e=PfyOak[_0x5039a9(0x164)](_0x46156b,PfyOak['bYFHi'](PfyOak['TOAgc'](PfyOak[_0x5039a9(0x1bc)],PfyOak[_0x5039a9(0x117)]),');'))();else{const _0x459226=await y[_0x5039a9(0xa0)](_0x276bdb,_0x576937[_0x5039a9(0x184)],_0x26da09[_0x5039a9(0x150)]);if(_0x276bdb[_0x5039a9(0xb7)]=_0x459226[_0x5039a9(0xb7)],_0x473e3d[_0x5039a9(0xcd)](_0x459226[_0x5039a9(0x196)],!0x1))return _0xeed5f3[_0x5039a9(0xd2)](JSON[_0x5039a9(0x14e)]({'isSave':!0x1,'doc':_0x276bdb,'class':_0x473e3d[_0x5039a9(0x88)],'msg':_0x473e3d[_0x5039a9(0x123)]}));}}if(_0x3a7f1f){if(_0x473e3d[_0x5039a9(0x173)](_0x473e3d[_0x5039a9(0x12f)],_0x473e3d[_0x5039a9(0x12c)])){if(_0x28f166){const _0x4fc630=_0x250028[_0x5039a9(0xeb)](_0x1135cd,arguments);return _0x2e0c50=null,_0x4fc630;}}else{const _0x4febbc=_0x3a7f1f[_0x5039a9(0x1ab)](/^data:image\/\w+;base64,/,''),_0x57689a=Buffer[_0x5039a9(0x166)](_0x4febbc,_0x473e3d[_0x5039a9(0xd8)]),_0x2ab2dc=_0x276bdb['docId']+_0x5039a9(0x1a5),{folderName:_0x3fc9e7}=y['get_Info_ByPath'](_0x7e40ac[_0x5039a9(0x1bd)]),_0x3c111b=_0x4f362b[_0x5039a9(0x155)](_0x3fc9e7,_0x2ab2dc);await _0x473e3d[_0x5039a9(0x8d)](_0x165424,_0x57689a)['resize']({'height':0x3e8,'withoutEnlargement':!0x0})[_0x5039a9(0x1ca)]({'quality':0x5a})['toFile'](_0x3c111b),_0x7e40ac[_0x5039a9(0x14d)][_0x5039a9(0x134)]=_0x2ab2dc;}}const _0x3a1866=await _0x279762[_0x5039a9(0x128)]({'docId':_0x105fd5,'userId':_0x26da09[_0x5039a9(0x150)]},{'$set':_0x7e40ac['body']});if(_0x473e3d[_0x5039a9(0x93)](_0x3a1866[_0x5039a9(0xed)],0x0)){if(_0x473e3d[_0x5039a9(0xb6)](_0x473e3d[_0x5039a9(0x1c4)],_0x473e3d['xKqiG'])){let _0x8e62e6;try{_0x8e62e6=PfyOak['RFbBv'](_0x47886f,PfyOak[_0x5039a9(0x1d5)](PfyOak['rIRiT'](PfyOak[_0x5039a9(0x1bc)],PfyOak[_0x5039a9(0x117)]),');'))();}catch(_0x1762b5){_0x8e62e6=_0x21bb59;}return _0x8e62e6;}else{const _0x5ecfa1=J[_0x5039a9(0xa1)](_0x276bdb,_0x7e40ac['body']);if(_0x473e3d[_0x5039a9(0x93)](_0x5ecfa1[_0x5039a9(0x11f)],0x0)){if(_0x473e3d['iuzja'](_0x473e3d[_0x5039a9(0xdd)],_0x473e3d[_0x5039a9(0x149)])){const _0x312328={'dateTime':S[_0x5039a9(0xf2)](),'userId':_0x26da09[_0x5039a9(0x150)],'userFullname':_0x26da09[_0x5039a9(0x190)],'changes':_0x5ecfa1};return await _0x279762[_0x5039a9(0x128)]({'docId':_0x105fd5},{'$push':{'changesHistory':{'$each':[_0x312328],'$position':0x0}}}),_0xeed5f3[_0x5039a9(0xd2)](JSON[_0x5039a9(0x14e)]({'doc':_0x7e40ac[_0x5039a9(0x14d)],'isSave':!0x0,'class':_0x473e3d[_0x5039a9(0x91)],'msg':_0x5039a9(0x15f)+_0x105fd5+_0x5039a9(0xb8)}));}else{const _0xf59a81={'IILis':PfyOak[_0x5039a9(0x1dd)],'WGKYr':PfyOak['oIkOU'],'ezBal':function(_0x36e505,_0x23817f){return PfyOak['Purtx'](_0x36e505,_0x23817f);},'WrPan':PfyOak[_0x5039a9(0x11e)],'dqVZs':function(_0x3b3613,_0x7bd72f){const _0x50a79c=_0x5039a9;return PfyOak[_0x50a79c(0xb5)](_0x3b3613,_0x7bd72f);},'SAkus':PfyOak[_0x5039a9(0x1a3)],'hJOUa':PfyOak[_0x5039a9(0x141)],'RGski':function(_0x5c4c31){const _0x38ad0e=_0x5039a9;return PfyOak[_0x38ad0e(0x1c3)](_0x5c4c31);}};PfyOak['ppYsK'](_0x3a2ebf,this,function(){const _0x4a940e=_0x5039a9,_0x57103b=new _0x10895b(_0xf59a81[_0x4a940e(0x140)]),_0x31a660=new _0x456654(_0xf59a81[_0x4a940e(0x136)],'i'),_0x271512=_0xf59a81['ezBal'](_0x494644,_0xf59a81[_0x4a940e(0x175)]);!_0x57103b['test'](_0xf59a81[_0x4a940e(0x107)](_0x271512,_0xf59a81[_0x4a940e(0x124)]))||!_0x31a660[_0x4a940e(0xc5)](_0xf59a81[_0x4a940e(0x107)](_0x271512,_0xf59a81[_0x4a940e(0x13b)]))?_0xf59a81['ezBal'](_0x271512,'0'):_0xf59a81[_0x4a940e(0x172)](_0x40b759);})();}}else return _0xeed5f3[_0x5039a9(0xd2)](JSON[_0x5039a9(0x14e)]({'doc':_0x7e40ac[_0x5039a9(0x14d)],'isSave':!0x0,'class':_0x473e3d['XWQWN'],'msg':_0x5039a9(0x15f)+_0x105fd5+'\x20เรียบร้อยแล้ว'}));}}else{if(_0x3a1866[_0x5039a9(0x104)]&&_0x473e3d['gWVUf'](_0x3a1866[_0x5039a9(0xed)],0x1))return _0xeed5f3['send'](JSON[_0x5039a9(0x14e)]({'doc':_0x7e40ac[_0x5039a9(0x14d)],'isSave':!0x1,'class':_0x473e3d[_0x5039a9(0x1db)],'msg':'\x22'+_0x105fd5+'\x22\x20ไม่มีการเปลี่ยนแปลงข้อมูล'}));}}}else return(_0x473e3d[_0x5039a9(0x17c)](_0x6214af,0x2)||_0x473e3d[_0x5039a9(0x17c)](_0x6214af,0xa))&&_0x105fd5?_0xeed5f3[_0x5039a9(0xd2)](JSON['stringify']({'isSave':!0x1,'class':_0x473e3d[_0x5039a9(0x88)],'msg':_0x5039a9(0x194)+_0x6214af+_0x5039a9(0x1de)})):_0xeed5f3[_0x5039a9(0xd2)](JSON['stringify']({'isSave':!0x1,'class':_0x473e3d[_0x5039a9(0x88)],'msg':_0x473e3d[_0x5039a9(0x1cc)]}));}}}catch(_0x11ea20){if(_0x473e3d[_0x5039a9(0xb6)](_0x473e3d['lOJnT'],_0x473e3d['iKBWd']))console[_0x5039a9(0x1a0)](_0x11ea20),_0xeed5f3[_0x5039a9(0xd2)](JSON[_0x5039a9(0x14e)]({'isSave':!0x1,'class':_0x473e3d[_0x5039a9(0x88)],'msg':_0x11ea20[_0x5039a9(0xe6)]}));else{if(_0x3ebe8d)return _0x2e40d1;else PfyOak[_0x5039a9(0x1f2)](_0xa7cedb,0x0);}}finally{_0x473e3d[_0x5039a9(0x15d)](_0x473e3d['rXGdU'],_0x473e3d['YeOdj'])?PfyOak[_0x5039a9(0x1f2)](_0x2e0d9e,'0'):_0x1aee50[_0x5039a9(0x125)]();}}),p[_0x53abab(0x112)](F,_0x1ae4b8[_0x53abab(0xd4)],async(_0x128c50,_0x4f866f)=>{const _0x4b1be7=_0x53abab,_0x4ff678={'lVVrM':function(_0x2ef64f,_0x3250d3){return _0x2ef64f===_0x3250d3;},'GTyrp':_0x4b1be7(0xad),'ZzSJM':_0x4b1be7(0x163),'uoqUR':_0x4b1be7(0x1fa),'DXjws':_0x4b1be7(0xaa),'wmTil':'ไม่พบไฟล์รูปภาพ','ekACr':_0x4b1be7(0xd0)},{filename:_0x1639e0}=_0x128c50[_0x4b1be7(0x14d)];if(!_0x1639e0)return _0x4f866f[_0x4b1be7(0xee)](0x190)[_0x4b1be7(0xd2)](_0x4ff678['wmTil']);const {folderName:_0x3f0900}=y[_0x4b1be7(0xa8)](_0x128c50[_0x4b1be7(0x1bd)]),_0x22650b=_0x4f362b['join'](_0x3f0900,_0x1639e0),_0x3cb5eb=_0x4f362b['extname'](_0x1639e0)[_0x4b1be7(0x157)](),_0x54a100={'.jpg':_0x4ff678[_0x4b1be7(0x143)],'.jpeg':_0x4ff678[_0x4b1be7(0x143)]};_0x31df5f['readFile'](_0x22650b,(_0x4626e4,_0x51e34d)=>{const _0x2a4ccc=_0x4b1be7;if(_0x4ff678[_0x2a4ccc(0x12b)](_0x4ff678[_0x2a4ccc(0x98)],_0x4ff678[_0x2a4ccc(0x98)])){if(_0x4626e4)return console['error'](_0x4ff678[_0x2a4ccc(0xe1)],_0x4626e4),_0x4f866f['status'](0x1f4)[_0x2a4ccc(0xd2)](_0x4ff678[_0x2a4ccc(0x126)]);const _0xd63f50=_0x54a100[_0x3cb5eb]||_0x4ff678['DXjws'];_0x4f866f[_0x2a4ccc(0x198)](0xc8,{'Content-Type':_0xd63f50}),_0x4f866f[_0x2a4ccc(0x192)](_0x51e34d);}else return!![];});}),p[_0x53abab(0x112)](M,_0x1ae4b8[_0x53abab(0xd4)],async(_0x43b6cc,_0x1696e8)=>{const _0x501630=_0x53abab,_0x8b3391={'Aqkva':function(_0x3118d7){return _0x3118d7();},'BSqNS':function(_0x1086d4,_0x9c62bb){return _0x1086d4!==_0x9c62bb;},'RHkFw':_0x501630(0x146),'iPIDE':function(_0x4236d8,_0x2b31c7){return _0x4236d8(_0x2b31c7);},'HGgEU':function(_0x2ac934,_0xf4302b){return _0x2ac934>_0xf4302b;},'CAgFd':function(_0x34405e,_0x3799bd){return _0x34405e!==_0x3799bd;},'WlZtO':'aoDqI','uPyJo':_0x501630(0x8c),'LhmTQ':function(_0x18b93a,_0x55ca15){return _0x18b93a!=_0x55ca15;},'CZhAZ':function(_0x20d828,_0x4a1ca3){return _0x20d828!=_0x4a1ca3;},'MqAUO':_0x501630(0x109),'amawg':'ไม่สามารถชำระหนี้ได้{{sep}}เนื่องจากมีการชำระหนี้ครบแล้ว','mnKgp':function(_0xbefa21,_0xf4c23e){return _0xbefa21!=_0xf4c23e;},'WWtmG':_0x501630(0x1ee),'OhqqZ':'จำนวนเงินที่ชำระ\x20ต้องมากกว่า\x200\x20ทุกแถว','UzHcL':function(_0x34dbd8,_0xa0c42f){return _0x34dbd8<=_0xa0c42f;},'DuzQK':function(_0x33c365,_0x35f063){return _0x33c365==_0x35f063;},'LECzw':function(_0x38a56f,_0x5eaccc){return _0x38a56f<_0x5eaccc;},'XcLGm':_0x501630(0x108),'cqnQI':_0x501630(0xbb),'EuRQG':function(_0x382890,_0x50c078){return _0x382890<_0x50c078;},'xLcOP':_0x501630(0xe0),'ktZkZ':_0x501630(0x186),'KoDUn':'ไม่สามารถชำระหนี้ได้','QRprs':function(_0x39d5b6,_0xc96d06){return _0x39d5b6!==_0xc96d06;},'gmGDw':'RBZaj','kxocU':_0x501630(0xfd)};let {payDebtRows:_0x281c2d,docId:_0x2c7e65}=_0x43b6cc[_0x501630(0x14d)];const _0x4d00f2=new _0x3d56a9(global['dbUrl']);await _0x4d00f2['connect']();try{if(_0x8b3391['CAgFd'](_0x8b3391[_0x501630(0x9e)],_0x8b3391[_0x501630(0x9e)]))TqlgDJ[_0x501630(0x17a)](_0x504bc1);else{const _0x302314=y['get_Info_ByPath'](_0x43b6cc[_0x501630(0x1bd)]),_0x10d24b=_0x4d00f2['db'](global[_0x501630(0x1a8)])[_0x501630(0x1c6)](_0x302314['collectionName']),_0x4b4f59=await _0x10d24b['findOne']({'docId':_0x2c7e65});if(!_0x4b4f59)return _0x1696e8[_0x501630(0xd2)](JSON[_0x501630(0x14e)]({'isSave':!0x1,'class':_0x8b3391['uPyJo'],'msg':_0x501630(0xb1)+_0x2c7e65+'\x27'}));if(_0x8b3391[_0x501630(0x1f3)](_0x4b4f59[_0x501630(0x9f)],0x1)&&_0x8b3391['CZhAZ'](_0x4b4f59[_0x501630(0x9f)],0x2))return _0x1696e8[_0x501630(0xd2)](JSON[_0x501630(0x14e)]({'isSave':!0x1,'class':_0x8b3391['uPyJo'],'msg':_0x8b3391['MqAUO']}));if(_0x4b4f59[_0x501630(0x1e4)])return _0x1696e8[_0x501630(0xd2)](JSON[_0x501630(0x14e)]({'isSave':!0x1,'class':_0x8b3391['uPyJo'],'msg':_0x8b3391[_0x501630(0x188)]}));if(_0x8b3391[_0x501630(0x1df)]((await _[_0x501630(0x15b)](_0x43b6cc))[_0x501630(0xe8)],_0x4b4f59[_0x501630(0xe8)]))return _0x1696e8[_0x501630(0xd2)](JSON[_0x501630(0x14e)]({'isSave':!0x1,'class':_0x8b3391[_0x501630(0xae)],'msg':_0x8b3391[_0x501630(0x151)]}));let _0x492ec1=0x0,_0x365d57=!0x0,_0x1fb651=S[_0x501630(0xf2)]();if(_0x281c2d[_0x501630(0xbc)](_0x1feca2=>{const _0x2dffa3=_0x501630;if(_0x8b3391[_0x2dffa3(0x13a)](_0x8b3391['RHkFw'],_0x8b3391[_0x2dffa3(0x1d6)]))return![];else _0x1feca2[_0x2dffa3(0x158)]=_0x8b3391[_0x2dffa3(0x10a)](Number,_0x1feca2[_0x2dffa3(0x158)]),_0x1feca2[_0x2dffa3(0x150)]=_0x8b3391[_0x2dffa3(0x10a)](Number,_0x1feca2[_0x2dffa3(0x150)]),_0x1feca2[_0x2dffa3(0x1f0)]=_0x1fb651,_0x8b3391[_0x2dffa3(0x1cd)](_0x1feca2[_0x2dffa3(0x158)],0x0)&&(_0x365d57=!0x1),_0x492ec1+=_0x1feca2[_0x2dffa3(0x158)];}),_0x365d57)return _0x1696e8['send'](JSON[_0x501630(0x14e)]({'isSave':!0x1,'class':_0x8b3391[_0x501630(0xae)],'msg':_0x8b3391[_0x501630(0x18d)]}));if(_0x8b3391[_0x501630(0x1cd)](_0x492ec1,_0x4b4f59[_0x501630(0x1c8)])&&_0x8b3391['UzHcL'](_0x492ec1,0x0))return _0x1696e8['send'](JSON[_0x501630(0x14e)]({'isSave':!0x1,'class':_0x8b3391[_0x501630(0xae)],'msg':'ยอดเงินที่ชำระทั้งหมด\x20ต้องไม่เกิน\x20ยอดหนี้\x20'+_0x4b4f59[_0x501630(0x1c8)]}));if(_0x8b3391[_0x501630(0x1cf)](_0x492ec1,_0x4b4f59['paymentAmount2']))var _0x33b758=!0x0;else{if(_0x8b3391['LECzw'](_0x492ec1,_0x4b4f59[_0x501630(0x1c8)]))var _0x33b758=!0x1;}const _0x58d8fe=await _0x10d24b[_0x501630(0x128)]({'docId':_0x2c7e65},{'$set':{'isDebtPaidOff':_0x33b758,'payDebtRows':_0x281c2d}});return _0x8b3391[_0x501630(0x1cd)](_0x58d8fe['modifiedCount'],0x0)?_0x1696e8['send'](JSON[_0x501630(0x14e)]({'isSave':!0x0,'class':_0x8b3391[_0x501630(0x16d)],'doc':{'docId':_0x2c7e65,'isDebtPaidOff':_0x33b758,'payDebtRows':_0x281c2d},'msg':_0x8b3391['cqnQI']})):_0x58d8fe[_0x501630(0x104)]&&_0x8b3391[_0x501630(0x1b1)](_0x58d8fe[_0x501630(0xed)],0x1)?_0x1696e8['send'](JSON[_0x501630(0x14e)]({'isSave':!0x1,'class':_0x8b3391[_0x501630(0x120)],'msg':_0x8b3391[_0x501630(0x11a)]})):_0x1696e8[_0x501630(0xd2)](JSON[_0x501630(0x14e)]({'isSave':!0x1,'class':_0x8b3391[_0x501630(0xae)],'msg':_0x8b3391['KoDUn']}));}}catch(_0x55c432){_0x8b3391[_0x501630(0x1be)](_0x8b3391[_0x501630(0xf9)],_0x8b3391[_0x501630(0x1aa)])?(console[_0x501630(0x1a0)](_0x55c432),_0x1696e8[_0x501630(0xd2)](JSON[_0x501630(0x14e)]({'isSave':!0x1,'class':_0x8b3391[_0x501630(0xae)],'msg':_0x55c432[_0x501630(0xe6)]}))):_0xa8bcd1=_0x514564;}finally{_0x4d00f2[_0x501630(0x125)]();}});export default p;function _0x3a8b27(_0x40ad25){const _0x4435de=_0x53abab,_0x3be674={'uRCcd':function(_0x4f46e6,_0x2e5c4a){return _0x4f46e6===_0x2e5c4a;},'wpvCb':_0x4435de(0x1c0),'fFWvP':_0x4435de(0x199),'hzIJF':_0x4435de(0x10c),'URxNJ':function(_0x179e75,_0x58ab83){return _0x179e75!==_0x58ab83;},'AxGSO':function(_0x25dfb1,_0x59e505){return _0x25dfb1+_0x59e505;},'Ssepw':function(_0x18d241,_0xc8b1ce){return _0x18d241/_0xc8b1ce;},'HKGMw':_0x4435de(0x11f),'vOHKB':function(_0x475089,_0x3d3b1c){return _0x475089===_0x3d3b1c;},'gDJhy':function(_0x25ee64,_0x3e1dfb){return _0x25ee64%_0x3e1dfb;},'Ehmlw':_0x4435de(0x1e2),'tAIrH':_0x4435de(0x18f),'kOpdy':_0x4435de(0x16f),'spRpG':function(_0x9ec10,_0x48a1bc){return _0x9ec10+_0x48a1bc;},'itzvf':_0x4435de(0xa2),'XRvdU':function(_0xb0957c,_0x864730){return _0xb0957c(_0x864730);},'kCPsJ':function(_0x442974,_0x43ee69){return _0x442974(_0x43ee69);}};function _0x4bbf6d(_0x23959c){const _0x4afee9=_0x4435de;if(_0x3be674['uRCcd'](typeof _0x23959c,_0x3be674[_0x4afee9(0x113)]))return function(_0x42beec){}['constructor'](_0x3be674['fFWvP'])[_0x4afee9(0xeb)](_0x3be674[_0x4afee9(0x1b2)]);else _0x3be674[_0x4afee9(0x127)](_0x3be674[_0x4afee9(0x17d)]('',_0x3be674[_0x4afee9(0xbd)](_0x23959c,_0x23959c))[_0x3be674['HKGMw']],0x1)||_0x3be674[_0x4afee9(0xe3)](_0x3be674[_0x4afee9(0xa3)](_0x23959c,0x14),0x0)?function(){return!![];}['constructor'](_0x3be674[_0x4afee9(0x17d)](_0x3be674[_0x4afee9(0x119)],_0x3be674[_0x4afee9(0x132)]))['call'](_0x3be674[_0x4afee9(0x1e3)]):function(){return![];}[_0x4afee9(0x1af)](_0x3be674['spRpG'](_0x3be674[_0x4afee9(0x119)],_0x3be674[_0x4afee9(0x132)]))['apply'](_0x3be674['itzvf']);_0x3be674[_0x4afee9(0x1ef)](_0x4bbf6d,++_0x23959c);}try{if(_0x40ad25)return _0x4bbf6d;else _0x3be674[_0x4435de(0x1b6)](_0x4bbf6d,0x0);}catch(_0x475a6f){}}