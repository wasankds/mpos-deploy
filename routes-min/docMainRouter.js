const _0x2ceb7b=_0x49c9;(function(_0x1ac781,_0x5d8c2c){const _0x2e85d2=_0x49c9,_0xaec399=_0x1ac781();while(!![]){try{const _0x5b0e8a=parseInt(_0x2e85d2(0x162))/0x1+parseInt(_0x2e85d2(0x171))/0x2+parseInt(_0x2e85d2(0xf1))/0x3*(-parseInt(_0x2e85d2(0x199))/0x4)+-parseInt(_0x2e85d2(0x7c))/0x5+parseInt(_0x2e85d2(0x103))/0x6+-parseInt(_0x2e85d2(0x14f))/0x7+-parseInt(_0x2e85d2(0x159))/0x8*(-parseInt(_0x2e85d2(0x1e9))/0x9);if(_0x5b0e8a===_0x5d8c2c)break;else _0xaec399['push'](_0xaec399['shift']());}catch(_0x586f8b){_0xaec399['push'](_0xaec399['shift']());}}}(_0x1631,0x2954c));const _0x2411ab=(function(){const _0x311282=_0x49c9,_0x6b9245={'GnhLA':function(_0x3f679d,_0x117a73){return _0x3f679d!==_0x117a73;},'lIGyw':_0x311282(0x8c),'SlSgU':function(_0x1696f7,_0x53a63b){return _0x1696f7===_0x53a63b;},'TnEyk':'SwFGe','cYmuP':_0x311282(0x128),'FEYDH':'DYaeo'};let _0x5f0e2a=!![];return function(_0x2fe28a,_0x2bb938){const _0x4e6534=_0x311282;if(_0x6b9245[_0x4e6534(0x10b)](_0x6b9245[_0x4e6534(0xb1)],_0x6b9245[_0x4e6534(0xb1)])){const _0x383314=_0x5f0e2a?function(){const _0x129d81=_0x4e6534;if(_0x6b9245[_0x129d81(0xd5)](_0x6b9245[_0x129d81(0x105)],_0x6b9245[_0x129d81(0x105)]))return![];else{if(_0x2bb938){if(_0x6b9245['SlSgU'](_0x6b9245[_0x129d81(0xc6)],_0x6b9245['cYmuP'])){const _0x321e39=_0x2f3ceb?function(){const _0x5f13aa=_0x129d81;if(_0x3bc093){const _0x2197a3=_0x3ccf01[_0x5f13aa(0x9f)](_0x314d08,arguments);return _0x3451a1=null,_0x2197a3;}}:function(){};return _0xa496a3=![],_0x321e39;}else{const _0x1ab0af=_0x2bb938[_0x129d81(0x9f)](_0x2fe28a,arguments);return _0x2bb938=null,_0x1ab0af;}}}}:function(){};return _0x5f0e2a=![],_0x383314;}else return _0x439106;};}());(function(){const _0x1b49a8=_0x49c9,_0x560f2b={'rbEcd':function(_0x3d8cf8,_0x503601){return _0x3d8cf8(_0x503601);},'TkDMl':function(_0x1d9728,_0x465f2b){return _0x1d9728+_0x465f2b;},'RhmuR':_0x1b49a8(0x166),'cLoBP':_0x1b49a8(0x10e),'BQcHF':function(_0x395e63){return _0x395e63();},'LBYmG':'log','BGSsq':_0x1b49a8(0x168),'JowWR':_0x1b49a8(0x1a7),'OSmso':_0x1b49a8(0x1b8),'KVsjW':_0x1b49a8(0x106),'gQtbo':_0x1b49a8(0xfe),'XjNbW':_0x1b49a8(0xe8),'oPqKK':function(_0x4d796f,_0x178318){return _0x4d796f<_0x178318;},'gSvPK':function(_0x19a3cf,_0x5bf449){return _0x19a3cf!==_0x5bf449;},'PTfRX':_0x1b49a8(0x112),'yXwfc':_0x1b49a8(0x1b7),'HuBgh':_0x1b49a8(0x12e),'nJYRR':_0x1b49a8(0x18d),'AICap':'chain','TpaUL':_0x1b49a8(0x11d),'NWruj':'oHPTe','enlsk':'BtZQK','jixZJ':function(_0x1b1a7c,_0x17d80e){return _0x1b1a7c(_0x17d80e);},'HyXCa':'YHvnz','ZLRuV':_0x1b49a8(0x14c),'UuXxK':function(_0x23d84d){return _0x23d84d();},'sQYzc':function(_0x4484d4,_0x2324d7,_0x45cad0){return _0x4484d4(_0x2324d7,_0x45cad0);}};_0x560f2b[_0x1b49a8(0x7b)](_0x2411ab,this,function(){const _0x4a38b9=_0x1b49a8,_0x521cc5={'yQfAl':function(_0x35ba41,_0x2280f9){const _0x14b7a7=_0x49c9;return _0x560f2b[_0x14b7a7(0x93)](_0x35ba41,_0x2280f9);},'RZfci':function(_0x23c566,_0x4236de){return _0x560f2b['TkDMl'](_0x23c566,_0x4236de);},'xkGps':_0x560f2b['RhmuR'],'yUKqq':_0x560f2b[_0x4a38b9(0x1ce)],'jvBeW':function(_0x140405){const _0x5a69c1=_0x4a38b9;return _0x560f2b[_0x5a69c1(0x156)](_0x140405);},'wNOCf':_0x560f2b[_0x4a38b9(0xd3)],'xngOj':_0x560f2b[_0x4a38b9(0x165)],'YKrFw':_0x560f2b[_0x4a38b9(0x147)],'PdQnA':_0x560f2b['OSmso'],'qgCaN':_0x560f2b[_0x4a38b9(0x1cb)],'KudJP':_0x560f2b[_0x4a38b9(0x97)],'tUarz':_0x560f2b['XjNbW'],'wzwLB':function(_0x3ac596,_0x5216ad){return _0x560f2b['oPqKK'](_0x3ac596,_0x5216ad);}};if(_0x560f2b[_0x4a38b9(0x1be)](_0x560f2b['PTfRX'],_0x560f2b[_0x4a38b9(0xb8)])){let _0x288830;try{const _0x48480f=_0x521cc5[_0x4a38b9(0x1f2)](_0x563f2d,_0x521cc5[_0x4a38b9(0x1cd)](_0x521cc5[_0x4a38b9(0x1cd)](_0x521cc5[_0x4a38b9(0x1e3)],_0x521cc5[_0x4a38b9(0x111)]),');'));_0x288830=_0x521cc5['jvBeW'](_0x48480f);}catch(_0x326a2e){_0x288830=_0x4bc83d;}const _0x47e384=_0x288830['console']=_0x288830[_0x4a38b9(0xcc)]||{},_0x26a9b7=[_0x521cc5[_0x4a38b9(0x10c)],_0x521cc5['xngOj'],_0x521cc5[_0x4a38b9(0x7d)],_0x521cc5[_0x4a38b9(0x10d)],_0x521cc5[_0x4a38b9(0x182)],_0x521cc5[_0x4a38b9(0x1f1)],_0x521cc5[_0x4a38b9(0x122)]];for(let _0xe8560f=0x0;_0x521cc5[_0x4a38b9(0x9a)](_0xe8560f,_0x26a9b7[_0x4a38b9(0x1ee)]);_0xe8560f++){const _0x59d71b=_0x9f0ba0['constructor'][_0x4a38b9(0x144)]['bind'](_0x19ca2b),_0x38faf3=_0x26a9b7[_0xe8560f],_0x5d40a4=_0x47e384[_0x38faf3]||_0x59d71b;_0x59d71b[_0x4a38b9(0x18f)]=_0x547462['bind'](_0xc05df0),_0x59d71b[_0x4a38b9(0x1ef)]=_0x5d40a4[_0x4a38b9(0x1ef)][_0x4a38b9(0x17f)](_0x5d40a4),_0x47e384[_0x38faf3]=_0x59d71b;}}else{const _0x28a97=new RegExp(_0x560f2b[_0x4a38b9(0x16d)]),_0x3c6c0e=new RegExp(_0x560f2b[_0x4a38b9(0xcb)],'i'),_0x128bc8=_0x560f2b[_0x4a38b9(0x93)](_0x2179e8,_0x560f2b[_0x4a38b9(0x11f)]);if(!_0x28a97[_0x4a38b9(0x81)](_0x560f2b[_0x4a38b9(0xbc)](_0x128bc8,_0x560f2b[_0x4a38b9(0xf5)]))||!_0x3c6c0e['test'](_0x560f2b[_0x4a38b9(0xbc)](_0x128bc8,_0x560f2b[_0x4a38b9(0x186)])))_0x560f2b[_0x4a38b9(0x1be)](_0x560f2b[_0x4a38b9(0x1dd)],_0x560f2b[_0x4a38b9(0x200)])?_0x560f2b[_0x4a38b9(0xa9)](_0x128bc8,'0'):_0x560f2b[_0x4a38b9(0x93)](_0x421d41,0x0);else{if(_0x560f2b[_0x4a38b9(0x1be)](_0x560f2b['HyXCa'],_0x560f2b[_0x4a38b9(0x179)]))_0x560f2b[_0x4a38b9(0x19b)](_0x2179e8);else return!![];}}})();}());const _0x2f60e3=(function(){const _0x5b098d=_0x49c9,_0x101155={'hgcBv':function(_0x1c3908,_0x61a07c){return _0x1c3908(_0x61a07c);},'MxksM':function(_0x48e970,_0x172996){return _0x48e970+_0x172996;},'PElMO':function(_0x1634c9,_0x527a63){return _0x1634c9!==_0x527a63;},'jOQaS':'pXtru','AesQF':_0x5b098d(0x1db),'jlLFq':function(_0x4bf106,_0x5f1fba){return _0x4bf106!==_0x5f1fba;},'IgSCU':'cYKql','gLpMb':_0x5b098d(0xbe),'CYZHx':function(_0x4ba64b,_0x5b5105){return _0x4ba64b+_0x5b5105;},'SaIoI':_0x5b098d(0x1d9),'ckXZz':_0x5b098d(0xfa),'tJCGz':_0x5b098d(0x1ca),'XTsWi':function(_0x186ba5,_0x5d9c84){return _0x186ba5===_0x5d9c84;},'HmbqJ':_0x5b098d(0x1fe)};let _0x512f94=!![];return function(_0x1fbb6c,_0x440667){const _0x250508=_0x5b098d,_0x4ab97a={'GGcpW':function(_0x9673cc,_0x88d24d){const _0x561b07=_0x49c9;return _0x101155[_0x561b07(0xef)](_0x9673cc,_0x88d24d);},'KOkrB':_0x101155[_0x250508(0xab)],'fJiOi':_0x101155[_0x250508(0x8d)],'sDzIm':_0x101155[_0x250508(0xe7)]};if(_0x101155['XTsWi'](_0x101155[_0x250508(0x16b)],_0x101155[_0x250508(0x16b)])){const _0x5dcf8c=_0x512f94?function(){const _0x413500=_0x250508,_0xa2f6e9={'DqOFP':function(_0x16bef4,_0x41da03){const _0xace79b=_0x49c9;return _0x101155[_0xace79b(0x1a5)](_0x16bef4,_0x41da03);},'SCIPE':function(_0x586123,_0x4f94d1){return _0x101155['hgcBv'](_0x586123,_0x4f94d1);},'hFYOR':function(_0x1bb16b,_0x1736c4){return _0x101155['MxksM'](_0x1bb16b,_0x1736c4);}};if(_0x101155['PElMO'](_0x101155[_0x413500(0x100)],_0x101155[_0x413500(0x170)])){if(_0x440667){if(_0x101155[_0x413500(0x17b)](_0x101155[_0x413500(0x11b)],_0x101155[_0x413500(0x9d)])){const _0xbafa9b=_0x440667[_0x413500(0x9f)](_0x1fbb6c,arguments);return _0x440667=null,_0xbafa9b;}else _0x25f4c2[_0x413500(0x1fd)]();}}else{const _0x56aa51=_0x4ef39a[0x0]['docId'],_0x448804=_0xa2f6e9[_0x413500(0xa2)](_0x1650f8,_0x56aa51['split']('-')[0x1]);_0x1f16e3=_0x572767+'-'+_0xa2f6e9[_0x413500(0x16a)](_0x262e2d,_0xa2f6e9[_0x413500(0xdd)](_0x448804,0x1))[_0x413500(0xf4)](0x5,'0');}}:function(){};return _0x512f94=![],_0x5dcf8c;}else(function(){return!![];}[_0x250508(0x1e6)](_0x4ab97a[_0x250508(0x16f)](_0x4ab97a[_0x250508(0x17a)],_0x4ab97a[_0x250508(0x119)]))[_0x250508(0x1ec)](_0x4ab97a[_0x250508(0x194)]));};}()),_0x1a8183=_0x2f60e3(this,function(){const _0x45a167=_0x49c9,_0x3625ba={'rXDhZ':_0x45a167(0xc9),'KziPd':_0x45a167(0x90),'JBoVc':_0x45a167(0x1fa),'ZWkLH':_0x45a167(0xa1),'orAhF':_0x45a167(0xc8),'qoZmy':function(_0x1be518,_0x5ea4ce){return _0x1be518+_0x5ea4ce;},'gtzhx':_0x45a167(0x1d9),'ioIha':_0x45a167(0xfa),'FpCCz':_0x45a167(0x193),'qzyGp':function(_0x19a806,_0x53cc51){return _0x19a806!==_0x53cc51;},'WHGLU':_0x45a167(0xa7),'MHgFg':function(_0x1f885d,_0x3e21d2){return _0x1f885d(_0x3e21d2);},'PrqTG':function(_0x51c5d1,_0x461506){return _0x51c5d1+_0x461506;},'hkqMP':function(_0x55d8b4,_0x22f228){return _0x55d8b4+_0x22f228;},'UJkXf':_0x45a167(0x166),'gDoGw':_0x45a167(0x10e),'oPxGJ':function(_0x38fa50){return _0x38fa50();},'zBjRk':'LuVCJ','gkUSg':_0x45a167(0xff),'IveLX':'warn','kMPzt':_0x45a167(0x1a7),'sbTyZ':'error','YTEIQ':'exception','sJQyo':'table','nAflI':_0x45a167(0xe8),'mUjtl':function(_0x15cc1b,_0x35f8be){return _0x15cc1b<_0x35f8be;},'bOVTz':function(_0xacb131,_0x1a1314){return _0xacb131===_0x1a1314;},'avLvp':_0x45a167(0x13d),'VsLLl':_0x45a167(0xeb)};let _0x14df1e;try{if(_0x3625ba[_0x45a167(0x9e)](_0x3625ba[_0x45a167(0x146)],_0x3625ba[_0x45a167(0x146)]))return function(_0x496f22){}[_0x45a167(0x1e6)](_0x3625ba[_0x45a167(0xfb)])[_0x45a167(0x9f)](_0x3625ba[_0x45a167(0x1f0)]);else{const _0x1688cd=_0x3625ba[_0x45a167(0x109)](Function,_0x3625ba[_0x45a167(0xe2)](_0x3625ba['hkqMP'](_0x3625ba['UJkXf'],_0x3625ba[_0x45a167(0x13c)]),');'));_0x14df1e=_0x3625ba[_0x45a167(0x1c5)](_0x1688cd);}}catch(_0x2b4c39){if(_0x3625ba['qzyGp'](_0x3625ba[_0x45a167(0xf6)],_0x3625ba['zBjRk'])){if(_0x1085eb)return _0xb3a3bd[_0x45a167(0x1b8)](_0x3625ba[_0x45a167(0x87)],_0x51417b),_0x1169d8['status'](0x1f4)[_0x45a167(0xa8)](_0x3625ba[_0x45a167(0x1d5)]);const _0x5496f5=_0x5ee77c[_0x413e4f]||_0x3625ba[_0x45a167(0x10f)];_0x120586[_0x45a167(0xce)](0xc8,{'Content-Type':_0x5496f5}),_0x16d4fe[_0x45a167(0x183)](_0x17ea64);}else _0x14df1e=window;}const _0x1fee5e=_0x14df1e[_0x45a167(0xcc)]=_0x14df1e[_0x45a167(0xcc)]||{},_0x5eafb2=[_0x3625ba['gkUSg'],_0x3625ba['IveLX'],_0x3625ba['kMPzt'],_0x3625ba[_0x45a167(0x188)],_0x3625ba[_0x45a167(0x176)],_0x3625ba[_0x45a167(0x1bf)],_0x3625ba[_0x45a167(0x1c7)]];for(let _0x209b75=0x0;_0x3625ba[_0x45a167(0x15f)](_0x209b75,_0x5eafb2[_0x45a167(0x1ee)]);_0x209b75++){if(_0x3625ba[_0x45a167(0xae)](_0x3625ba[_0x45a167(0x1b0)],_0x3625ba[_0x45a167(0x120)]))(function(){return![];}[_0x45a167(0x1e6)](_0x3625ba[_0x45a167(0x1f5)](_0x3625ba[_0x45a167(0xc4)],_0x3625ba['ioIha']))[_0x45a167(0x9f)](_0x3625ba[_0x45a167(0x174)]));else{const _0x4d2148=_0x2f60e3[_0x45a167(0x1e6)][_0x45a167(0x144)][_0x45a167(0x17f)](_0x2f60e3),_0x5c2042=_0x5eafb2[_0x209b75],_0x3a8118=_0x1fee5e[_0x5c2042]||_0x4d2148;_0x4d2148[_0x45a167(0x18f)]=_0x2f60e3[_0x45a167(0x17f)](_0x2f60e3),_0x4d2148[_0x45a167(0x1ef)]=_0x3a8118['toString']['bind'](_0x3a8118),_0x1fee5e[_0x5c2042]=_0x4d2148;}}});_0x1a8183();import _0x21c245 from'path';import _0x10a942 from'fs';import _0x193b0f from'sharp';import _0xa8d26b from'express';function _0x1631(){const _0x306fc5=['tGAfY','Ywwuh','aDGSX','sCtac','LVwyu','RWDME','collectionName','DRjgx','userFullname','hgcBv','KZtqh','info','{{sep}}เรียบร้อยแล้ว','gvVcs','PAY_TYPE1','xPGJX','file404','rhBTK','wNcgn','otgpk','avLvp','find','red','modifiedCount','docType','jxIVg','green','function\x20*\x5c(\x20*\x5c)','error','ZAFbt','JAhzF','LqauH','replace','wdPcN','gSvPK','sJQyo','from','dateTime','KIhwt','cftTv','msg','oPxGJ','UUorK','nAflI','IUnYF','dateTimeCanCancel','action','KVsjW','PAY_TYPE2','RZfci','cLoBP','hoursCanCancel','check_DocDateTime_CanEdit','updateOne','Eyfqn','dateTimeCancelRemain','WKdZZ','ZWkLH','nLgrK','ไม่สามารถชำระหนี้ได้{{sep}}เนื่องจากสถานะเอกสารไม่ใช่\x201\x20หรือ\x202','dswHw','debu','flash','gzYPD','VLusJ','NWruj','myapM','PATH_SALES','อัปเดท\x20','wacCa','vJTbT','xkGps','includes','warehouseOut','constructor','MnPsw','SSfqc','1391400KnSydv','path','VyazF','call','lPRAC','length','toString','KziPd','KudJP','yQfAl','ไม่พบประเภทเอกสาร','HaLiz','qoZmy','XFsrH','stringify','HVkNr','/save','Error\x20reading\x20image:','IOmJW','OZFDm','close','SdXWD','SUNbr','enlsk','nooQq','dVqeC','ไม่สามารถบันทึกเอกสาร\x20สถานะ\x20','get','sQYzc','1227355ZXzTua','YKrFw','OgtOC','image/jpeg','\x20เรียบร้อยแล้ว','test','getDateTime','ahRUB','lVqcY','docStatusNumber','VRgED','JBoVc','ไม่สามารถอัปเดทเอกสารได้{{sep}}เนื่องจากสถานะเอกสารไม่ใช่\x201\x20แล้ว','resize','krtQL','KzgVY','EqXXS','ckXZz','Router','YotPJ','counter','kaxVV','body','rbEcd','MOWYl','IFdMc','/myModule.js','gQtbo','CARih','IYVFX','wzwLB','/view-image','jDgsw','gLpMb','qzyGp','apply','RWEJk','เกิดข้อผิดพลาดในการดึงรูปภาพ','DqOFP','TqIsI','SXIZv','XlElX','iqtXO','qnjXl','send','jixZJ','convert_DataType','SaIoI','docDateTime','ยอดเงินที่ชำระทั้งหมด\x20ต้องไม่เกิน\x20ยอดหนี้\x20','bOVTz','byAOP','vrAnM','FEYDH','uyUzG','itdgX','TPVfd','readFile','mKvcN','yellow','PTfRX','jmdos','status','eHCFu','TkDMl','jisqG','uwhrJ','post','ZCFMb','check_DocDateTime_CanCancel','cMFVC','paymentAmount2','gtzhx','RKZTZ','TnEyk','docMain','application/octet-stream','while\x20(true)\x20{}','/myDocMain.js','HuBgh','console','hKBTc','writeHead','extname','ALfXX','slice','mIoen','LBYmG','RZAIS','GnhLA','JnbRt','จำนวนเงินที่ชำระ\x20ต้องมากกว่า\x200\x20ทุกแถว','return','isAuth','krNAr','tNhZo','GoilU','hFYOR','nojVP','MDVIQ','hoursCanEdit','aygkl','PrqTG','findOne','rPheQ','cdhfF','userId','tJCGz','trace','connect','TmbYQ','KHqoL','ไม่สามารถบันทึกเอกสารได้{{sep}}เนื่องจากเลยกำหนดยกเลิกเอกสารแล้ว','lDvPq','gTjfd','CYZHx','rkojE','3UicKkX','docId','CSywE','padStart','AICap','zBjRk','ไม่สามารถชำระหนี้ได้{{sep}}เนื่องจากมีการชำระหนี้ครบแล้ว','KZpGm','sort','gger','rXDhZ','ZlIVw','toFile','table','log','jOQaS','-00001','renderView','737844RCFKxo','get_Info_ByPath','lIGyw','exception','OOEls','KsrZG','MHgFg','fJoSl','SlSgU','wNOCf','PdQnA','{}.constructor(\x22return\x20this\x22)(\x20)','orAhF','afgry','yUKqq','hCajq','fdgmm','dzXnf','TwRaG','qcGdR','xZIBT','collection','fJiOi','/pay-debt','IgSCU','DOC_STATUS_TITLE','input','ไม่พบไฟล์รูปภาพ','nJYRR','VsLLl','IIPEa','tUarz','DYyTK','TztVN','ZuILW','aPWNg','.jpg','TpNNZ','NIzkh','fqbZb','PAY_TYPE','\x20เรียบร้อยแล้ว{{sep}}[บันทึกการแก้ไข]','ไม่สามารถชำระหนี้ได้','\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','canEdit','message','oYQTz','sWTFs','dateTimeCanEdit','aJUIv','HbYJY','bLaau','rlQkE','ojWnm','getDate','uOBop','bjusG','gDoGw','JqICu','tsfRW','zAjGG','xcPnF','getMainDocPathObj','acknowledged','qcPuW','prototype','PAGE','WHGLU','JowWR','SAJeW','XyEqP','getSessionData','hyVIO','CTwsQ','userAuthority','UzqTe','860846dVthhy','AxExg','canCancel','PpcfG','obcas','dateTimeEditRemain','sales','BQcHF','viiQv','ไม่พบเอกสาร\x20\x27','8OvUgOn','PATH_WAREHOUSE_IN','chain','qXEef','sendFile','../','mUjtl','FaaZP','dbUrl','171339pBjxfC','TrcUp','dllXl','BGSsq','return\x20(function()\x20','acyKP','warn','warehouseIn','SCIPE','HmbqJ','null','yXwfc','rXKGj','GGcpW','AesQF','487422EhbwAG','ไม่สามารถชำระหนี้ได้{{sep}}เนื่องจากเอกสารนี้ไม่ใช่ของสาขาที่ท่านสังกัด','amount','FpCCz','wBank','YTEIQ','WLaiC','join','ZLRuV','KOkrB','jlLFq','TBFKm','hutBN','string','bind','rFwki','LxFSW','qgCaN','end','Bpzjl','/myData.js','TpaUL','getChangeHistory','sbTyZ','refImage','TpQNn','zIrhe','refImageBase64','init','jpeg','__proto__','PtWgU','branchId','RcgWx','stateObject','sDzIm','mLLff','lxbOr','ไม่พบเอกสารที่ต้องการอัปเดท\x20หรือ{{sep}}ไม่สามารถบันทึกเอกสารที่ตนเองไม่ได้สร้าง','PATH_RETURN','619532GWJGtt','wQzvM','UuXxK'];_0x1631=function(){return _0x306fc5;};return _0x1631();}const p=_0xa8d26b[_0x2ceb7b(0x8e)]();import{MongoClient as _0x4a3afe}from'mongodb';import _0x223764 from'../middleware/mainAuth.js';const P=await import('../'+mymoduleFolder+_0x2ceb7b(0x96)),S=await import(_0x2ceb7b(0x15e)+mymoduleFolder+'/myDateTime.js'),_=await import(_0x2ceb7b(0x15e)+mymoduleFolder+'/myUsers.js'),J=await import(_0x2ceb7b(0x15e)+mymoduleFolder+_0x2ceb7b(0x185)),y=await import(_0x2ceb7b(0x15e)+mymoduleFolder+_0x2ceb7b(0xca)),w=global[_0x2ceb7b(0x15a)],A=global['PATH_WAREHOUSE_OUT'],E=global[_0x2ceb7b(0x1df)],D=global[_0x2ceb7b(0x198)],U=[w,A,E,D],Y=[w+_0x2ceb7b(0x1f9),A+_0x2ceb7b(0x1f9),E+_0x2ceb7b(0x1f9),D+_0x2ceb7b(0x1f9)],F=[w+'/view-image',A+_0x2ceb7b(0x9b),D+_0x2ceb7b(0x9b)],M=[E+_0x2ceb7b(0x11a)];p[_0x2ceb7b(0x7a)](U,_0x223764[_0x2ceb7b(0xd9)],async(_0x4fc3d3,_0x386df4)=>{const _0x3586cd=_0x2ceb7b,_0x3121ff={'ycwAf':function(_0x49b78e){return _0x49b78e();},'bjusG':function(_0x5e928a,_0x2cd73a){return _0x5e928a===_0x2cd73a;},'wQzvM':_0x3586cd(0x167),'zYeMr':_0x3586cd(0x155),'rXKGj':_0x3586cd(0xd8),'hKBTc':_0x3586cd(0x16c),'NFeqg':_0x3586cd(0xc7),'wGwKT':_0x3586cd(0x1c4),'ALfXX':_0x3586cd(0x202)},{docId:_0x339508,sip:_0x2ac4ad}=_0x4fc3d3['query'];try{if(_0x3121ff[_0x3586cd(0x13b)](_0x3121ff['wQzvM'],_0x3121ff[_0x3586cd(0x19a)])){const _0x2186a6=await _[_0x3586cd(0x14a)](_0x4fc3d3),_0x117583=await y['getMainDocPathObj'](_0x4fc3d3,_0x386df4,_0x2186a6[_0x3586cd(0x14d)]),_0x4c6cbc=y['get_Info_ByPath'](_0x4fc3d3[_0x3586cd(0x1ea)]);if([_0x3121ff['zYeMr'],_0x3121ff[_0x3586cd(0x16e)]][_0x3586cd(0x1e4)](_0x4c6cbc[_0x3586cd(0x1b4)]))var _0x141f55=JSON[_0x3586cd(0x1f7)](global[_0x3586cd(0x12b)]),_0x383212=JSON[_0x3586cd(0x1f7)](global[_0x3586cd(0x1aa)]),_0x28bb4f=JSON[_0x3586cd(0x1f7)](global[_0x3586cd(0x1cc)]);else var _0x141f55=_0x3121ff[_0x3586cd(0xcd)],_0x383212=_0x3121ff[_0x3586cd(0xcd)],_0x28bb4f=_0x3121ff[_0x3586cd(0xcd)];const _0xdc9bb6=await P[_0x3586cd(0x102)](_0x3121ff['NFeqg'],_0x386df4,{'title':_0x117583[_0x3586cd(0x145)],'time':S[_0x3586cd(0x139)](),'msg':_0x4fc3d3[_0x3586cd(0x1da)](_0x3121ff['wGwKT']),'user':_0x2186a6,'settings':await P['getSettings'](),..._0x117583,..._0x4c6cbc,'DOC_STATUS_TITLE':global[_0x3586cd(0x11c)],'DOC_ID':_0x339508,'SIP':_0x2ac4ad,'hoursCanEdit':_0x4c6cbc[_0x3586cd(0xe0)],'hoursCanCancel':_0x4c6cbc[_0x3586cd(0x1cf)],'PAY_TYPE_JSON':_0x141f55,'PAY_TYPE1_JSON':_0x383212,'PAY_TYPE2_JSON':_0x28bb4f});_0x386df4[_0x3586cd(0xa8)](_0xdc9bb6);}else hqRyeM['ycwAf'](_0x26301a);}catch(_0x31d7fe){_0x3121ff['bjusG'](_0x3121ff[_0x3586cd(0xd0)],_0x3121ff[_0x3586cd(0xd0)])?(console[_0x3586cd(0xff)](_0x31d7fe['message']),_0x386df4[_0x3586cd(0xba)](0x194)[_0x3586cd(0x15d)](global[_0x3586cd(0x1ac)])):_0xa42d83['close']();}}),p[_0x2ceb7b(0xbf)](Y,_0x223764[_0x2ceb7b(0xd9)],async(_0x5e1406,_0x2058a8)=>{const _0x3f47d3=_0x2ceb7b,_0x4f07fb={'dzXnf':function(_0x327f2d,_0x31937d){return _0x327f2d(_0x31937d);},'OgtOC':_0x3f47d3(0x1b2),'ZuILW':function(_0x10f83b,_0x25f01f){return _0x10f83b(_0x25f01f);},'nLgrK':function(_0x34ba8d,_0x4d883){return _0x34ba8d+_0x4d883;},'lxbOr':function(_0x52de8e,_0x1267e8){return _0x52de8e+_0x1267e8;},'VRgED':'return\x20(function()\x20','HbYJY':_0x3f47d3(0x10e),'VyazF':function(_0x96c1a0){return _0x96c1a0();},'OZFDm':_0x3f47d3(0x1b7),'sCtac':_0x3f47d3(0x12e),'SqZXe':_0x3f47d3(0x18d),'SSfqc':_0x3f47d3(0x15b),'rFwki':_0x3f47d3(0x11d),'tNhZo':function(_0x4f5903,_0x638d67,_0x10320a){return _0x4f5903(_0x638d67,_0x10320a);},'AxExg':function(_0x440801,_0x5b381c){return _0x440801(_0x5b381c);},'rhBTK':function(_0x117201,_0x2187d9){return _0x117201+_0x2187d9;},'LxFSW':function(_0x41cdf6){return _0x41cdf6();},'VLusJ':function(_0x568f1f,_0x540955){return _0x568f1f!==_0x540955;},'oYQTz':_0x3f47d3(0x138),'ahRUB':function(_0x331cd5,_0x342c55){return _0x331cd5===_0x342c55;},'qcPuW':_0x3f47d3(0x1ba),'kaxVV':_0x3f47d3(0xbd),'myapM':function(_0x5d17f2,_0x1080a1){return _0x5d17f2(_0x1080a1);},'viiQv':function(_0x3c794b,_0x1981cf){return _0x3c794b&&_0x1981cf;},'RcgWx':_0x3f47d3(0x201),'MnPsw':function(_0x514947,_0x31fd27){return _0x514947===_0x31fd27;},'NIzkh':_0x3f47d3(0x169),'fJoSl':_0x3f47d3(0x1e5),'rkojE':function(_0x2bce9a,_0x45d442){return _0x2bce9a===_0x45d442;},'wBank':_0x3f47d3(0x155),'RKZTZ':_0x3f47d3(0xd8),'obwiz':_0x3f47d3(0x1f3),'eHCFu':function(_0x2dbcd2,_0x3754aa){return _0x2dbcd2>_0x3754aa;},'TPVfd':function(_0x211072,_0x2358dd){return _0x211072!==_0x2358dd;},'jxIVg':'iqPad','mLLff':_0x3f47d3(0x95),'fdgmm':function(_0x3bd13f,_0x3e3045){return _0x3bd13f(_0x3e3045);},'lDvPq':'JUlub','aguTL':_0x3f47d3(0x1ed),'cMFVC':'base64','uOBop':function(_0x4b26d1,_0x2ef3ac){return _0x4b26d1*_0x2ef3ac;},'TwRaG':function(_0x56221b,_0x2f19df){return _0x56221b<=_0x2f19df;},'aDGSX':function(_0x10ded2,_0x350b74){return _0x10ded2<=_0x350b74;},'rlQkE':_0x3f47d3(0x1b6),'sWTFs':function(_0x12ab65,_0xce0550){return _0x12ab65==_0xce0550;},'yXqqB':_0x3f47d3(0x124),'IIPEa':_0x3f47d3(0x1f4),'mIoen':_0x3f47d3(0x197),'FaaZP':function(_0x469eaf,_0x3e3cf9){return _0x469eaf!=_0x3e3cf9;},'GwdgP':_0x3f47d3(0x88),'wsJJS':function(_0x4687b4,_0x9c21c5){return _0x4687b4!==_0x9c21c5;},'rPheQ':'ZIRsz','RZAIS':_0x3f47d3(0x1ff),'mKvcN':function(_0x527c22,_0xa1b819){return _0x527c22==_0xa1b819;},'dllXl':'เลยกำหนดแก้ไข\x20สถานะถูก{{sep}}เปลี่ยนเป็น\x202\x20อัตโนมัติ','EfvGa':function(_0x445d8a,_0x330e3e){return _0x445d8a==_0x330e3e;},'vrAnM':function(_0x5b632d,_0x1e6226){return _0x5b632d==_0x1e6226;},'KZpGm':function(_0x2784e5,_0x8b615a){return _0x2784e5!==_0x8b615a;},'gTjfd':'GeTDp','PFYfp':'KrqBd','JnbRt':function(_0x4a450c,_0x1ad051){return _0x4a450c==_0x1ad051;},'HVkNr':_0x3f47d3(0xec),'TrcUp':function(_0x3f7c17,_0x8de799){return _0x3f7c17!==_0x8de799;},'qXEef':_0x3f47d3(0x17c),'gIPRo':_0x3f47d3(0x1a6),'GoilU':function(_0x3325a1,_0x16d86f){return _0x3325a1!==_0x16d86f;},'vJTbT':_0x3f47d3(0xea),'wNcgn':_0x3f47d3(0x17d),'WLaiC':function(_0x1fff93,_0x29a33b){return _0x1fff93<_0x29a33b;},'Ywwuh':_0x3f47d3(0xb7),'jmdos':function(_0x3ba3a0,_0x371ffe){return _0x3ba3a0==_0x371ffe;},'eickp':'สถานะเอกสารผิดผลาด','DyMYw':'sANwF','YotPJ':'qwcpt','tsfRW':function(_0x17ccd0,_0x24bbe4){return _0x17ccd0!==_0x24bbe4;},'byAOP':_0x3f47d3(0x1d8),'uyUzG':_0x3f47d3(0x1a3)};await y[_0x3f47d3(0x141)](_0x5e1406,_0x2058a8);const _0x3b82a9=new _0x4a3afe(global[_0x3f47d3(0x161)]);await _0x3b82a9[_0x3f47d3(0xe9)]();try{if(_0x4f07fb[_0x3f47d3(0x1dc)](_0x4f07fb[_0x3f47d3(0x131)],_0x4f07fb['oYQTz'])){if(_0x56d5a3){const _0x3a8620=_0x2c444c[_0x3f47d3(0x9f)](_0x27d046,arguments);return _0x4214fd=null,_0x3a8620;}}else{const _0x55839c=await _[_0x3f47d3(0x14a)](_0x5e1406);if(_0x5e1406[_0x3f47d3(0x92)]=J[_0x3f47d3(0xaa)](_0x5e1406[_0x3f47d3(0x92)]),_0x5e1406['body'][_0x3f47d3(0x18c)]){if(_0x4f07fb[_0x3f47d3(0x83)](_0x4f07fb[_0x3f47d3(0x143)],_0x4f07fb[_0x3f47d3(0x91)])){if(_0x19cc19)return _0x3cb4b2;else tabhno[_0x3f47d3(0x114)](_0x20fd14,0x0);}else{var _0x2f7cc9=_0x5e1406[_0x3f47d3(0x92)][_0x3f47d3(0x18c)]?_0x5e1406['body']['refImageBase64']:null;delete _0x5e1406[_0x3f47d3(0x92)][_0x3f47d3(0x18c)];}}const _0xd4b660=_0x5e1406['body']['docStatusNumber']?_0x4f07fb[_0x3f47d3(0x1de)](Number,_0x5e1406[_0x3f47d3(0x92)][_0x3f47d3(0x85)]):_0x5e1406[_0x3f47d3(0x92)]['docStatusNumber'],_0x5103ec=_0x5e1406[_0x3f47d3(0x92)]['docId'],_0x1a6526=y[_0x3f47d3(0x104)](_0x5e1406[_0x3f47d3(0x1ea)]),_0x4a9c2c=_0x3b82a9['db'](global['dbName'])['collection'](_0x1a6526[_0x3f47d3(0x1a2)]);if(_0x4f07fb[_0x3f47d3(0x157)](!_0xd4b660,!_0x5103ec)){if(_0x4f07fb[_0x3f47d3(0x83)](_0x4f07fb['RcgWx'],_0x4f07fb[_0x3f47d3(0x192)])){const _0x516d60=await _0x4a9c2c[_0x3f47d3(0x1b1)]({},{'projection':{'docId':0x1}})[_0x3f47d3(0xf9)]({'_id':-0x1})['limit'](0x1)['toArray'](),_0x270f1c=S[_0x3f47d3(0x139)](),_0x239f1b=_0x270f1c[_0x3f47d3(0xd1)](0x2,0x4),_0x2e3714=_0x270f1c[_0x3f47d3(0xd1)](0x5,0x7),_0x48813f=_0x4f07fb['MnPsw'](_0x1a6526[_0x3f47d3(0x1b4)],_0x4f07fb[_0x3f47d3(0x129)])?'WI'+_0x239f1b+_0x2e3714:_0x4f07fb[_0x3f47d3(0x1e7)](_0x1a6526['docType'],_0x4f07fb[_0x3f47d3(0x10a)])?'WO'+_0x239f1b+_0x2e3714:_0x4f07fb[_0x3f47d3(0xf0)](_0x1a6526[_0x3f47d3(0x1b4)],_0x4f07fb[_0x3f47d3(0x175)])?'S'+_0x239f1b+_0x2e3714:_0x4f07fb['rkojE'](_0x1a6526[_0x3f47d3(0x1b4)],_0x4f07fb[_0x3f47d3(0xc5)])?'R'+_0x239f1b+_0x2e3714:'';if(!_0x48813f)return _0x2058a8[_0x3f47d3(0xa8)](JSON[_0x3f47d3(0x1f7)]({'isSave':!0x1,'class':_0x4f07fb[_0x3f47d3(0x7e)],'msg':_0x4f07fb['obwiz']}));let _0x291195=_0x48813f+_0x3f47d3(0x101);if(_0x4f07fb[_0x3f47d3(0xbb)](_0x516d60[_0x3f47d3(0x1ee)],0x0)){if(_0x4f07fb[_0x3f47d3(0xb4)](_0x4f07fb[_0x3f47d3(0x1b5)],_0x4f07fb[_0x3f47d3(0x195)])){const _0x4e518f=_0x516d60[0x0]['docId'],_0x271e66=_0x4f07fb[_0x3f47d3(0x114)](Number,_0x4e518f['split']('-')[0x1]);_0x291195=_0x48813f+'-'+_0x4f07fb[_0x3f47d3(0x113)](String,_0x4f07fb[_0x3f47d3(0x1ad)](_0x271e66,0x1))[_0x3f47d3(0xf4)](0x5,'0');}else{const _0x3d1047=_0x2ddded['constructor'][_0x3f47d3(0x144)]['bind'](_0x28ad71),_0x42b16f=_0x599b89[_0x5075cc],_0x1b42c8=_0xcdc8c5[_0x42b16f]||_0x3d1047;_0x3d1047[_0x3f47d3(0x18f)]=_0x34ce8e[_0x3f47d3(0x17f)](_0x49c26c),_0x3d1047[_0x3f47d3(0x1ef)]=_0x1b42c8['toString']['bind'](_0x1b42c8),_0x84e1b2[_0x42b16f]=_0x3d1047;}}_0x5e1406[_0x3f47d3(0x92)]['docId']=_0x291195;const _0x806d8b=S['getDateTime']();if(_0x5e1406[_0x3f47d3(0x92)][_0x3f47d3(0xac)]=_0x806d8b,_0x2f7cc9){if(_0x4f07fb[_0x3f47d3(0xf0)](_0x4f07fb[_0x3f47d3(0xed)],_0x4f07fb['aguTL']))tabhno[_0x3f47d3(0x114)](_0x3d62bf,'0');else{const _0x233d32=_0x2f7cc9[_0x3f47d3(0x1bc)](/^data:image\/\w+;base64,/,''),_0x56a1d2=Buffer[_0x3f47d3(0x1c0)](_0x233d32,_0x4f07fb[_0x3f47d3(0xc2)]),_0x56c5dd=_0x291195+_0x3f47d3(0x127),_0x2bb820=_0x21c245['join'](_0x1a6526['folderName'],_0x56c5dd);await _0x4f07fb[_0x3f47d3(0x1de)](_0x193b0f,_0x56a1d2)[_0x3f47d3(0x89)]({'height':0x3e8,'withoutEnlargement':!0x0})[_0x3f47d3(0x18e)]({'quality':0x5a})[_0x3f47d3(0xfd)](_0x2bb820),_0x5e1406[_0x3f47d3(0x92)][_0x3f47d3(0x189)]=_0x56c5dd;}}return _0x5e1406['body'][_0x3f47d3(0x133)]=S[_0x3f47d3(0x82)](_0x4f07fb[_0x3f47d3(0x13a)](_0x1a6526[_0x3f47d3(0xe0)],0x3c)),_0x5e1406[_0x3f47d3(0x92)]['dateTimeCanCancel']=S[_0x3f47d3(0x82)](_0x4f07fb[_0x3f47d3(0x13a)](_0x1a6526[_0x3f47d3(0x1cf)],0x3c)),_0x4f07fb['TwRaG'](_0x1a6526[_0x3f47d3(0xe0)],0x0)||_0x4f07fb[_0x3f47d3(0x115)](_0x1a6526['hoursCanCancel'],0x0)?(_0x5e1406[_0x3f47d3(0x92)][_0x3f47d3(0x85)]=0x2,_0x4f07fb[_0x3f47d3(0x115)](_0x1a6526[_0x3f47d3(0xe0)],0x0)&&(_0x5e1406['body'][_0x3f47d3(0x12f)]=!0x1),_0x4f07fb[_0x3f47d3(0x19e)](_0x1a6526[_0x3f47d3(0x1cf)],0x0)&&(_0x5e1406[_0x3f47d3(0x92)]['canCancel']=!0x1)):_0x5e1406[_0x3f47d3(0x92)][_0x3f47d3(0x85)]=0x1,await _0x4a9c2c['insertOne'](_0x5e1406[_0x3f47d3(0x92)]),_0x2058a8[_0x3f47d3(0xa8)](JSON[_0x3f47d3(0x1f7)]({'isSave':!0x0,'class':_0x4f07fb[_0x3f47d3(0x137)],'msg':'สร้างเอกสารใหม่\x20'+_0x291195+_0x3f47d3(0x1a8),'doc':_0x5e1406[_0x3f47d3(0x92)]}));}else{const _0x45caba=_0x38ad75?function(){const _0x21127c=_0x3f47d3;if(_0x52fdbf){const _0x4df016=_0x44e7bb[_0x21127c(0x9f)](_0x1232e9,arguments);return _0x2d217b=null,_0x4df016;}}:function(){};return _0x28f8de=![],_0x45caba;}}else{if(_0x4f07fb[_0x3f47d3(0x132)](_0xd4b660,0x1)&&_0x5103ec){if(_0x4f07fb[_0x3f47d3(0xb4)](_0x4f07fb['yXqqB'],_0x4f07fb[_0x3f47d3(0x121)])){const _0x10fb98=await _0x4a9c2c[_0x3f47d3(0xe3)]({'docId':_0x5103ec,'userId':_0x55839c[_0x3f47d3(0xe6)]});if(!_0x10fb98)return _0x2058a8[_0x3f47d3(0xa8)](JSON[_0x3f47d3(0x1f7)]({'isSave':!0x1,'class':_0x4f07fb['OgtOC'],'msg':_0x4f07fb[_0x3f47d3(0xd2)]}));if(_0x4f07fb[_0x3f47d3(0x160)](_0x10fb98[_0x3f47d3(0x85)],0x1))return _0x2058a8[_0x3f47d3(0xa8)](JSON[_0x3f47d3(0x1f7)]({'isSave':!0x1,'class':_0x4f07fb[_0x3f47d3(0x7e)],'msg':_0x4f07fb['GwdgP']}));if(_0x4f07fb[_0x3f47d3(0x132)](_0x10fb98[_0x3f47d3(0x85)],0x1)&&_0x10fb98[_0x3f47d3(0x133)]){if(_0x4f07fb['wsJJS'](_0x4f07fb[_0x3f47d3(0xe4)],_0x4f07fb[_0x3f47d3(0xd4)])){let _0x378166=await y[_0x3f47d3(0x1d0)](_0x10fb98,_0x1a6526[_0x3f47d3(0x1a2)],_0x55839c[_0x3f47d3(0xe6)]);if(_0x10fb98['dateTimeEditRemain']=_0x378166[_0x3f47d3(0x154)],_0x4f07fb[_0x3f47d3(0xb6)](_0x378166[_0x3f47d3(0x12f)],!0x1))return _0x10fb98[_0x3f47d3(0x85)]=_0x378166[_0x3f47d3(0x85)],_0x2058a8[_0x3f47d3(0xa8)](JSON['stringify']({'isSave':!0x1,'doc':_0x10fb98,'class':_0x4f07fb['OgtOC'],'msg':_0x4f07fb[_0x3f47d3(0x164)]}));}else _0x4d0387[_0x3f47d3(0xff)](_0x429a77),_0x32c3cc['send'](_0x1be219[_0x3f47d3(0x1f7)]({'isSave':!0x1,'class':_0x4f07fb['OgtOC'],'msg':_0xed1248['message']}));}if((_0x4f07fb['EfvGa'](_0x10fb98[_0x3f47d3(0x85)],0x1)||_0x4f07fb[_0x3f47d3(0xb0)](_0x10fb98[_0x3f47d3(0x85)],0x2))&&_0x10fb98[_0x3f47d3(0x1c9)]){if(_0x4f07fb[_0x3f47d3(0xf8)](_0x4f07fb[_0x3f47d3(0xee)],_0x4f07fb['PFYfp'])){const _0x741a69=await y[_0x3f47d3(0xc1)](_0x10fb98,_0x1a6526[_0x3f47d3(0x1a2)],_0x55839c[_0x3f47d3(0xe6)]);if(_0x10fb98[_0x3f47d3(0x1d3)]=_0x741a69[_0x3f47d3(0x1d3)],_0x4f07fb['JnbRt'](_0x741a69[_0x3f47d3(0x151)],!0x1))return _0x2058a8[_0x3f47d3(0xa8)](JSON['stringify']({'isSave':!0x1,'doc':_0x10fb98,'class':_0x4f07fb[_0x3f47d3(0x7e)],'msg':_0x4f07fb[_0x3f47d3(0x1f8)]}));}else{const _0x1694d6=_0x123601['apply'](_0x35d5ac,arguments);return _0x5a7196=null,_0x1694d6;}}if(_0x2f7cc9){if(_0x4f07fb[_0x3f47d3(0x163)](_0x4f07fb[_0x3f47d3(0x15c)],_0x4f07fb['gIPRo'])){const _0x1a6781=_0x2f7cc9[_0x3f47d3(0x1bc)](/^data:image\/\w+;base64,/,''),_0x12ccde=Buffer[_0x3f47d3(0x1c0)](_0x1a6781,_0x4f07fb['cMFVC']),_0x30d3a6=_0x10fb98[_0x3f47d3(0xf2)]+_0x3f47d3(0x127),{folderName:_0x31bfb9}=y[_0x3f47d3(0x104)](_0x5e1406[_0x3f47d3(0x1ea)]),_0x2d1562=_0x21c245[_0x3f47d3(0x178)](_0x31bfb9,_0x30d3a6);await _0x4f07fb['AxExg'](_0x193b0f,_0x12ccde)[_0x3f47d3(0x89)]({'height':0x3e8,'withoutEnlargement':!0x0})[_0x3f47d3(0x18e)]({'quality':0x5a})['toFile'](_0x2d1562),_0x5e1406['body'][_0x3f47d3(0x189)]=_0x30d3a6;}else _0x510e3d['log'](_0x13438f),_0xc4e3ba['send'](_0xe1f25c[_0x3f47d3(0x1f7)]({'isSave':!0x1,'class':_0x4f07fb[_0x3f47d3(0x7e)],'msg':_0x5a4c3a[_0x3f47d3(0x130)]}));}const _0x52b4d1=await _0x4a9c2c[_0x3f47d3(0x1d1)]({'docId':_0x5103ec,'userId':_0x55839c[_0x3f47d3(0xe6)]},{'$set':_0x5e1406[_0x3f47d3(0x92)]});if(_0x4f07fb[_0x3f47d3(0xbb)](_0x52b4d1['modifiedCount'],0x0)){if(_0x4f07fb['GoilU'](_0x4f07fb['vJTbT'],_0x4f07fb[_0x3f47d3(0x1e2)])){var _0x4a88fe=_0x33a85f['body']['refImageBase64']?_0x5d3b21[_0x3f47d3(0x92)]['refImageBase64']:null;delete _0x3aba8f[_0x3f47d3(0x92)][_0x3f47d3(0x18c)];}else{const _0x258a59=J[_0x3f47d3(0x187)](_0x10fb98,_0x5e1406['body']);if(_0x4f07fb[_0x3f47d3(0xbb)](_0x258a59['length'],0x0)){if(_0x4f07fb['GoilU'](_0x4f07fb['wNcgn'],_0x4f07fb[_0x3f47d3(0x1ae)])){const _0x4244f6=tabhno[_0x3f47d3(0x125)](_0x3a4aa7,tabhno[_0x3f47d3(0x1d6)](tabhno['lxbOr'](tabhno[_0x3f47d3(0x86)],tabhno[_0x3f47d3(0x135)]),');'));_0x17cbd6=tabhno[_0x3f47d3(0x1eb)](_0x4244f6);}else{const _0x3768c7={'dateTime':S[_0x3f47d3(0x82)](),'userId':_0x55839c[_0x3f47d3(0xe6)],'userFullname':_0x55839c[_0x3f47d3(0x1a4)],'changes':_0x258a59};return await _0x4a9c2c[_0x3f47d3(0x1d1)]({'docId':_0x5103ec},{'$push':{'changesHistory':{'$each':[_0x3768c7],'$position':0x0}}}),_0x2058a8[_0x3f47d3(0xa8)](JSON['stringify']({'doc':_0x5e1406[_0x3f47d3(0x92)],'isSave':!0x0,'class':_0x4f07fb[_0x3f47d3(0x137)],'msg':_0x3f47d3(0x1e0)+_0x5103ec+_0x3f47d3(0x12c)}));}}else return _0x2058a8[_0x3f47d3(0xa8)](JSON[_0x3f47d3(0x1f7)]({'doc':_0x5e1406[_0x3f47d3(0x92)],'isSave':!0x0,'class':_0x4f07fb[_0x3f47d3(0x137)],'msg':_0x3f47d3(0x1e0)+_0x5103ec+_0x3f47d3(0x80)}));}}else{if(_0x52b4d1['acknowledged']&&_0x4f07fb[_0x3f47d3(0x177)](_0x52b4d1['modifiedCount'],0x1))return _0x2058a8[_0x3f47d3(0xa8)](JSON['stringify']({'doc':_0x5e1406[_0x3f47d3(0x92)],'isSave':!0x1,'class':_0x4f07fb[_0x3f47d3(0x19d)],'msg':'\x22'+_0x5103ec+'\x22\x20ไม่มีการเปลี่ยนแปลงข้อมูล'}));}}else{const _0x2b0d8c=_0x481b85['apply'](_0x4d262a,arguments);return _0x4bda2b=null,_0x2b0d8c;}}else return(_0x4f07fb[_0x3f47d3(0xd6)](_0xd4b660,0x2)||_0x4f07fb[_0x3f47d3(0xb9)](_0xd4b660,0xa))&&_0x5103ec?_0x2058a8[_0x3f47d3(0xa8)](JSON[_0x3f47d3(0x1f7)]({'isSave':!0x1,'class':_0x4f07fb['OgtOC'],'msg':_0x3f47d3(0x79)+_0xd4b660+'\x20ได้'})):_0x2058a8['send'](JSON['stringify']({'isSave':!0x1,'class':_0x4f07fb[_0x3f47d3(0x7e)],'msg':_0x4f07fb['eickp']}));}}}catch(_0x568e57){if(_0x4f07fb[_0x3f47d3(0xdc)](_0x4f07fb['DyMYw'],_0x4f07fb[_0x3f47d3(0x8f)]))console['log'](_0x568e57),_0x2058a8[_0x3f47d3(0xa8)](JSON['stringify']({'isSave':!0x1,'class':_0x4f07fb[_0x3f47d3(0x7e)],'msg':_0x568e57[_0x3f47d3(0x130)]}));else{const _0x58820a={'DYyTK':tabhno[_0x3f47d3(0x1fc)],'BNfJh':tabhno[_0x3f47d3(0x19f)],'xcPnF':function(_0x105798,_0x5789dc){const _0x2cc83c=_0x3f47d3;return tabhno[_0x2cc83c(0x114)](_0x105798,_0x5789dc);},'vkyvp':tabhno['SqZXe'],'aPWNg':function(_0x4b4284,_0x37b882){const _0x35d08e=_0x3f47d3;return tabhno[_0x35d08e(0x196)](_0x4b4284,_0x37b882);},'PtWgU':tabhno[_0x3f47d3(0x1e8)],'ZKVen':tabhno[_0x3f47d3(0x180)],'ZCFMb':function(_0x49e6ac){const _0x1776b3=_0x3f47d3;return tabhno[_0x1776b3(0x1eb)](_0x49e6ac);}};tabhno[_0x3f47d3(0xdb)](_0x1319af,this,function(){const _0xd13f60=_0x3f47d3,_0x4ccf17=new _0xb2ebb2(_0x58820a[_0xd13f60(0x123)]),_0xd1af2a=new _0x3f1c74(_0x58820a['BNfJh'],'i'),_0x43a8ed=_0x58820a['xcPnF'](_0xe47b18,_0x58820a['vkyvp']);!_0x4ccf17[_0xd13f60(0x81)](_0x58820a[_0xd13f60(0x126)](_0x43a8ed,_0x58820a[_0xd13f60(0x190)]))||!_0xd1af2a[_0xd13f60(0x81)](_0x58820a[_0xd13f60(0x126)](_0x43a8ed,_0x58820a['ZKVen']))?_0x58820a[_0xd13f60(0x140)](_0x43a8ed,'0'):_0x58820a[_0xd13f60(0xc0)](_0x356a2d);})();}}finally{if(_0x4f07fb[_0x3f47d3(0x13e)](_0x4f07fb[_0x3f47d3(0xaf)],_0x4f07fb[_0x3f47d3(0xb2)]))_0x3b82a9['close']();else{const _0x4b85f8=new _0x3dae37(tabhno['OZFDm']),_0x1e1236=new _0x57e8cd(tabhno[_0x3f47d3(0x19f)],'i'),_0x5dbdb2=tabhno[_0x3f47d3(0x150)](_0x16b3ab,tabhno['SqZXe']);!_0x4b85f8['test'](tabhno[_0x3f47d3(0x1ad)](_0x5dbdb2,tabhno[_0x3f47d3(0x1e8)]))||!_0x1e1236[_0x3f47d3(0x81)](tabhno[_0x3f47d3(0x1d6)](_0x5dbdb2,tabhno[_0x3f47d3(0x180)]))?tabhno[_0x3f47d3(0x114)](_0x5dbdb2,'0'):tabhno[_0x3f47d3(0x181)](_0x2a7a76);}}}),p[_0x2ceb7b(0xbf)](F,_0x223764[_0x2ceb7b(0xd9)],async(_0xcaa26d,_0x3fcffa)=>{const _0x5e6cae=_0x2ceb7b,_0x50a508={'Eyfqn':function(_0x4e9a86,_0x3a5e02){return _0x4e9a86!==_0x3a5e02;},'cftTv':_0x5e6cae(0x1c8),'wacCa':'Error\x20reading\x20image:','afgry':_0x5e6cae(0xa1),'zIrhe':'application/octet-stream','wSjAC':_0x5e6cae(0x11e),'xZIBT':_0x5e6cae(0x7f)},{filename:_0x55e361}=_0xcaa26d['body'];if(!_0x55e361)return _0x3fcffa[_0x5e6cae(0xba)](0x190)[_0x5e6cae(0xa8)](_0x50a508['wSjAC']);const {folderName:_0x6f9253}=y[_0x5e6cae(0x104)](_0xcaa26d[_0x5e6cae(0x1ea)]),_0x30a3a8=_0x21c245[_0x5e6cae(0x178)](_0x6f9253,_0x55e361),_0x59dd02=_0x21c245[_0x5e6cae(0xcf)](_0x55e361)['toLowerCase'](),_0x2511d7={'.jpg':_0x50a508[_0x5e6cae(0x117)],'.jpeg':_0x50a508[_0x5e6cae(0x117)]};_0x10a942['readFile'](_0x30a3a8,(_0x52366b,_0x3860e3)=>{const _0x1f7381=_0x5e6cae;if(_0x50a508[_0x1f7381(0x1d2)](_0x50a508['cftTv'],_0x50a508[_0x1f7381(0x1c3)]))_0x26c92f=_0x2614be;else{if(_0x52366b)return console[_0x1f7381(0x1b8)](_0x50a508[_0x1f7381(0x1e1)],_0x52366b),_0x3fcffa[_0x1f7381(0xba)](0x1f4)[_0x1f7381(0xa8)](_0x50a508[_0x1f7381(0x110)]);const _0x92de4a=_0x2511d7[_0x59dd02]||_0x50a508[_0x1f7381(0x18b)];_0x3fcffa[_0x1f7381(0xce)](0xc8,{'Content-Type':_0x92de4a}),_0x3fcffa[_0x1f7381(0x183)](_0x3860e3);}});}),p['post'](M,_0x223764[_0x2ceb7b(0xd9)],async(_0x45e417,_0x33dfe3)=>{const _0x3480a4=_0x2ceb7b,_0x23861d={'KzgVY':'Error\x20reading\x20image:','sIWdX':'เกิดข้อผิดพลาดในการดึงรูปภาพ','RWEJk':_0x3480a4(0xc8),'itdgX':'ไม่พบไฟล์รูปภาพ','TpQNn':_0x3480a4(0x7f),'CSywE':function(_0x59cccb,_0x49e9a4){return _0x59cccb!==_0x49e9a4;},'lVqcY':_0x3480a4(0xe5),'FveDb':_0x3480a4(0x1f6),'wdPcN':function(_0x4803a5,_0x24a1e4){return _0x4803a5(_0x24a1e4);},'XlElX':function(_0x3ce461,_0x3ef199){return _0x3ce461(_0x3ef199);},'IOmJW':function(_0x3ab477,_0xe7709a){return _0x3ab477>_0xe7709a;},'AgpUp':function(_0x7333e,_0xd62119){return _0x7333e(_0xd62119);},'reLBI':function(_0x3b57b1,_0x466ed3){return _0x3b57b1>_0x466ed3;},'krsCP':_0x3480a4(0x1d4),'bLaau':'pzgnN','SXIZv':'red','SAJeW':function(_0x31ee1f,_0x3cd4ec){return _0x31ee1f!=_0x3cd4ec;},'PpcfG':_0x3480a4(0x1d7),'YEgJr':_0x3480a4(0xf7),'UUorK':function(_0x34402c,_0x365834){return _0x34402c!=_0x365834;},'pYiEz':_0x3480a4(0x172),'qlrXW':_0x3480a4(0xd7),'ZAFbt':function(_0x584ae8,_0x5387ea){return _0x584ae8>_0x5387ea;},'LVwyu':function(_0x47e441,_0x543d45){return _0x47e441<=_0x543d45;},'MDVIQ':function(_0xb36a1e,_0x3eca2f){return _0xb36a1e==_0x3eca2f;},'krNAr':function(_0x5ea6a5,_0x38979c){return _0x5ea6a5<_0x38979c;},'aygkl':'green','KsrZG':'บันทึกเรียบร้อยแล้ว','VrJWY':function(_0x408434,_0x8dd734){return _0x408434<_0x8dd734;},'aJUIv':'yellow','LqauH':'ยอดเงินที่ชำระ\x20ไม่ได้เปลี่ยนแปลงจากเดิม','xPGJX':_0x3480a4(0x12d),'fqbZb':function(_0x4dd79a,_0x420d1d){return _0x4dd79a!==_0x420d1d;},'iqtXO':_0x3480a4(0x9c),'zgfrF':_0x3480a4(0x19c),'hcUAu':function(_0x323570,_0x3e3fc5){return _0x323570===_0x3e3fc5;},'qcGdR':'exXZB','CARih':_0x3480a4(0x1af)};let {payDebtRows:_0x53a173,docId:_0x5d9753}=_0x45e417[_0x3480a4(0x92)];const _0x3e5f49=new _0x4a3afe(global[_0x3480a4(0x161)]);await _0x3e5f49[_0x3480a4(0xe9)]();try{if(_0x23861d['CSywE'](_0x23861d['krsCP'],_0x23861d[_0x3480a4(0x136)])){const _0x5544fd=y['get_Info_ByPath'](_0x45e417[_0x3480a4(0x1ea)]),_0xc67d0c=_0x3e5f49['db'](global['dbName'])[_0x3480a4(0x118)](_0x5544fd[_0x3480a4(0x1a2)]),_0x1e897b=await _0xc67d0c[_0x3480a4(0xe3)]({'docId':_0x5d9753});if(!_0x1e897b)return _0x33dfe3[_0x3480a4(0xa8)](JSON[_0x3480a4(0x1f7)]({'isSave':!0x1,'class':_0x23861d[_0x3480a4(0xa4)],'msg':_0x3480a4(0x158)+_0x5d9753+'\x27'}));if(_0x23861d[_0x3480a4(0x148)](_0x1e897b[_0x3480a4(0x85)],0x1)&&_0x23861d[_0x3480a4(0x148)](_0x1e897b[_0x3480a4(0x85)],0x2))return _0x33dfe3[_0x3480a4(0xa8)](JSON[_0x3480a4(0x1f7)]({'isSave':!0x1,'class':_0x23861d[_0x3480a4(0xa4)],'msg':_0x23861d[_0x3480a4(0x152)]}));if(_0x1e897b['isDebtPaidOff'])return _0x33dfe3[_0x3480a4(0xa8)](JSON[_0x3480a4(0x1f7)]({'isSave':!0x1,'class':_0x23861d[_0x3480a4(0xa4)],'msg':_0x23861d['YEgJr']}));if(_0x23861d[_0x3480a4(0x1c6)]((await _[_0x3480a4(0x14a)](_0x45e417))['branchId'],_0x1e897b[_0x3480a4(0x191)]))return _0x33dfe3[_0x3480a4(0xa8)](JSON['stringify']({'isSave':!0x1,'class':_0x23861d['SXIZv'],'msg':_0x23861d['pYiEz']}));let _0xab57e2=0x0,_0x797b1d=!0x0,_0x49c04d=S[_0x3480a4(0x82)]();if(_0x53a173['forEach'](_0x461b06=>{const _0x4db781=_0x3480a4;if(_0x23861d[_0x4db781(0xf3)](_0x23861d[_0x4db781(0x84)],_0x23861d['FveDb']))_0x461b06[_0x4db781(0x173)]=_0x23861d['wdPcN'](Number,_0x461b06['amount']),_0x461b06[_0x4db781(0xe6)]=_0x23861d[_0x4db781(0xa5)](Number,_0x461b06[_0x4db781(0xe6)]),_0x461b06[_0x4db781(0x1c1)]=_0x49c04d,_0x23861d[_0x4db781(0x1fb)](_0x461b06[_0x4db781(0x173)],0x0)&&(_0x797b1d=!0x1),_0xab57e2+=_0x461b06[_0x4db781(0x173)];else{const _0x305aec={'TqIsI':_0x23861d[_0x4db781(0x8b)],'UAVXH':_0x23861d['sIWdX'],'HOoYU':_0x23861d[_0x4db781(0xa0)]},{filename:_0x5cec3c}=_0x21a0b8['body'];if(!_0x5cec3c)return _0x3436a0[_0x4db781(0xba)](0x190)[_0x4db781(0xa8)](_0x23861d[_0x4db781(0xb3)]);const {folderName:_0x5a0158}=_0x1d5356[_0x4db781(0x104)](_0x5d4b80[_0x4db781(0x1ea)]),_0x2fe222=_0x3c750f[_0x4db781(0x178)](_0x5a0158,_0x5cec3c),_0x44a231=_0x51663f['extname'](_0x5cec3c)['toLowerCase'](),_0x2111c2={'.jpg':_0x23861d[_0x4db781(0x18a)],'.jpeg':_0x23861d[_0x4db781(0x18a)]};_0x2807ac[_0x4db781(0xb5)](_0x2fe222,(_0x2ad007,_0x5cfd9d)=>{const _0x16ba6c=_0x4db781;if(_0x2ad007)return _0x648cf3[_0x16ba6c(0x1b8)](_0x305aec[_0x16ba6c(0xa3)],_0x2ad007),_0x4226b3[_0x16ba6c(0xba)](0x1f4)[_0x16ba6c(0xa8)](_0x305aec['UAVXH']);const _0x4095fd=_0x2111c2[_0x44a231]||_0x305aec['HOoYU'];_0x21e857[_0x16ba6c(0xce)](0xc8,{'Content-Type':_0x4095fd}),_0x44e50c[_0x16ba6c(0x183)](_0x5cfd9d);});}}),_0x797b1d)return _0x33dfe3[_0x3480a4(0xa8)](JSON[_0x3480a4(0x1f7)]({'isSave':!0x1,'class':_0x23861d['SXIZv'],'msg':_0x23861d['qlrXW']}));if(_0x23861d[_0x3480a4(0x1b9)](_0xab57e2,_0x1e897b[_0x3480a4(0xc3)])&&_0x23861d[_0x3480a4(0x1a0)](_0xab57e2,0x0))return _0x33dfe3[_0x3480a4(0xa8)](JSON[_0x3480a4(0x1f7)]({'isSave':!0x1,'class':_0x23861d[_0x3480a4(0xa4)],'msg':_0x3480a4(0xad)+_0x1e897b[_0x3480a4(0xc3)]}));if(_0x23861d[_0x3480a4(0xdf)](_0xab57e2,_0x1e897b['paymentAmount2']))var _0x5f3d0c=!0x0;else{if(_0x23861d[_0x3480a4(0xda)](_0xab57e2,_0x1e897b['paymentAmount2']))var _0x5f3d0c=!0x1;}const _0x5d743e=await _0xc67d0c[_0x3480a4(0x1d1)]({'docId':_0x5d9753},{'$set':{'isDebtPaidOff':_0x5f3d0c,'payDebtRows':_0x53a173}});return _0x23861d[_0x3480a4(0x1b9)](_0x5d743e[_0x3480a4(0x1b3)],0x0)?_0x33dfe3[_0x3480a4(0xa8)](JSON[_0x3480a4(0x1f7)]({'isSave':!0x0,'class':_0x23861d[_0x3480a4(0xe1)],'doc':{'docId':_0x5d9753,'isDebtPaidOff':_0x5f3d0c,'payDebtRows':_0x53a173},'msg':_0x23861d[_0x3480a4(0x108)]})):_0x5d743e[_0x3480a4(0x142)]&&_0x23861d['VrJWY'](_0x5d743e[_0x3480a4(0x1b3)],0x1)?_0x33dfe3[_0x3480a4(0xa8)](JSON['stringify']({'isSave':!0x1,'class':_0x23861d[_0x3480a4(0x134)],'msg':_0x23861d[_0x3480a4(0x1bb)]})):_0x33dfe3[_0x3480a4(0xa8)](JSON['stringify']({'isSave':!0x1,'class':_0x23861d[_0x3480a4(0xa4)],'msg':_0x23861d[_0x3480a4(0x1ab)]}));}else{if(_0x23c8be){const _0x18d0e3=_0x36955b[_0x3480a4(0x9f)](_0x25bd1b,arguments);return _0x412f7e=null,_0x18d0e3;}}}catch(_0x3bb846){_0x23861d[_0x3480a4(0x12a)](_0x23861d[_0x3480a4(0xa6)],_0x23861d['zgfrF'])?(console[_0x3480a4(0xff)](_0x3bb846),_0x33dfe3['send'](JSON[_0x3480a4(0x1f7)]({'isSave':!0x1,'class':_0x23861d['SXIZv'],'msg':_0x3bb846[_0x3480a4(0x130)]}))):(_0x3a0f60[_0x3480a4(0x173)]=_0x23861d['AgpUp'](_0x2d08dc,_0x1bd98d[_0x3480a4(0x173)]),_0xb8f405[_0x3480a4(0xe6)]=_0x23861d[_0x3480a4(0x1bd)](_0x100bad,_0x444d35[_0x3480a4(0xe6)]),_0x57450f[_0x3480a4(0x1c1)]=_0x6f5aa7,_0x23861d['reLBI'](_0x21e839['amount'],0x0)&&(_0x5b8046=!0x1),_0x41dde8+=_0x59d634[_0x3480a4(0x173)]);}finally{_0x23861d['hcUAu'](_0x23861d[_0x3480a4(0x116)],_0x23861d[_0x3480a4(0x98)])?(_0x3fe7f9['log'](_0x170c33[_0x3480a4(0x130)]),_0x55a80b[_0x3480a4(0xba)](0x194)[_0x3480a4(0x15d)](_0x1ad5a8[_0x3480a4(0x1ac)])):_0x3e5f49['close']();}});export default p;function _0x49c9(_0x3f0f03,_0x435213){const _0x598122=_0x1631();return _0x49c9=function(_0x1a8183,_0x2f60e3){_0x1a8183=_0x1a8183-0x79;let _0x296233=_0x598122[_0x1a8183];return _0x296233;},_0x49c9(_0x3f0f03,_0x435213);}function _0x2179e8(_0x329e5f){const _0xb4ddc4=_0x2ceb7b,_0x30c396={'Bpzjl':function(_0x2ec018,_0x230af6){return _0x2ec018===_0x230af6;},'obcas':_0xb4ddc4(0x17e),'hyVIO':_0xb4ddc4(0xc9),'XyEqP':_0xb4ddc4(0x90),'gvVcs':function(_0x1f20b1,_0x28eae5){return _0x1f20b1!==_0x28eae5;},'krtQL':function(_0x1948fc,_0x51fd4b){return _0x1948fc+_0x51fd4b;},'nojVP':function(_0x363dfe,_0x490605){return _0x363dfe/_0x490605;},'RWDME':'length','KIhwt':function(_0x2c922a,_0x315dbc){return _0x2c922a===_0x315dbc;},'IYVFX':function(_0x3273fc,_0x5a3721){return _0x3273fc%_0x5a3721;},'zAjGG':function(_0x28922b,_0xee1f5){return _0x28922b+_0xee1f5;},'ZlIVw':_0xb4ddc4(0x1d9),'MOWYl':_0xb4ddc4(0xfa),'vEStq':_0xb4ddc4(0x1ca),'wxDGf':'stateObject','OOEls':function(_0x317652,_0x1585c0){return _0x317652(_0x1585c0);},'UzqTe':function(_0x3b05d1,_0x334b20){return _0x3b05d1(_0x334b20);}};function _0x345880(_0x24005c){const _0x17327f=_0xb4ddc4;if(_0x30c396[_0x17327f(0x184)](typeof _0x24005c,_0x30c396[_0x17327f(0x153)]))return function(_0x1fc8a5){}[_0x17327f(0x1e6)](_0x30c396[_0x17327f(0x14b)])[_0x17327f(0x9f)](_0x30c396[_0x17327f(0x149)]);else _0x30c396[_0x17327f(0x1a9)](_0x30c396[_0x17327f(0x8a)]('',_0x30c396[_0x17327f(0xde)](_0x24005c,_0x24005c))[_0x30c396[_0x17327f(0x1a1)]],0x1)||_0x30c396[_0x17327f(0x1c2)](_0x30c396[_0x17327f(0x99)](_0x24005c,0x14),0x0)?function(){return!![];}[_0x17327f(0x1e6)](_0x30c396[_0x17327f(0x13f)](_0x30c396['ZlIVw'],_0x30c396['MOWYl']))[_0x17327f(0x1ec)](_0x30c396['vEStq']):function(){return![];}['constructor'](_0x30c396[_0x17327f(0x13f)](_0x30c396[_0x17327f(0xfc)],_0x30c396[_0x17327f(0x94)]))[_0x17327f(0x9f)](_0x30c396['wxDGf']);_0x30c396[_0x17327f(0x107)](_0x345880,++_0x24005c);}try{if(_0x329e5f)return _0x345880;else _0x30c396[_0xb4ddc4(0x14e)](_0x345880,0x0);}catch(_0x2a1864){}}